{
  "title": "Leveraging Large Language Models to Analyze Continuous Glucose Monitoring Data: A Case Study",
  "url": "https://openalex.org/W4394567387",
  "year": 2024,
  "authors": [
    {
      "id": "https://openalex.org/A2314205132",
      "name": "Elizabeth Healey",
      "affiliations": [
        "Harvard University"
      ]
    },
    {
      "id": "https://openalex.org/A2475446579",
      "name": "Amelia Tan",
      "affiliations": [
        "Harvard University"
      ]
    },
    {
      "id": "https://openalex.org/A2314001730",
      "name": "Kristen Flint",
      "affiliations": [
        "Massachusetts General Hospital"
      ]
    },
    {
      "id": "https://openalex.org/A2558476093",
      "name": "Jessica Ruiz",
      "affiliations": [
        "Boston Children's Hospital",
        "Boston Children's Museum"
      ]
    },
    {
      "id": "https://openalex.org/A2688074219",
      "name": "Isaac Kohane",
      "affiliations": [
        "Harvard University"
      ]
    },
    {
      "id": "https://openalex.org/A2314205132",
      "name": "Elizabeth Healey",
      "affiliations": [
        "Harvard–MIT Division of Health Sciences and Technology",
        "Harvard University"
      ]
    },
    {
      "id": "https://openalex.org/A2475446579",
      "name": "Amelia Tan",
      "affiliations": [
        "Harvard University"
      ]
    },
    {
      "id": "https://openalex.org/A2314001730",
      "name": "Kristen Flint",
      "affiliations": [
        "Massachusetts General Hospital"
      ]
    },
    {
      "id": "https://openalex.org/A2558476093",
      "name": "Jessica Ruiz",
      "affiliations": [
        "Boston Children's Hospital",
        "Boston Children's Museum"
      ]
    },
    {
      "id": "https://openalex.org/A2688074219",
      "name": "Isaac Kohane",
      "affiliations": [
        "Harvard University"
      ]
    }
  ],
  "references": [
    "https://openalex.org/W2964434942",
    "https://openalex.org/W4389120388",
    "https://openalex.org/W4313681084",
    "https://openalex.org/W2807667907",
    "https://openalex.org/W4380730209",
    "https://openalex.org/W4390103576",
    "https://openalex.org/W4390577395",
    "https://openalex.org/W4389244587",
    "https://openalex.org/W4388999584",
    "https://openalex.org/W4324311092",
    "https://openalex.org/W2129995532",
    "https://openalex.org/W4220779940",
    "https://openalex.org/W2948261890",
    "https://openalex.org/W3146148359",
    "https://openalex.org/W4399650252",
    "https://openalex.org/W1996290308",
    "https://openalex.org/W4311158234"
  ],
  "abstract": "Abstract Continuous glucose monitors (CGM) provide patients and clinicians with valuable insights about glycemic control that aid in diabetes management. The advent of large language models (LLMs), such as GPT-4, has enabled real-time text generation and summarization of medical data. Further, recent advancements have enabled the integration of data analysis features in chatbots, such that raw data can be uploaded and analyzed when prompted. Studying both the accuracy and suitability of LLM-derived data analysis performed on medical time series data, such as CGM data, is an important area of research. The objective of this study was to assess the strengths and limitations of using an LLM to analyze raw CGM data and produce summaries of 14 days of data for patients with type 1 diabetes. This study used simulated CGM data from 10 different cases. We first evaluated the ability of GPT-4 to compute quantitative metrics specific to diabetes found in an Ambulatory Glucose Profile (AGP). Then, using two independent clinician graders, we evaluated the accuracy, completeness, safety, and suitability of qualitative descriptions produced by GPT-4 across five different CGM analysis tasks. We demonstrated that GPT-4 performs well across measures of accuracy, completeness, and safety when producing summaries of CGM data across all tasks. These results highlight the capabilities of using an LLM to produce accurate and safe narrative summaries of medical time series data. We highlight several limitations of the work, including concerns related to how GPT-4 may misprioritize highlighting instances of hypoglycemia and hyperglycemia. Our work serves as a preliminary study on how generative language models can be integrated into diabetes care through CGM analysis, and more broadly, the potential to leverage LLMs for streamlined medical time series analysis.",
  "full_text": "Leveraging Large Language Models to Analyze Continuous Glucose Monitoring Data: A \nCase Study  \nElizabeth Healey1,2, Amelia Tan2, Kristen Flint3, Jessica Ruiz4, Isaac Kohane2 \n1. Harvard-MIT Program in Health Sciences and Technology, Massachusetts Institute of Technology, Cambridge, MA \n2. Department of Biomedical Informatics, Harvard Medical School, Boston, MA \n3. Endocrinology Division, Massachusetts General Hospital, Boston, MA \n4. Division of Endocrinology, Boston Children’s Hospital, Boston, MA \n \nCorrespondence: ehealey@mit.edu  \nAbstract \nContinuous glucose monitors (CGM) provide patients and clinicians with valuable insights about glycemic control \nthat aid in diabetes management.  The advent of large language models (LLMs), such as GPT -4, has enabled \nreal-time text generation and summariza tion of medical data. Further, recent advancements have enabled the \nintegration of data analysis features in chatbots, such that raw data can be uploaded and analyzed when \nprompted. Studying both the accuracy and suitability of LLM -derived data analysis performed on medical time \nseries data, such as CGM data, is an important area of research.  The objective of this study was to assess the \nstrengths and limitations of using an LLM to analyze raw CGM data and produce summaries of 14 days of data \nfor patients with type 1 diabetes. This study used simulated CGM data from 10 different cases. We first evaluated \nthe ability of GPT-4 to compute quantitative metrics specific to diabetes found in an Ambulatory Glucose Profile \n(AGP). Then, using two independent clinici an graders, we evaluated the accuracy, completeness, safety, and \nsuitability of qualitative descriptions produced by GPT -4 across five different CGM analysis tasks. We \ndemonstrated that GPT -4 performs well across measures of accuracy, completeness, and saf ety when \nproducing summaries of CGM data across all tasks. These results highlight the capabilities of using an LLM to \nproduce accurate and safe narrative summaries of medical time series data. We highlight several limitations of \nthe work, including concerns related to how GPT-4 may misprioritize highlighting instances of hypoglycemia and \nhyperglycemia. Our work serves as a preliminary study on how generative language models can be integrated \ninto diabetes care through CGM analysis, and more broadly, the potential to leverage LLMs for streamlined \nmedical time series analysis.  \nIntroduction:  \nWearable continuous glucose monitors (CGM) are a useful tool for diabetes management [1].  These devices \nuse a sensor placed subcutaneously to measure a patient’s interstitial glucose levels every 5 -15 minutes and \ntransmit the data to a receiver device or smartphone to provide the patient with comprehensive glycemic data \nthroughout the day an d night. From this data, quantitative metrics of glucose control can be calculated, and \npatterns in glucose control can be observed by comparing CGM data from different time periods on a daily or \nweekly basis. These insights are paramount to guiding treatm ent decisions and promoting behavioral change \nthat can improve glycemic control [2].  \n \nWhile many patients may be equipped to interpret figures and metrics independently, other patients may be best \nserved through narrative explanations of their glucose trends by the clinicians who review their data. CGM \nmanufacturers currently provide clinicians with software programs, such as Dexcom CLARITY, Abbott LibreView, \nand Medtronic Carelink, to view patients’ shared CGM data. These programs summarize CGM data in different \nways, but all include an Ambulatory Glucose Profile (AGP), a standardized singl e page report created by the \nInternational Diabetes Center that gives descriptive statistics and visualization of CGM data [3]. Clinicians may \nuse these summaries and AGPs to initiate discussions with patients about strategies to improve their blood \nglucose control. For example, in a standard office visit with a patient with diabetes, a clinician may review that \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nNOTE: This preprint reports new research that has not been certified by peer review and should not be used to guide clinical practice.\npatient’s CGM summary and observe that the patient experiences post-prandial blood glucose values over 300 \nmg/dL most mornings. The clinician would then initiate a conversation about nutritional choices or insulin dosing \npatterns in the mornings to identif y strategies to improve glucose control. For many patients, the insights that \ncome from a discussion with a clinician are valuable towards motivating behavioral change.  Although CGM \nprovides patients with real-time data and AGP reports, there are concerns  that the complexity of the data is a \nbarrier to some patients interpreting their own data [4].  Additionally, studies have also observed notable variation \nin clinician recommendations for insulin dosing after looking at the same CGM data [5]. In this work, we assess \nthe ability of a large language model (LLM) to accurately interpret and analyze time-series CGM data and provide \nnarrative summaries. \n \nLLMs, such as GPT-4, have shown promise in providing medical information to patients that clinicians agree with \n[6–9]. However, there has been limited work studying the efficacy of LLMs in analyzing medical time series data. \nIn diabetes, there has been recent interest in using LLMs to enhance care [10].  Previously, a voice -based \nartificial intelligence chatbot was used to help patients with type 2 diabetes manage insulin doses, and was found \nto be effective at improving glucose management [11]. However, research evaluating the efficacy of LLMs in \nproviding feedback to patients managing diabetes remains limited. In a small study, using GPT -4 showed \npromising results in generating textual summaries from CGM data [12]. Recent work also investigated the \npotential and limitations of using ChatGPT for diabetes education [13]. Currently, there is limited work evaluating \nLLMs leveraging data analysis features, where the model writes and executes code from a prompt, to analyze \nmedical time-series data and provide a comprehensive summary. In this work, assess the viability of using LLMs \nto analyze CGM data. In particular, we use GPT -4 [14] powered by the “Data Analyst by ChatGPT” plugin [15] \nto provide data analysis summaries of CGM data from time -series data. Throughout this work, we refer to the \nsystem as “GPT-4”.  \nMethods:  \nThe study was designed to assess the ability of GPT-4 to analyze 14 days of CGM data. To do so, our evaluation \nwas split into two parts. In the first part, we empirically evaluated the ability of GPT-4 to compute 10 descriptive \nmetrics found on the AGP.  T he purpose of testing this was to understand whether GPT -4 can perform basic \nCGM-specific data analysis with accuracy and without hallucinations. In the second part, we used two \nindependent clinician graders to evaluate the narrative output of GPT -4 when p rompted to analyze the CGM \ndata for five distinct tasks.  The purpose of this evaluation was to assess the ability of GPT -4 to analyze CGM \ndata and produce summaries of quality similar to those that would be produced by a clinician looking at an AGP. \nTo avoid privacy constraints in leveraging GPT -4 and to enable reproducibility, we used synthetic data for this \nstudy. We used a well -known patient simulator that simulated CGM data using a type 1 diabetes (T1D) adult \npatient model [16,17] . Since this study was done without human data, it did not require institutional review board \napproval.  \n \nCGM Cases \nWe used the T1D patient simulator to create 10 different cases of 14 days of CGM data for analysis with varying \nlevels of glycemic control. The glycemic control of the cases ranged from a Glucose Management Indicator (GMI) \nof 6.0% to a GMI of 9.0%. Appendix I details the CGM data generati on and summarizing statistics for the 10 \ncases. We applied a minimal amount of pre-processing of the data to simplify the analysis steps that GPT-4 had \nto do. We converted the data for each case into a comma -separated values (CSV) file with columns for CGM  \nvalue, time of day, the day of the week, and the datetime structure with the time and day together. All CGM \nvalues were rounded to the nearest 5-minute interval. \n \n \n \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nPrompt Design \nThe prompts were designed to elicit responses for specific tasks outlined in Box 1. These tasks were created \nusing guidelines and recommendations from the American Diabetes Association (ADA) “Standards of Care in \nDiabetes” and a practical guide for interpretation of the AGP [18,19]. In the first part, the prompt was designed \nto elicit standardized CGM metrics for clinical care, selected from an international consensus group on metrics \nfor consideration in clinical interpretation and care [20].  The second part was designed to elicit qualitative \nsummaries of the data in the AGP report. To design the prompt, we leveraged the practical guide presented in \nCzupryniak et al. on interpreting the basic elements of an AGP report  [19]. Since clinical interpretation of AGPs \nis personalized to individual targets, we focused the tasks on data descriptions in four main categories: data \nquality, hyperglycemia, hypoglycemia, and glycemic variability. We included an additional task asking GPT-4 to \nassess the main clinical takeaway. Box 1 gives an overview of the prompts used to elicit responses for both \ntasks, and a subtask breakdown for the second part. The full prompts used are detailed in Appendix II. \n \nTo elicit responses, we access GPT -4 using OpenAI’s ChatGPT Plus interface with the Data Analyst plugin \n[14,15]. We used the CSV uploader feature to upload a CSV file of the preprocessed data along with the prompts. \nFor part 1, the metric generation prompts were given as a single prompt. For part 2, the summarization tasks \nwere prompted individually on a single thread. The prompting is detailed in Appendix II. \n \n \nBox 1: Overview of tasks \n \nEvaluation of Metric Generation Tasks \nWe evaluated the metric generation tasks by comparing the numerical output of GPT-4 to the ground truth metric. \nTo obtain ground truth values for all 10 tasks, we analyzed the CGM data in Python.  \n  \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \nFigure 1: Study design.  The set up above shows the evaluation procedure for a single case \n \n \nEvaluation of AGP Summarization Qualitative Evaluation  \nWe evaluated the AGP summarization tasks of GPT-4 using two clinicians who independently graded the output.  \nFor each of the 10 CGM cases, we generated an AGP using an R package [21,22]. The AGP reports are shown \nin Appendix III. These served as the ground truth for clinicians to view the CGM data when evaluating the output \nof GPT-4. In the experimental setup, each clinician was asked to first view the AGP of a case and write their own \nnotes of how they would describe the overall glucose control. Then, each clinician viewed the responses to each \npart of the GPT-4 output and were asked questions related to accuracy, completeness, and safety of relevant \ninformation. They were additionally asked questions to assess the suitability of the statements. See Figure 1 for \nan overview of the study and Table 1 for the complete question list and how scores were determined. For each \ncase, the AGP summarization tasks were scored in each evaluation category using the scoring detailed in Table \n1. The final results were evaluated by totaling the scores across each case for each category and task. We \nassessed the agreement between the two raters using Gwet’s AC1 for each category using an R package \n[23,24]. \n \nCategory Criteria Scoring \nAccuracy Is this every part of the statement true based on what you see in the AGP? (YES/ NO) Yes: 1   No: 0 \nCompleteness Is anything crucial missing from the output that you would consider in your analysis \nabout in this category? (YES/ NO) \nYes: 0   No: 1 \nSafety  Does this statement explicitly or implicitly put the patient at risk? (YES/NO) Yes: 0   No: 1 \nPatient Suitability Is this information something you would communicate to the patient?  (YES/ NO) Yes: 1   No: 0 \nClinician Suitability  Is this information helpful for you in analyzing the AGP? (YES/ NO) Yes: 1   No: 0 \nTable 1: Clinician Grading Rubric \nResults: \nMetric Generation Task Evaluation \nGPT-4 performed nine out of the ten metric computation tasks listed in Box 1 with perfect accuracy. For four \ndifferent cases, GPT-4 incorrectly computed the percent time above target glucose range in level 1 (>180 mg/dL) \n(TAR1). On inspection, the cause of this error in all four cases was that GPT -4 computed the percentage time \nspent above 180 mg/dL, excluding the time spent above target glucose range in level 2 (>250 mg/dL) (TAR2). \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nAppendix IV includes a table with the full results. Despite the fact that the prompt was the same for all 10 cases, \nthe code written to compute the metrics varied. The code written by GPT -4 for each case is given in Appendix \nVI.  \n \n \nFigure 2: Radar plot of average scores across graders and cases for each task for each evaluation category \n \nAGP Summary Task Evaluation  \nFigure 2 shows the radar plot of the average scores for each category by task. GPT -4 scored well in accuracy \nacross all 10 cases and tasks. Table 2 gives a breakdown of the error type, count, and an example of the error \nmade. On inspection, in many of the cases the cause of the error was GPT-4 misinterpreting the analysis to be \nperformed. Other errors were caused by GPT -4 suggesting the wrong clinical conclusions, often by adding \nadjectives to suggest a degree of severity that was graded as incorrect. In one identified instance, GPT-4 came \nto the wrong conclusion by writing incorrect code. In this particular case, GPT-4 wrote code that was supposed \nto identify instances of prolonged hyperglycemia, but instead incorrectly classified periods in euglycemic rang e \nas prolonged hyperglycemia. Appendix V gives the breakdown of total scores for each case by case GMI; notably \naccuracy was higher for cases with higher GMIs.  \n \nAccuracy Error Examples Safety Error Examples \nError type and \ncount Example  \nError type and \ncount Example  \nError in code (1)   \n  \nGPT-4 stated severe hyperglycemia occurred at a \ntime when it did not, due to an error in the code.  \nImplies glucose \ncontrol is stable (1) \nWhen providing a summary of glycemic variability, \nGPT-4 described glucose control as “relatively \nstable”, but missed that this was in persistently \nhyperglycemic range. \nMisinterpretation of \ncode to compute (3) \nGPT-4 computed average blood glucose across a \ntime window to identify a trend, instead of looking at \nthe time window where the average BG is maximal.  \nOverstates \nhyperglycemia (2) \nFor a patient with good control, GPT -4 states that \nhyperglycemia is a concern, which could cause a \npatient to overcorrect into hypoglycemia.  \nSuggests wrong \nclinical conclusion \n(3)  \nGPT-4 describes hyperglycemia as being a “notable \nconcern” despite the fact that BG levels were only \ngreater than 180 mg/dL three days for a brief period.  \n \nTable 2: Reasons and examples of GPT-4 statements found to be not accurate (left) and not safe (right)  \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \nThe average scores across tasks for completeness were similar to accuracy, ranging from an average of 7.5/10 \nfor the main takeaway to 10/10 for the data quality. Primary causes of low scoring for this section were not picking \nup a specific trend or an inst ance that the clinician would have identified. For the main clinical takeaway task, \nnotable errors were in not mentioning instances of hypoglycemia and not emphasizing nocturnal events. The \nscores for the safety evaluation were generally positive, with three instances of safety concerns being identified \nacross two main error types, as listed in Table 2. The full breakdown of error types and rater agreeability for \naccuracy, completeness, and safety is given in Appendix V. \n \nThe scores for patient suitability and clinician suitability were variable among raters. The Gwet’s AC1 score for \nthese categories were .65 and .43, respectively, suggesting higher discordance between how each clinician \nregarded whether the GPT -4 output wa s useful information to communicate to the patient or for their own \nanalysis. This was partly because output of GPT -4 for each task was extensive, which introduced more \nsubjectivity into grading especially when some sentences were helpful and others were n ot. Major reasons for \nlow scoring for both suitability questions were due to glycemic variability not being relevant in certain cases, \nGPT-4 not highlighting the same episode that the clinician would, and GPT-4 coming to a clinical conclusion that \nthe clinician disagreed with. The full output from GPT-4 for each case is in Appendix VI. \nDiscussion: \nThis work evaluated the potential of LLMs to be integrated into diabetes care through automated CGM data \nsummaries. Through this case study, we have highlighted both the potential benefits of this technology and the \ncurrent limitations, and we suggest priorities for future research in this area.  \n \nUnsurprisingly, GPT-4 performed well with the metric computation tasks in part 1. When given a clear data \nanalysis task, GPT-4 was able to load the CGM data and compute the appropriate metric in most cases. In part \n2, for the open-ended data analysis prompts, GPT-4 occasionally wrote code that was in misinterpretation of a \ndefined task. In one identified instance in the study, GPT -4 wrote code that when executed, did not compute \nwhat was intended and therefore produced an inaccurate result. It should be not ed that this was the only \nidentified error in the code construction, and it is possible that other errors were made that were not identified. \nThis is an issue that could potentially be addressed with enhanced prompt engineering, or through clearer \ninstructions on how to write code for a specific task. Another major limitation is that the code written for each \ncase had significant variability. The code written for the same prompt was different each case, and though it \noften performed the same computations, t he high degree of variability is a notable limitation of the current \ntechnology. Lastly, there were periods of missingness in some of the cases that occurred during periods of \nprolonged hyperglycemia. Notably, GPT-4 did not have a method of data imputation and did not have a means \nto infer that the missing block of data was likely all in the hyperglycemic range, as a clinician looking at the data \nwould.  \n \nGPT-4 was able to perform useful data analysis on CGM data and integrate information about guidelines for \nAGP interpretation into the responses. The prompts were not designed to provide personalized \nrecommendations to patients, and so there was limited inf ormation included in the prompts about targets for \nglycemic control. Because of this, we found GPT -4 had several shortcomings when translating findings into \nclinical significance.  Most notably, it did not incorporate metrics such as GMI and TIR into the f inal main \ntakeaway, and in some cases suggested that a patient with overall excellent glycemic control should treat \nhyperglycemia more aggressively, despite having very few episodes of hyperglycemia. Additionally, in this case \nstudy, GPT-4 placed improper value on different levels of control. When analyzing hyperglycemia, GPT -4 did \nnot incorporate the value that clinical concern increases for glucose measurements above the 250 mg/dL \nthreshold compared to those above the 180 mg/dl threshold. Similarly, the values placed on hyperglycemia and \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nhypoglycemia were discordant with clinical values. GPT-4 frequently highlighted instances of mild hyperglycemia \nthat lacked clinical relevance and at times, it missed instances of brief nocturnal hypoglycemia, including \ninstances where overnight blood glucose approached the hypoglycemic threshold.  Nocturnal hypoglycemia is a \nsignificant health concern, and clinicians prioritize reviewing past instances with their patients when reviewing \nretrospective CGM data. Future work should investigate refined prompt design or reinforcement learning from \nhuman feedback to incorporate these values into the model.  \n \nThere were additional technical limitations of this study that we also want to highlight. The data used for each \ncase was simulated data that was created using a patient simulator with different meal and bolus patterns. \nHowever, many realistic scenarios we re not simulated in the data. Notably, there were no scenarios in which \npatients experienced hypoglycemia and consumed rescue carbohydrates as treatment. Additionally, technical \nartifacts such as compression-induced hypoglycemia, extended periods of missingness, and varying calibration \naccuracy throughout a sensor’s lifecycle were not modeled in the simulated data. Future work should investigate \nperformance on more complex cases.  \n \nThis work demonstrates the potential for using LLMs in diabetes care to streamline CGM analysis. This \ntechnology could be particularly helpful in busy endocrine practices as a first pass at distilling large amounts of \nCGM data. The clinician could then confirm the output and build upon it to guide discussions with patients and \nsubsequent recommendations. This technology also has the potential to be useful to primary care providers, \nwho may have less formal training and experience with CGM and AGPs but still may be tasked with interpretation \nand summarization of the data for their patients. Although LLMs are not yet at the level of performance to be \nable to substitute for clinician input, this work demonstrates the potential of using LLMs to interpret large amounts \nof medical time series data.  \nFunding: This work was supported by the National Science Foundation Graduate Research Fellowship Program \nunder grant number 2141064. KLF is supported by the National Institute of Diabetes and Digestive and Kidney \nDiseases (NIDDK grant T32DK007028). \nCompeting Interests: E.H. is supported by the National Science Foundation Graduate Research Fellowship \nProgram. J.R. is a Fellow in the Pediatric Scientist Development Program supported by the Cystic Fibrosis \nFoundation. All other authors report no conflicts of interests. \nReferences \n1.  Cappon G, Vettoretti M, Sparacino G, Facchinetti A. Continuous Glucose Monitoring Sensors for Diabetes \nManagement: A Review of Technologies and Applications. Diabetes Metab J. 2019;43: 383–397. \n2.  Hughes MS, Addala A, Buckingham B. Digital Technology for Diabetes. N Engl J Med. 2023;389: 2076–\n2086. \n3.  International Diabetes Center. Ambulatory Glucose Profile: AGP reports. Available from: \nhttp://www.agpreport.org/agp/agpreports. \n4.  Mackett K, Gerstein H, Santesso N. Patient Perspectives on the Ambulatory Glucose Profile Report for \nType 1 Diabetes Management in Adults: A National Online Survey. Can J Diabetes. 2023;47: 243–249.e2. \n5.  Nimri R, Dassau E, Segall T, Muller I, Bratina N, Kordonouri O, et al. Adjusting insulin doses in patients \nwith type 1 diabetes who use insulin pump and continuous glucose monitoring: Variations among \ncountries and physicians. Diabetes Obes Metab. 2018;20: 2458–2466. \n6.  Chen S, Guevara M, Moningi S, Hoebers F, Elhalawani H, Kann BH, et al. The impact of responding to \npatient messages with large language model assistance. arXiv e-prints. 2023; arXiv:2310.17703. \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n7.  Kanjee Z, Crowe B, Rodman A. Accuracy of a Generative Artificial Intelligence Model in a Complex \nDiagnostic Challenge. JAMA. 2023;330: 78–80. \n8.  Singhal K, Tu T, Gottweis J, Sayres R, Wulczyn E, Hou L, et al. Towards Expert-Level Medical Question \nAnswering with Large Language Models. arXiv [cs.CL]. 2023. Available: http://arxiv.org/abs/2305.09617 \n9.  Elias ML, Burshtein J, Sharon VR. OpenAI’s GPT-4 performs to a high degree on board-style dermatology \nquestions. Int J Dermatol. 2024;63: 73–78. \n10.  Sheng B, Guan Z, Lim L-L, Jiang Z, Mathioudakis N, Li J, et al. Large language models for diabetes care: \nPotentials and prospects. Sci Bull (Beijing). 2024;69: 583–588. \n11.  Nayak A, Vakili S, Nayak K, Nikolov M, Chiu M, Sosseinheimer P, et al. Use of Voice-Based \nConversational Artificial Intelligence for Basal Insulin Prescription Management Among Patients With Type \n2 Diabetes: A Randomized Clinical Trial. JAMA Network Open. 2023;6: e2340232–e2340232. \n12.  Martinez-Cruz C, Guerrero JFG, Ruiz JLL, Rueda AJ, Espinilla M. A First Approach to the Generation of \nLinguistic Summaries from Glucose Sensors Using GPT-4. Proceedings of the 15th International \nConference on Ubiquitous Computing & Ambient Intelligence (UCAmI 2023). Springer Nature Switzerland; \n2023. pp. 33–43. \n13.  Sng GGR, Tung JYM, Lim DYZ, Bee YM. Potential and Pitfalls of ChatGPT and Natural-Language \nArtificial Intelligence Models for Diabetes Education. Diabetes Care. 2023;46: e103–e105. \n14.  OpenAI, Achiam J, Adler S, Agarwal S, Ahmad L, Akkaya I, et al. GPT-4 Technical Report. arXiv [cs.CL]. \n2023. Available: http://arxiv.org/abs/2303.08774 \n15.  OpenAI. Data Analyst by ChatGPT. 2024. https://chat.openai.com/g/g-HMNcP6w7d-data-analyst \n(accessed  Feb 5, 2024).  \n16.  Jinyu Xie. Simglucose v0.2.1 (2018) [Online]. Available: https://github.com/jxx123/simglucose. Accessed \non: 11-09-2023. \n17.  Man CD, Micheletto F, Lv D, Breton M, Kovatchev B, Cobelli C. The UVA/PADOVA Type 1 Diabetes \nSimulator: New Features. J Diabetes Sci Technol. 2014;8: 26–34. \n18.  ElSayed NA, Aleppo G, Aroda VR, Bannuru RR, Brown FM, Bruemmer D, et al. 6. Glycemic Targets: \nStandards of Care in Diabetes—2023. Diabetes Care. 2022;46: S97–S110. \n19.  Czupryniak L, Dzida G, Fichna P, Jarosz-Chobot P, Gumprecht J, Klupa T, et al. Ambulatory Glucose \nProfile (AGP) Report in Daily Care of Patients with Diabetes: Practical Tips and Recommendations. \nDiabetes Ther. 2022;13: 811–821. \n20.  Battelino T, Danne T, Bergenstal RM, Amiel SA, Beck R, Biester T, et al. Clinical Targets for Continuous \nGlucose Monitoring Data Interpretation: Recommendations From the International Consensus on Time in \nRange. Diabetes Care. 2019;42: 1593–1603. \n21.  Broll S, Urbanek J, Buchanan D, Chun E, Muschelli J, Punjabi N, Gaynanova I (2021). “Interpreting blood \nglucose data with R package iglu.” PloS One, 16(4), e0248560. doi:10.1371/journal.pone.0248560. \n22.  Chun E, Broll S, Buchanan D, Muschelli J, Fernandes N, Seo J, Shih J, Urbanek J, Schwenck J, \nGaynanova I (2023). iglu: Interpreting Glucose Data from Continuous Glucose Monitors. R package \nversion 3.5.0. \n23.  Gwet KL. Computing inter-rater reliability and its variance in the presence of high agreement. Br J Math \nStat Psychol. 2008;61: 29–48. \n24.   Gwet, K. L. irrCAC: Computing Chance-Corrected Agreement Coefficients (CAC), R Package version 1.0. \n(2019). \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nSupplemental Materials \nI. Data Generation \nThis simulator [16] is able to simulate Dexcom CGM signals sampled every five minutes. We created 10 different \n14 day scenarios using differing random carbohydrate intake and basal/bolus insulin regimens. The \ncharacteristics of the 10 cases are given in Table 1. The corresponding GMI values range from 6% to 9%. CGM \ndata missingness was generated randomly to make the data more realistic. \n \n \nMean and standard \ndeviation across cohort Minimum of cohort Maximum of cohort \nMean (mg/dL) 164.4 (40.85) 112.6 237.8 \nGMI (%) 7.2 (1.0) 6.0 9.0 \nCV (%) 0.3 (0.1) 0.2 0.4 \nMinimum (mg/dL) 55.3 (9.0) 39.0 70.0 \nMaximum (mg/dL) 337.1 (85.3) 208.0 400.0 \nPercent time active (%) 92.7 (4.5) 86.1 99.2 \nTime in range (%)  67.0 (27.2) 28.0 99.2 \n%TAR 1 (>180 mg/dL) 31.6 (0.274) 0.6 71.2 \n%TAR 2 (>250 mg/dL) 10.6 (0.13) 0.0 41.9 \n%TBR 1 (<70 mg/dL) 0.8 (1.0) 0.0 3.1 \n%TBR 2 (<54 mg/dL) 0.1 (0.2) 0.0 0.8 \nTable S1: Characteristics of 10 Cases \nGMI- Glucose Management Indicator; CV- coefficient of variation; TAR- Time above range; TBR- Time below range \n  \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nII. Full Prompts \nPrompt for Metric Computation Tasks: \n*** Upload CSV *** \n \nYou are an endocrinologist analyzing CGM data for a case with type 1 diabetes and on insulin therapy. \nNote that the  target glucose is between 70 mg/dL and 180 mg/dL, and severe hypoglycemia is defined as less than 54 mg/dL  \nand severe hyperglycemia is defined as greater than 250 mg/dL. \nUse the CGM data to answer the following questions: \n \nReport the following metrics:  \n1. Number of days the sensor is active \n2. % of sensor data captured \n3. Mean glucose concentration \n4. Glucose management indicator \n5. Glucose variability (coefficient of variation) \n6. % Time above target glucose range (TAR) in level 2 (>250) \n7. % Time above target glucose range (TAR) in level 1( >180) \n8. % Time in range (70-180 mg/dL) \n9. % Time below target glucose range (TBR) in level 1 (<70) \n10. % Time below target glucose range (TBR)  in level 2 (<54) \n \nProduce a list with these 10 values in it. \n  \n*** Record Output*** \nPrompts for AGP Summarization Tasks: \n \n*** Upload CSV *** \n \nYou are an endocrinologist analyzing CGM data for a case with type 1 diabetes and on insulin therapy. \nNote that the  target glucose is between 70mg/dL and 180 mg/dL, and severe hypoglycemia is defined as less than 54mg/dL  \nand severe hyperglycemia is defined as greater than 250 mg/dL. \nUse the CGM data to answer the following questions: \n \n1. (Quality of data)Assess the quality of this data noting the following factors. Is this data good quality? \n- The recommended period of analysis is 14 days, if the data has less than 14 unique days of data, recommend looking at the \ndata for more time.  \n- The recommended percentage of CGM activity time is greater than 70%. If there is less than 70% active time, note that the \nquality of this report might be impaired.  \n \nProduce an Output Summary: In a sentence, describe if this data is good quality and why \n \n*** Record Output*** \n \nData Analysis Instructions: \nThe following steps may be useful for hyperglycemia analysis: \n- Note that CGM is sampled every 5 minutes \n- Break the day up into 4-hour time windows to help the case identify daily patterns, and in the final answer convert the time \nwindows to general times of the day: “Late night”, “early morning”,  “morning”, “afternoon”, “evening”, “night”.  \n \na. (hyperglycemia) Analyze the data for hyperglycemia: \nConsider whether hyperglycemia appears to be an issue with this case. Severe hyperglycemia warrants particular concern. \nWhile there is no set target for time spent above 180%, guidance says target range should be above 70% and ideally greater.  \nIdentify whether or not there are notable:  \n 1. Interday trends: identity if certain days stood out as having very high levels of glucose, or a very high percentage of \nthe day spent above either hyperglycemic threshold. Mentioning the date will help the case identify if they did something then \nthat led to the hyperglycemia.  \n 2. Intraday trends: take the average glucose across the 24-hour day and identify the maximum glucose in that time \nwindow and if its hyperglycemia, make note of the trend \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n 3. Prolonged hyperglycemia: Are there prolonged high-glucose events with periods of severe hyperglycemia  where \nglucose readings are over 250 for an hour or more (12 consecutive readings)? If so, give the days and times of day that these \noccurred. This will be helpful for the case in recalling behavioral patterns. \n \nNo need to print out tables \n \n*** Submit and Pause for Analysis *** \n \nProduce an Output Summary: Produce a 2-6 sentence summary of the hyperglycemia analysis with key takeaways with \ninterday trends, intraday trends, and prolonged hyperglycemia. If hyperglycemia does not seem to be a significant problem, the \nsummary can be short. Highlight examples from the data that may be useful to say to the case and draw attention to the dates \nand times of the prolonged hyperglycemia events if they exist.  \n \n*** Submit and Record Output*** \n \nb. (Hypoglycemia) Analyze the data for hypoglycemia:  \nAccording to guidelines, time spent below 70 should be under 1 hour a day, and time spent below 54 should be under 15 \nminutes a day.  \n1. Interday trends: identity if certain days stood out as having very low levels of glucose (below 70mg/dL), or a very high \npercentage of the day spent below either hypoglycemic threshold. Mentioning the date will help the case identify if they did \nsomething then that led to the hypoglycemia.  \n2.  Intraday trends: Does hypoglycemia tend to occur at certain times of the day for this case? \n3.  Prolonged hypoglycemia: Are there prolonged periods of hypoglycemia where glucose stays below 70 for more than 60 \nminutes, or below 54 for more than 15 minutes? What day and time did these occur?  \n \n*** Submit and Pause for Analysis *** \nProduce an Output Summary: Produce a 2-6 sentence summary of the hypoglycemia analysis with key takeaways with \ninterday trends, intraday trends, and prolonged hypoglycemia. If hypoglycemia does not seem to be a significant problem, the \nsummary can be short. Highlight examples from the data that may be useful to say to the case and draw attention to the dates \nand times of the prolonged events if they exist.  \n \n*** Submit and Record Output*** \n \nc. (Glycemic variability) Analyze glycemic variability in the dataset by looking at the coefficient of variation and the daily \ninterquartile range.  \nAccording to guidelines, the goal is to have the coefficient of variation less than 36% \n1. Did any days stand out with a high coefficient of variation?  \n2. Look at the interquartile range over a 24-hour period. Are there certain times of the day where the interquartile range is \nlarger? \n \n*** Submit and Pause for Analysis *** \n \nProduce an Output Summary: Produce a 2-6 sentence summary of the glycemic variability analysis with key takeaways with \ndays with high variation and times of day where IQR is highest. \n \n***Submit and Record Output*** \n \nBased on the analysis and guidelines, in a few sentences what is the primary clinical concern, if any? \n \n*** Submit and Record Output*** \n \n \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nIII. Ambulatory Glucose Profiles \n \n \n \nCase 1:  Case 6: \n  \nCase 2:  Case 7:  \n \n \nCase 3: Case 8:  \n  \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nCase 4:  Case 9: \n  \nCase 5: Case 10:  \n \n \nFigure S2: Ambulatory Glucose Profiles of the 10 Cases \n  \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nIV.  Metric Computation Task Results \nTable S3 shows the accuracy of the model for each of the 10 different tasks across the 10 different cases. The \nmodel performs nine out of the ten tasks with perfect accuracy. For four different cases, the GPT -4 incorrectly \ncomputes TAR1. On inspection, the cause of this error in all four cases was GPT -4 computing the percentage \ntime spent above 180 mg/dL, excluding the time spent in TAR2. See appendix IV for the code that was generated \non each iteration.  \n \nMetric Accuracy Reason for error \n# of days 100%  \n% days active 100%  \nMean 100%  \nGMI 100%  \nCV 100%  \nTime in Range 100%  \nTAR1 (>180 \nmg/dL) \n60% GPT-4 computed percentage spent above 180 mg/dL and below or equal to 250 mg/dL, \ninstead of showing the percentage spent above 180 mg/dL. \nTAR2 (>250 \nmg/dL) \n100%  \nTBR1 (<70 \nmg/dL) \n100%  \nTBR2 (<54 \nmg/dL) \n100%  \nTable S3: Quantitative Results Performance \nGMI- Glucose Management Indicator; CV- coefficient of variation; TAR- Time above range; TBR- Time below range \n \nV. AGP Summarization Task  Results \n \nFigure S4: Aggregate scores by category and task \n \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \nFigure S5: Scores per case and grader by Glucose Management Indicator (GMI) across all 5 categories \n \n  Accuracy \nAverage Score and Error Type Breakdown  \nCompleteness \nAverage Score and Error Type Breakdown  \nSafety \nAverage Score and Error Type Breakdown \nData Quality: 9.5 - Misinterpretation of code to compute  10  10   \nHyperglycemia 8 - Misinterpretation of code to compute  \n- Suggest wrong clinical conclusion (2)  \n- Error in code \n8.5 - Does not identify hyperglycemia trend  \n- No comment on episode of severe \nhyperglycemia(2) \n9.5 - Overstates hyperglycemia \nHypoglycemia 10  9 - Does not specify date episode of \nprolonged hypoglycemia started  \n- Does not mention instances of \nhypoglycemia  \n10   \nGlycemic \nVariability \n10  9.5 - Does not specify date of high CV  \n  \n9.5 - Implies glucose control is stable  \nMain takeaway 9 - Misinterpretation of code to compute  \n- Suggests wrong clinical conclusion \n7.5 - Fails to mention pattern of \nhypoglycemia  \n- No comment on episode of prolonged \nhypoglycemia (2) \n- Fails to highlight nocturnal \nhyperglycemia  \n- Fails to comment on nocturnal \nhypoglycemia  \n9.5 - Overstates hyperglycemia  \nRater \nAgreeability  \n0.84 0.83 .94 \nTable S6: Error breakdown for Accuracy, Completeness, and Safety with rater agreeability given by Gwet’s AC1 score.  \n \n \n \n \n \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nVI.  GPT-4 Output  \nMetric Generation Task Prompt Output \n \nCase GPT-4 Output \nCase 1   \nTo analyze the Continuous Glucose Monitoring (CGM) data for the case with type 1 diabetes, I'll start by examining the content \nof the uploaded file to understand its format and the data it contains. This will allow me to calculate the requested metrics  \naccurately. Let's proceed with loading and reviewing the data. \n \nThe CGM data includes columns for glucose readings (CGM), time of the reading (time and Time), and the day of the week \n(weekday). To calculate the requested metrics, I'll use the CGM and Time columns, where Time appears to combine the date \nand time of each reading. \n \nLet's proceed with the calculations for: \n \nNumber of days the sensor is active \n% of sensor data captured \nMean glucose concentration \nGlucose management indicator (GMI) \nGlucose variability (coefficient of variation, CV) \n% Time above target glucose range (TAR) in level 2 (>250 mg/dL)  \n% Time above target glucose range (TAR) in level 1 (>180 mg/dL)  \n% Time in range (70-180 mg/dL) \n% Time below target glucose range (TBR) in level 1 (<70 mg/dL)  \n% Time below target glucose range (TBR) in level 2 (<54 mg/dL)  \nI'll start by preparing and analyzing the data to compute these metrics.  \n \nThe analysis of the CGM data for the case with type 1 diabetes has yielded the following metrics:  \n \nNumber of days the sensor is active: 14 days \n% of sensor data captured: 88.54% \nMean glucose concentration: 128.56 mg/dL \nGlucose management indicator: 6.39 \nGlucose variability (coefficient of variation): 24.11%  \n% Time above target glucose range (TAR) in level 2 (>250 mg/dL): 0.0%  \n% Time above target glucose range (TAR) in level 1 (>180 mg/dL, exclusive of >250): 4.71%  \n% Time in range (70-180 mg/dL): 95.01% \n% Time below target glucose range (TBR) in level 1 (<70 mg/dL): 0.28%  \n% Time below target glucose range (TBR) in level 2 (<54 mg/dL): 0.0%  \nThese metrics provide a comprehensive view of the glucose management for this case, indicating good time in range and low \noccurrences of hypoglycemia and hyperglycemia.  \nCase 2  To provide you with the requested metrics from the CGM (Continuous Glucose Monitoring) data, I'll first need to examine the \ncontents of the file you uploaded. I will start by loading and reviewing the data to understand its structure. This will allo w me to \naccurately calculate the metrics you've requested. Let's begin by loading the file and taking a quick look at its contents.  \n \nThe CGM data includes several columns: an unnamed column which appears to be an index, glucose concentration (CGM), time \nof the day, weekday, and a timestamp combining date and time. To calculate the requested metrics, I'll primarily focus on the  \nCGM values and the timestamp to determine the duration of sensor activity, calculate the mean glucose concentration, and \nassess glucose management indicators and time in various glucose ranges.  \n \nLet's proceed with the calculations for each of the requested metrics.  \n \nHere are the calculated metrics based on the CGM data provided:  \n \nNumber of days the sensor is active: 14 days \n% of sensor data captured: 88.81% \nMean glucose concentration: 183.26 mg/dL \nGlucose management indicator (GMI): 7.69 \nGlucose variability (coefficient of variation): 29.22%  \n% Time above target glucose range (TAR) in level 2 (>250 mg/dL): 10.47%  \n% Time above target glucose range (TAR) in level 1 (>180 mg/dL): 48.81% (This includes time above 250 mg/dL)  \n% Time in range (70-180 mg/dL): 50.80% \n% Time below target glucose range (TBR) in level 1 (<70 mg/dL): 0.39%  \n% Time below target glucose range (TBR) in level 2 (<54 mg/dL): 0.00%  \nThese metrics provide a comprehensive overview of the glucose management status for the case, indicating areas where \nmanagement strategies could potentially be optimized.  \n \nCase 3  To provide you with the requested metrics, I will first analyze the uploaded CGM (Continuous Glucose Monitoring) data file. I'll \nstart by loading the data to understand its structure, which will allow us to calculate the metrics accurately. Let's proceed  with \nloading and reviewing the data. \n \nThe CGM data consists of columns indicating glucose measurements (CGM), the time of measurement, the day of the week, \nand a combined date-time format. With this structure in mind, I'll proceed to calculate the requested metrics. Let's start by \ncomputing each of the metrics step by step.  \n \nBased on the analysis of the CGM data, here are the calculated metrics:  \n \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nNumber of days the sensor is active: 14 days \n% of sensor data captured: 86.06% \nMean glucose concentration: 171.67 mg/dL \nGlucose Management Indicator (GMI): 7.42% \nGlucose variability (coefficient of variation): 37.59% \n% Time above target glucose range (TAR) in level 2 (>250 mg/dL): 8.62%  \n% Time above target glucose range (TAR) in level 1 (>180 mg/dL): 25.50%  \n% Time in range (70-180 mg/dL): 65.76% \n% Time below target glucose range (TBR) in level 1 (<70 mg/dL): 0.12%  \n% Time below target glucose range (TBR) in level 2 (<54 mg/dL): 0.00%  \nThese metrics provide a comprehensive view of the case's glucose levels over the period the sensor was active, including time s \nof hyperglycemia, hypoglycemia, and periods within the target range.  \nCase 4  To proceed with the analysis of the CGM (Continuous Glucose Monitoring) data and answer your questions, I'll first need to lo ad \nand examine the content of the uploaded file. This will involve checking the structure of the data, including the date range, \nfrequency of glucose measurements, and the glucose values themselves. Let's start by loading the data from the uploaded file \nand take a quick look at its structure. \n \nThe CGM data consists of several columns, including an unnamed index column, CGM glucose values, time of the \nmeasurement, the day of the week, and a combined date and time column labeled \"Time\". To answer your questions, we'll focus \nprimarily on the \"CGM\" values and the \"Time\" column to calculate the metrics you've requested.  \n \nLet's proceed with the analysis to report the requested metrics:  \n \nNumber of days the sensor is active \n% of sensor data captured \nMean glucose concentration \nGlucose management indicator (GMI) \nGlucose variability (coefficient of variation) \n% Time above target glucose range (TAR) in level 2 (>250)  \n% Time above target glucose range (TAR) in level 1 (>180)  \n% Time in range (70-180mg/dL) \n% Time below target glucose range (TBR) in level 1 (<70)  \n% Time below target glucose range (TBR) in level 2 (<54)  \nFirst, we need to preprocess the data, especially the \"Time\" column, to extract the dates and calculate the number of active \nsensor days and other time-based metrics. Let's start with these calculations.  \n \nBased on the analysis of the CGM data, here are the metrics you requested:  \n \nNumber of days the sensor is active: 14 days \n% of sensor data captured: 90.33% \nMean glucose concentration: 204.30 mg/dL \nGlucose management indicator (GMI): 8.20 \nGlucose variability (coefficient of variation): 26.82%  \n% Time above target glucose range (TAR) in level 2 (>250 mg/dL): 18.29%  \n% Time above target glucose range (TAR) in level 1 (>180 mg/dL, excluding >250): 49.15%  \n% Time in range (70-180 mg/dL): 32.43% \n% Time below target glucose range (TBR) in level 1 (<70 mg/dL): 0.14%  \n% Time below target glucose range (TBR) in level 2 (<54 mg/dL): 0.00%  \nThese metrics provide a comprehensive overview of the glucose management for this case, indicating areas where adjustments \nmight be necessary to improve time in range and reduce high glucose levels.  \n \nCase 5 The data consists of columns for an unnamed identifier, Continuous Glucose Monitoring (CGM) values, time, weekday, and a \ndatetime stamp. I'll use this information to calculate the requested metrics.  \n \nNumber of days the sensor is active: This can be determined by the range of dates in the \"Time\" column.  \n% of sensor data captured: Assuming the sensor should capture data every 5 minutes, I can calculate this based on the total \nentries vs. the expected number of entries. \nMean glucose concentration: The average of the \"CGM\" values.  \nGlucose management indicator (GMI): Calculated using the formula  \nGMI=3.31+0.02392×mean glucose mg/dL. \nGlucose variability (coefficient of variation): Standard deviation of \"CGM\" values divided by the mean, multiplied by 100.  \n% Time above target glucose range (TAR) in level 2 (>250).  \n% Time above target glucose range (TAR) in level 1 (>180).  \n% Time in range (70-180 mg/dL). \n% Time below target glucose range (TBR) in level 1 (<70).  \n% Time below target glucose range (TBR) in level 2 (<54).  \nLet's proceed to calculate these metrics.  \n \nThe analysis of the CGM data yields the following metrics:  \n \nNumber of days the sensor is active: 14 days \n% of sensor data captured: 97.67% \nMean glucose concentration: 121.24 mg/dL \nGlucose management indicator (GMI): 6.21 \nGlucose variability (coefficient of variation): 18.12%  \n% Time above target glucose range (TAR) in level 2 (>250): 0.0%  \n% Time above target glucose range (TAR) in level 1 (>180) (exclusive): 0.63%  \n% Time in range (70-180mg/dL): 99.37% \n% Time below target glucose range (TBR) in level 1 (<70): 0.0%  \n% Time below target glucose range (TBR) in level 2 (<54): 0.0%  \nThese values provide a comprehensive overview of the glucose management for this case over the analyzed period.  \n \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nCase 6  To accurately report the requested metrics from the provided Continuous Glucose Monitoring (CGM) data, I'll start by examinin g \nthe structure of the uploaded CSV file to understand its format, including how the glucose readings and timestamps are \nrecorded. This will enable me to calculate: \n \nThe number of days the sensor was active. \nThe percentage of sensor data captured (assuming we know the expected data capture rate).  \nThe mean glucose concentration. \nThe Glucose Management Indicator (GMI), which can be estimated from the mean glucose concentration.  \nThe glucose variability, as measured by the coefficient of variation.  \nThe percentage of time above the target glucose range (TAR) in level 2 (>250 mg/dL).  \nThe percentage of time above TAR in level 1 (>180 mg/dL).  \nThe percentage of time in range (TIR) (70-180 mg/dL). \nThe percentage of time below the target glucose range (TBR) in level 1 (<70 mg/dL).  \nThe percentage of time below TBR in level 2 (<54 mg/dL).  \nLet's start by loading and examining the content of the file to understand its structure.  \n \nThe CGM data file contains several columns, including:  \n \nUnnamed: 0: Appears to be an index column. \nCGM: Glucose concentration in mg/dL. \ntime: Time of day for the reading. \nweekday: Day of the week for the reading. \nTime: Date and time of the reading, combining date with the time column.  \nTo calculate the requested metrics, I'll primarily use the CGM and Time columns. The Time column will help in determining the  \nnumber of days the sensor was active and other time -related metrics. Let's proceed with calculating the requested metrics.  \n \nBased on the analysis of the Continuous Glucose Monitoring (CGM) data, here are the requested metrics:  \n \nNumber of days the sensor was active: 14 days  \nPercentage of sensor data captured: 92.41% \nMean glucose concentration: 195.55 mg/dL \nGlucose Management Indicator (GMI): 7.99 \nGlucose variability (coefficient of variation): 33.46%  \nPercentage of Time above target glucose range (TAR) in level 2 (>250 mg/dL): 19.78%  \nPercentage of Time above TAR in level 1 (>180 mg/dL, exclusive of >250 mg/dL): 34.49%  \nPercentage of Time in range (70-180 mg/dL): 45.20% \nPercentage of Time below target glucose range (TBR) in level 1 (<70 mg/dL): 0.54%  \nPercentage of Time below TBR in level 2 (<54 mg/dL): 0.00%  \nThese metrics provide a comprehensive overview of the case's glucose management over the 14 -day period.  \n \nCase 7  To provide the requested metrics from the Continuous Glucose Monitoring (CGM) data, I will start by loading and examining the \ncontents of the uploaded CSV file. This will allow me to understand the data structure and proceed with the analysis \naccordingly. Let's begin by loading the data. \n \nThe CGM data contains columns for an index (\"Unnamed: 0\"), glucose concentration (\"CGM\"), time of day (\"time\" and \"Time\"), \nand the day of the week (\"weekday\"). It appears that \"Time\" includes both the date and time, making it suitable for our analy sis. \n \nNext, I will calculate the requested metrics based on this data. These calculations will include:  \n \nNumber of days the sensor is active. \nPercentage of sensor data captured. \nMean glucose concentration. \nGlucose Management Indicator (GMI). \nGlucose variability (coefficient of variation). \nPercentage of time above target glucose range in level 2 (>250 mg/dL).  \nPercentage of time above target glucose range in level 1 (>180 mg/dL).  \nPercentage of time in range (70-180 mg/dL). \nPercentage of time below target glucose range in level 1 (<70 mg/dL).  \nPercentage of time below target glucose range in level 2 (<54 mg/dL).  \nLet's proceed with these calculations.  \n \nThe calculated metrics from the CGM data are as follows:  \n \nNumber of days the sensor is active: 14 days \nPercentage of sensor data captured: 95.49% \nMean glucose concentration: 237.82 mg/dL \nGlucose Management Indicator (GMI): 9.00 \nGlucose variability (coefficient of variation): 33.57%  \nPercentage of time above target glucose range (TAR) in level 2 (>250 mg/dL): 41.90%  \nPercentage of time above target glucose range (TAR) in level 1 (>180 mg/dL, excluding >250 mg/dL): 29.32%  \nPercentage of time in range (70-180 mg/dL): 28.44% \nPercentage of time below target glucose range (TBR) in level 1 (<70 mg/dL): 0.34%  \nPercentage of time below target glucose range (TBR) in level 2 (<54 mg/dL): 0.08%  \nThese metrics provide a comprehensive overview of the glucose control for the case, indicating a high mean glucose \nconcentration and significant time spent above the target glucose range.  \n \nCase 8  To provide you with the requested metrics based on the CGM (Continuous Glucose Monitoring) data, I'll first need to analyze t he \nuploaded file to understand its structure and contents. Let's start by loading and previewing the data from the CSV file you've \nprovided. This will help us determine how to proceed with calculating the specific metrics.  \n \nThe dataset contains columns for the CGM readings, time, weekday, and a combined date -time column labeled \"Time\". To \ncalculate the metrics you've requested, I'll use the \"CGM\" values and the \"Time\" column to understand the glucose concentrati on \nover time and assess the sensor's active period. \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \nLet's proceed with calculating the requested metrics:  \n \nNumber of days the sensor is active \n% of sensor data captured \nMean glucose concentration \nGlucose management indicator (GMI) \nGlucose variability (coefficient of variation) \n% Time above target glucose range (TAR) in level 2 (>250 mg/dL)  \n% Time above target glucose range (TAR) in level 1 (>180 mg/dL) \n% Time in range (70-180 mg/dL) \n% Time below target glucose range (TBR) in level 1 (<70 mg/dL)  \n% Time below target glucose range (TBR) in level 2 (<54 mg/dL)  \nI will start by preprocessing the data and then calculate each metric sequentially.  \n \nBased on the analysis of the CGM data provided, here are the calculated metrics:  \n \nNumber of days the sensor is active: 14 days \n% of sensor data captured: 91.54% \nMean glucose concentration: 112.59 mg/dL \nGlucose Management Indicator (GMI): 6.00 \nGlucose variability (coefficient of variation): 20.57% \n% Time above target glucose range (TAR) in level 2 (>250 mg/dL): 0.0%  \n% Time above target glucose range (TAR) in level 1 (>180 mg/dL): 0.92%  \n% Time in range (70-180 mg/dL): 97.78% \n% Time below target glucose range (TBR) in level 1 (<70 mg/dL): 1.30%  \n% Time below target glucose range (TBR) in level 2 (<54 mg/dL): 0.0%  \nThese metrics provide a comprehensive overview of the glucose levels and management for the case over the 14 -day period \nduring which the sensor was active.  \nCase 9  The CSV file contains continuous glucose monitoring (CGM) data with columns indicating the glucose measurement (CGM), \ntime of measurement, weekday, and a combined date and time column. To analyze this data according to the specified metrics, \nI'll proceed with the following steps: \n \nConvert the \"Time\" column to a datetime format to accurately calculate the number of days the sensor was active.  \nCalculate the total possible readings and compare it to the actual number of readings to determine the % of sensor data \ncaptured. \nCompute the mean glucose concentration. \nCalculate the Glucose Management Indicator (GMI) using the formula:  \n \nGMI=3.31+0.02392×mean glucose. \nCalculate the glucose variability as the coefficient of variation, which is the standard deviation divided by the mean glucos e \nconcentration. \nDetermine the % time in various glucose ranges to answer the remaining metrics (6 -10). \nLet's start with the first step.  \n \nBased on the analysis of the continuous glucose monitoring (CGM) data, the following metrics have been calculated:  \n \nNumber of days the sensor is active: 14 days \n% of sensor data captured: 99.16% \nMean glucose concentration: 148.84 mg/dL \nGlucose Management Indicator (GMI): 6.87 \nGlucose variability (coefficient of variation): 38.07%  \n% Time above target glucose range (TAR) in level 2 (>250 mg/dL): 6.05%  \n% Time above target glucose range (TAR) in level 1 (>180 mg/dL): 21.59%  \n% Time in range (70-180 mg/dL): 76.41% \n% Time below target glucose range (TBR) in level 1 (<70 mg/dL): 2.00%  \n% Time below target glucose range (TBR) in level 2 (<54 mg/dL): 0.25%  \nThese metrics provide a comprehensive overview of the case's glucose management over the analyzed period.  \nCase 10  To generate the requested metrics from the Continuous Glucose Monitoring (CGM) data for your analysis, I will first need to \nexamine the data provided in the file you uploaded. I'll start by loading and inspecting the data to understand its structure  and \ncontents. Let's proceed with that step. \n \nThe dataset consists of the following columns:  \n \nAn unnamed column that seems to be an index.  \nCGM: Glucose concentration in mg/dL. \ntime: Time of the day when the measurement was taken.  \nweekday: Day of the week. \nTime: The actual date and time when the measurement was taken.  \nTo proceed with the analysis, I will: \n \nParse the Time column to a datetime format to accurately calculate the number of days the sensor was active.  \nCalculate the metrics as requested. \nLet's begin with these steps.  \n \nThe analysis of the Continuous Glucose Monitoring (CGM) data for the case with type 1 diabetes yields the following metrics:  \n \nNumber of days the sensor is active: 14 days \n% of sensor data captured: 97.37% \nMean glucose concentration: 140.25 mg/dL \nGlucose management indicator (GMI): 6.66 \nGlucose variability (coefficient of variation): 27.13%  \n% Time above target glucose range (TAR) in level 2 (>250 mg/dL): 1.22%  \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n% Time above target glucose range (TAR) in level 1 (>180 mg/dL): 12.40% (includes time above 250 mg/dL)  \n% Time in range (70-180 mg/dL): 84.51% \n% Time below target glucose range (TBR) in level 1 (<70 mg/dL): 3.08%  \n% Time below target glucose range (TBR) in level 2 (<54 mg/dL): 0.76%  \nThese metrics provide valuable insights into the case's glucose control, indicating a good percentage of time spent within th e \ntarget range and relatively low percentages of severe hypoglycemia and hyperglycemia.  \n \nTable S7: GPT-4 Output for Quantitative Prompts  \n \n \nMetric Generation Task Code Written  \n \nCase Code Written \nCase 1 from datetime import datetime \n \n# Convert 'Time' column to datetime format \ncgm_data['Time'] = pd.to_datetime(cgm_data['Time'], format='%m/%d/%y %H:%M') \n \n# Calculate the number of days the sensor is active \nnum_days_active = (cgm_data['Time'].max() - cgm_data['Time'].min()).days + 1 \n \n# Assuming the sensor should capture data every 5 minutes, calculate the total expected readings \nexpected_readings_per_day = 24 * 60 / 5 \ntotal_expected_readings = expected_readings_per_day * num_days_active \n \n# Calculate % of sensor data captured \npercent_data_captured = (len(cgm_data) / total_expected_readings) * 100 \n \n# Mean glucose concentration \nmean_glucose = cgm_data['CGM'].mean() \n \n# Glucose Management Indicator (GMI) calculation \ngmi = 3.31 + (0.02392 * mean_glucose) \n \n# Glucose variability (Coefficient of Variation, CV) \nglucose_cv = (cgm_data['CGM'].std() / mean_glucose) * 100 \n \n# Calculate % Time in different glucose ranges \ntotal_measurements = len(cgm_data) \ntime_above_250 = (cgm_data['CGM'] > 250).sum() / total_measurements * 100 \ntime_above_180 = (cgm_data['CGM'] > 180).sum() / total_measurements * 100 \ntime_in_range = ((cgm_data['CGM'] >= 70) & (cgm_data['CGM'] <= 180)).sum() / total_measurements * 100 \ntime_below_70 = (cgm_data['CGM'] < 70).sum() / total_measurements * 100 \ntime_below_54 = (cgm_data['CGM'] < 54).sum() / total_measurements * 100 \n \n# Adjust % Time above TAR level 1 to exclude readings above 250 \ntime_above_180_exclusive = time_above_180 - time_above_250 \n \nmetrics = [ \n    num_days_active,  # Number of days the sensor is active \n    percent_data_captured,  # % of sensor data captured \n    mean_glucose,  # Mean glucose concentration \n    gmi,  # Glucose management indicator \n    glucose_cv,  # Glucose variability (CV) \n    time_above_250,  # % Time above TAR in level 2 \n    time_above_180_exclusive,  # % Time above TAR in level 1 (exclusive) \n    time_in_range,  # % Time in range \n    time_below_70,  # % Time below TBR in level 1 \n    time_below_54  # % Time below TBR in level 2 \n] \n \nMetrics \n \nCase 2 from datetime import datetime \n \n# Convert 'Time' column to datetime format to facilitate analysis \ncgm_data['Time'] = pd.to_datetime(cgm_data['Time'], format='%m/%d/%y %H:%M') \n \n# Calculate the number of days the sensor is active \nsensor_start_date = cgm_data['Time'].min().date() \nsensor_end_date = cgm_data['Time'].max().date() \nnum_days_active = (sensor_end_date - sensor_start_date).days + 1  # Including both start and end date \n \n# Calculate the total possible readings (assuming 5-minute intervals throughout the day) \ntotal_possible_readings = num_days_active * 24 * 60 / 5  # 288 readings per day \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \n# Calculate % of sensor data captured \npercent_data_captured = (len(cgm_data) / total_possible_readings) * 100 \n \n# Calculate mean glucose concentration \nmean_glucose = cgm_data['CGM'].mean() \n \n# Glucose management indicator (GMI) \ngmi = 3.31 + (0.02392 * mean_glucose) \n \n# Glucose variability (coefficient of variation) \ncoefficient_of_variation = cgm_data['CGM'].std() / mean_glucose * 100 \n \n# Calculate time above, in, and below range \ntime_above_250 = len(cgm_data[cgm_data['CGM'] > 250]) / len(cgm_data) * 100 \ntime_above_180 = len(cgm_data[(cgm_data['CGM'] > 180) & (cgm_data['CGM'] <= 250)]) / len(cgm_data) * 100 \ntime_in_range = len(cgm_data[(cgm_data['CGM'] >= 70) & (cgm_data['CGM'] <= 180)]) / len(cgm_data) * 100 \ntime_below_70 = len(cgm_data[cgm_data['CGM'] < 70]) / len(cgm_data) * 100 \ntime_below_54 = len(cgm_data[cgm_data['CGM'] < 54]) / len(cgm_data) * 100 \n \n# Compile metrics into a list \nmetrics = [ \n    num_days_active,  # Number of days the sensor is active \n    percent_data_captured,  # % of sensor data captured \n    mean_glucose,  # Mean glucose concentration \n    gmi,  # Glucose management indicator \n    coefficient_of_variation,  # Glucose variability (coefficient of variation) \n    time_above_250,  # % Time above TAR in level 2 (>250) \n    time_above_180 + time_above_250,  # % Time above TAR in level 1 (>180) including >250 \n    time_in_range,  # % Time in range (70-180mg/dL) \n    time_below_70,  # % Time below TBR in level 1 (<70) \n    time_below_54  # % Time below TBR in level 2 (<54) \n] \n \nMetrics \n \nCase 3 from datetime import datetime \n \n# Convert 'Time' column to datetime \ncgm_data['Datetime'] = pd.to_datetime(cgm_data['Time']) \n \n# Calculate the number of days the sensor is active \nnum_days_active = (cgm_data['Datetime'].max() - cgm_data['Datetime'].min()).days + 1 \n \n# Assuming the sensor captures data every 5 minutes, calculate the % of sensor data captured \nexpected_measurements_per_day = 24 * 60 / 5 \ntotal_expected_measurements = expected_measurements_per_day * num_days_active \npercent_data_captured = (len(cgm_data) / total_expected_measurements) * 100 \n \n# Calculate mean glucose concentration \nmean_glucose_concentration = cgm_data['CGM'].mean() \n \n# Glucose Management Indicator (GMI) calculation, assuming the formula: GMI (%) = (3.31 + 0.02392 * Mean Glucose in mg/dL) \ngmi = 3.31 + 0.02392 * mean_glucose_concentration \n \n# Glucose variability (coefficient of variation) is the standard deviation divided by the mean \nglucose_variability = cgm_data['CGM'].std() / mean_glucose_concentration \n \n# Calculate % Time in different glucose ranges \ntime_above_250 = len(cgm_data[cgm_data['CGM'] > 250]) / len(cgm_data) * 100 \ntime_above_180 = len(cgm_data[cgm_data['CGM'] > 180]) / len(cgm_data) * 100 - time_above_250 \ntime_in_range = len(cgm_data[(cgm_data['CGM'] >= 70) & (cgm_data['CGM'] <= 180)]) / len(cgm_data) * 100 \ntime_below_70 = len(cgm_data[cgm_data['CGM'] < 70]) / len(cgm_data) * 100 \ntime_below_54 = len(cgm_data[cgm_data['CGM'] < 54]) / len(cgm_data) * 100 \ntime_below_70 -= time_below_54 \n \nmetrics = [ \n    num_days_active, \n    percent_data_captured, \n    mean_glucose_concentration, \n    gmi, \n    glucose_variability, \n    time_above_250, \n    time_above_180, \n    time_in_range, \n    time_below_70, \n    time_below_54 \n] \n \nMetrics \n \n \nCase 4 from datetime import datetime \n \n# Convert 'Time' column to datetime format \ncgm_data['Datetime'] = pd.to_datetime(cgm_data['Time'], format='%m/%d/%y %H:%M') \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \n# Determine the number of unique days the sensor was active \nnum_days_active = cgm_data['Datetime'].dt.date.nunique() \n \n# Calculate the total possible data points assuming a reading every 5 minutes over the number of days \ntotal_possible_readings = num_days_active * 24 * 60 / 5 \n \n# Calculate the actual number of readings captured \nactual_readings_captured = cgm_data.shape[0] \n \n# Calculate % of sensor data captured \npercent_data_captured = (actual_readings_captured / total_possible_readings) * 100 \n \n# Calculate mean glucose concentration \nmean_glucose = cgm_data['CGM'].mean() \n \n# Glucose management indicator (GMI) calculation, formula: GMI = 3.31 + (0.02392 × Mean glucose in mg/dL) \ngmi = 3.31 + (0.02392 * mean_glucose) \n \n# Calculate glucose variability (coefficient of variation), formula: CV = (Standard deviation / Mean) * 100 \ncv = (cgm_data['CGM'].std() / mean_glucose) * 100 \n \n# Calculate % time in various glucose ranges \ntotal_time_minutes = actual_readings_captured * 5  # Each reading represents 5 minutes \ntar_level_2 = cgm_data[cgm_data['CGM'] > 250].shape[0] * 5 / total_time_minutes * 100 \ntar_level_1 = cgm_data[cgm_data['CGM'] > 180].shape[0] * 5 / total_time_minutes * 100 \ntime_in_range = cgm_data[(cgm_data['CGM'] >= 70) & (cgm_data['CGM'] <= 180)].shape[0] * 5 / total_time_minutes * 100 \ntbr_level_1 = cgm_data[cgm_data['CGM'] < 70].shape[0] * 5 / total_time_minutes * 100 \ntbr_level_2 = cgm_data[cgm_data['CGM'] < 54].shape[0] * 5 / total_time_minutes * 100 \n \n# Adjust TAR level 1 to exclude TAR level 2 counts \ntar_level_1_adjusted = tar_level_1 - tar_level_2 \n \nmetrics_list = [num_days_active, percent_data_captured, mean_glucose, gmi, cv, tar_level_2, tar_level_1_adjusted, \ntime_in_range, tbr_level_1, tbr_level_2] \n \nmetrics_list \n \n \nCase 5 from datetime import datetime \n \n# Convert the 'Time' column to datetime format for easier manipulation \ndata['Time'] = pd.to_datetime(data['Time'], format='%m/%d/%y %H:%M') \n \n# 1. Number of days the sensor is active \nnum_days = (data['Time'].dt.date.max() - data['Time'].dt.date.min()).days + 1 \n \n# Assuming data should be captured every 5 minutes, calculate the total expected measurements \n# 288 measurements per day (24 hours * 60 minutes / 5 minutes) \nexpected_measurements_per_day = 288 \ntotal_expected_measurements = num_days * expected_measurements_per_day \n \n# 2. % of sensor data captured \npercent_data_captured = (len(data) / total_expected_measurements) * 100 \n \n# 3. Mean glucose concentration \nmean_glucose = data['CGM'].mean() \n \n# 4. Glucose management indicator (GMI) \nGMI = 3.31 + 0.02392 * mean_glucose \n \n# 5. Glucose variability (coefficient of variation) \nglucose_cv = (data['CGM'].std() / mean_glucose) * 100 \n \n# 6-10. Time in/out of range calculations \ntotal_time = len(data) \ntime_above_250 = (data['CGM'] > 250).sum() / total_time * 100 \ntime_above_180 = (data['CGM'] > 180).sum() / total_time * 100 \ntime_in_range = ((data['CGM'] >= 70) & (data['CGM'] <= 180)).sum() / total_time * 100 \ntime_below_70 = (data['CGM'] < 70).sum() / total_time * 100 \ntime_below_54 = (data['CGM'] < 54).sum() / total_time * 100 \n \n# Subtract the higher range from the total to get the exclusive percentages for TAR level 1 \ntime_above_180_exclusive = time_above_180 - time_above_250 \n \n# List of metrics \nmetrics = [ \n    num_days, \n    percent_data_captured, \n    mean_glucose, \n    GMI, \n    glucose_cv, \n    time_above_250, \n    time_above_180_exclusive, \n    time_in_range, \n    time_below_70, \n    time_below_54 \n] \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \nmetrics \n \nCase 6 from datetime import datetime \n \n# Convert 'Time' column to datetime format for easier manipulation \ncgm_data['Time'] = pd.to_datetime(cgm_data['Time'], format='%m/%d/%y %H:%M') \n \n# Calculate the number of days the sensor was active \nnum_days = (cgm_data['Time'].max() - cgm_data['Time'].min()).days + 1 \n \n# Assuming data capture every 5 minutes, calculate % of sensor data captured \nexpected_readings_per_day = 24 * 60 / 5 \ntotal_expected_readings = expected_readings_per_day * num_days \npercent_data_captured = (len(cgm_data) / total_expected_readings) * 100 \n \n# Calculate mean glucose concentration \nmean_glucose = cgm_data['CGM'].mean() \n \n# Calculate Glucose Management Indicator (GMI) \n# GMI formula: 3.31 + (0.02392 * Mean Glucose) \ngmi = 3.31 + (0.02392 * mean_glucose) \n \n# Calculate glucose variability (Coefficient of Variation) \ncv = cgm_data['CGM'].std() / mean_glucose \n \n# Calculate % Time in various glucose ranges \ntotal_time = len(cgm_data) \ntime_above_250 = (cgm_data['CGM'] > 250).sum() / total_time * 100 \ntime_above_180 = (cgm_data['CGM'] > 180).sum() / total_time * 100 \ntime_in_range = ((cgm_data['CGM'] >= 70) & (cgm_data['CGM'] <= 180)).sum() / total_time * 100 \ntime_below_70 = (cgm_data['CGM'] < 70).sum() / total_time * 100 \ntime_below_54 = (cgm_data['CGM'] < 54).sum() / total_time * 100 \n \n# Adjust time_above_180 to exclude time_above_250 \ntime_above_180_exclusive = time_above_180 - time_above_250 \n \n# Create a list with all the metrics \nmetrics = [ \n    num_days, percent_data_captured, mean_glucose, gmi, cv, \n    time_above_250, time_above_180_exclusive, time_in_range, \n    time_below_70, time_below_54 \n] \n \nMetrics \n \n \nCase 7 from datetime import datetime \n \n# Convert 'Time' to datetime format \ncgm_data['Time'] = pd.to_datetime(cgm_data['Time']) \n \n# Calculate the number of days the sensor is active \nnum_days = (cgm_data['Time'].max() - cgm_data['Time'].min()).days + 1 \n \n# Assuming the sensor captures data every 5 minutes, calculate total possible readings \nexpected_readings_per_day = 24 * 60 / 5 \ntotal_expected_readings = expected_readings_per_day * num_days \n \n# Calculate the percentage of sensor data captured \npercent_captured = (len(cgm_data) / total_expected_readings) * 100 \n \n# Calculate mean glucose concentration \nmean_glucose = cgm_data['CGM'].mean() \n \n# Calculate Glucose Management Indicator (GMI) \n# GMI formula: 3.31 + (0.02392 × mean glucose in mg/dL) \ngmi = 3.31 + (0.02392 * mean_glucose) \n \n# Calculate Glucose Variability (Coefficient of Variation) \ncv_glucose = cgm_data['CGM'].std() / mean_glucose \n \n# Calculate percentages for TAR, TIR, and TBR \ntar_level_2 = (cgm_data[cgm_data['CGM'] > 250].shape[0] / len(cgm_data)) * 100 \ntar_level_1 = (cgm_data[cgm_data['CGM'] > 180].shape[0] / len(cgm_data)) * 100 \ntir = (cgm_data[(cgm_data['CGM'] >= 70) & (cgm_data['CGM'] <= 180)].shape[0] / len(cgm_data)) * 100 \ntbr_level_1 = (cgm_data[cgm_data['CGM'] < 70].shape[0] / len(cgm_data)) * 100 \ntbr_level_2 = (cgm_data[cgm_data['CGM'] < 54].shape[0] / len(cgm_data)) * 100 \n \n# Adjust TAR Level 1 to exclude TAR Level 2 readings for accurate TAR Level 1 \ntar_level_1_adjusted = tar_level_1 - tar_level_2 \n \nmetrics = [ \n    num_days,  \n    percent_captured,  \n    mean_glucose,  \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n    gmi,  \n    cv_glucose,  \n    tar_level_2,  \n    tar_level_1_adjusted,  \n    tir,  \n    tbr_level_1,  \n    tbr_level_2 \n] \n \nMetrics \n \n \nCase 8 from datetime import datetime \n \n# Convert the 'Time' column to datetime format \ncgm_data['Time'] = pd.to_datetime(cgm_data['Time'], format='%m/%d/%y %H:%M') \n \n# Calculate the number of unique days the sensor is active \nnum_days = cgm_data['Time'].dt.date.nunique() \n \n# Assuming the sensor should record a reading every 5 minutes, calculate the % of sensor data captured \nexpected_readings_per_day = 24 * 60 / 5 \ntotal_expected_readings = expected_readings_per_day * num_days \npercent_captured = (len(cgm_data) / total_expected_readings) * 100 \n \n# Calculate the mean glucose concentration \nmean_glucose = cgm_data['CGM'].mean() \n \n# Calculate the Glucose Management Indicator (GMI) \n# GMI formula: 3.31 + (0.02392 × mean glucose in mg/dL) \ngmi = 3.31 + (0.02392 * mean_glucose) \n \n# Calculate the glucose variability (coefficient of variation) \ncv_glucose = (cgm_data['CGM'].std() / mean_glucose) * 100 \n \n# Calculate % times in various glucose ranges \ntotal_time = len(cgm_data) \ntime_above_250 = (cgm_data['CGM'] > 250).sum() / total_time * 100 \ntime_above_180 = (cgm_data['CGM'] > 180).sum() / total_time * 100 \ntime_in_range = ((cgm_data['CGM'] >= 70) & (cgm_data['CGM'] <= 180)).sum() / total_time * 100 \ntime_below_70 = (cgm_data['CGM'] < 70).sum() / total_time * 100 \ntime_below_54 = (cgm_data['CGM'] < 54).sum() / total_time * 100 \n \n# Adjust the % time above range level 1 to exclude time counted in level 2 \ntime_above_180_exclusive = time_above_180 - time_above_250 \n \nmetrics = [ \n    num_days,  # Number of days the sensor is active \n    percent_captured,  # % of sensor data captured \n    mean_glucose,  # Mean glucose concentration \n    gmi,  # Glucose management indicator \n    cv_glucose,  # Glucose variability (coefficient of variation) \n    time_above_250,  # % Time above TAR in level 2 (>250) \n    time_above_180_exclusive,  # % Time above TAR in level 1 (>180) exclusive \n    time_in_range,  # % Time in range (70-180mg/dL) \n    time_below_70,  # % Time below TBR in level 1 (<70) \n    time_below_54  # % Time below TBR in level 2 (<54) \n] \n \nmetrics \n \nCase 9 from datetime import datetime \n \n# Convert the \"Time\" column to datetime format \ncgm_data['Datetime'] = pd.to_datetime(cgm_data['Time'], format='%m/%d/%y %H:%M') \n \n# Calculate the number of days the sensor is active \nnum_days = (cgm_data['Datetime'].max() - cgm_data['Datetime'].min()).days + 1 \n \n# Calculate % of sensor data captured \n# Assuming the sensor records data every 5 minutes, there should be 288 readings per day \nexpected_readings_per_day = 288 \ntotal_expected_readings = num_days * expected_readings_per_day \npercent_captured = (len(cgm_data) / total_expected_readings) * 100 \n \n# Calculate mean glucose concentration \nmean_glucose = cgm_data['CGM'].mean() \n \n# Calculate Glucose Management Indicator (GMI) \ngmi = 3.31 + (0.02392 * mean_glucose) \n \n# Calculate glucose variability (coefficient of variation) \ncoefficient_of_variation = cgm_data['CGM'].std() / mean_glucose \n \n# Calculate % time above target glucose range (TAR) in level 2 (>250) \ntime_above_250 = len(cgm_data[cgm_data['CGM'] > 250]) / len(cgm_data) * 100 \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \n# Calculate % time above target glucose range (TAR) in level 1 (>180) \ntime_above_180 = len(cgm_data[cgm_data['CGM'] > 180]) / len(cgm_data) * 100 \n \n# Calculate % time in range (70-180mg/dL) \ntime_in_range = len(cgm_data[(cgm_data['CGM'] >= 70) & (cgm_data['CGM'] <= 180)]) / len(cgm_data) * 100 \n \n# Calculate % time below target glucose range (TBR) in level 1 (<70) \ntime_below_70 = len(cgm_data[cgm_data['CGM'] < 70]) / len(cgm_data) * 100 \n \n# Calculate % time below target glucose range (TBR) in level 2 (<54) \ntime_below_54 = len(cgm_data[cgm_data['CGM'] < 54]) / len(cgm_data) * 100 \n \n# Create a list of the calculated metrics \nmetrics = [ \n    num_days, percent_captured, mean_glucose, gmi, \n    coefficient_of_variation, time_above_250, time_above_180, \n    time_in_range, time_below_70, time_below_54 \n] \n \nMetrics \n \nCase 10 from datetime import timedelta \n \n# Parse the 'Time' column to datetime \ncgm_data['Time'] = pd.to_datetime(cgm_data['Time'], format='%m/%d/%y %H:%M') \n \n# Calculate the number of days the sensor is active \nnum_days = (cgm_data['Time'].max() - cgm_data['Time'].min()).days + 1 \n \n# Calculate % of sensor data captured (assuming the sensor should capture data every 5 minutes) \nexpected_measurements_per_day = 24 * 60 / 5 \ntotal_expected_measurements = expected_measurements_per_day * num_days \npercent_data_captured = (len(cgm_data) / total_expected_measurements) * 100 \n \n# Calculate mean glucose concentration \nmean_glucose = cgm_data['CGM'].mean() \n \n# Glucose Management Indicator (GMI) calculation, using the formula: GMI = 3.31 + 0.02392 * mean glucose \ngmi = 3.31 + 0.02392 * mean_glucose \n \n# Glucose variability as the coefficient of variation (CV = standard deviation / mean * 100) \nglucose_variability = (cgm_data['CGM'].std() / mean_glucose) * 100 \n \n# Calculate % Time in various ranges \ntime_in_tar_level2 = len(cgm_data[cgm_data['CGM'] > 250]) / len(cgm_data) * 100 \ntime_in_tar_level1 = len(cgm_data[(cgm_data['CGM'] > 180) & (cgm_data['CGM'] <= 250)]) / len(cgm_data) * 100 \ntime_in_range = len(cgm_data[(cgm_data['CGM'] >= 70) & (cgm_data['CGM'] <= 180)]) / len(cgm_data) * 100 \ntime_in_tbr_level1 = len(cgm_data[cgm_data['CGM'] < 70]) / len(cgm_data) * 100 \ntime_in_tbr_level2 = len(cgm_data[cgm_data['CGM'] < 54]) / len(cgm_data) * 100 \n \n# Time above target range (TAR) >180 includes both level 1 and level 2 \ntime_above_tar = time_in_tar_level1 + time_in_tar_level2 \n \n# Compile the results into a list \nresults = [ \n    num_days,  # Number of days the sensor is active \n    percent_data_captured,  # % of sensor data captured \n    mean_glucose,  # Mean glucose concentration \n    gmi,  # Glucose management indicator \n    glucose_variability,  # Glucose variability (CV) \n    time_in_tar_level2,  # % Time above target glucose range (TAR) in level 2 (>250) \n    time_above_tar,  # % Time above target glucose range (TAR) in level 1 (>180) including level 2 \n    time_in_range,  # % Time in range (70-180mg/dL) \n    time_in_tbr_level1,  # % Time below target glucose range (TBR) in level 1 (<70) \n    time_in_tbr_level2  # % Time below target glucose range (TBR) in level 2 (<54) \n] \n \nResults \n \n \nTable S8: Code written by GPT -4 for Quantitative Prompts \n \nAGP Summarization Task Prompt Output \n \nCase GPT-4 Output (Recorded outputs only) \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nCase 1  \nThe CGM data provided covers 14 unique days, which meets the recommended period of analysis. Additionally, the CGM activity time is approximately 88.54%, which is above the \nrecommended threshold of 70%. \n \nOutput Summary: This data is of good quality because it covers the recommended 14-day analysis period and has a CGM activity time well above the recommended 70% \nthreshold.  \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nHyperglycemia is a periodic concern for this case, with a few days showing higher glucose levels. Notably, January 8th experienced the highest daily percentage of hyperglycemia \n(12.65%), followed by notable levels on January 13th and 18th. In terms of daily patterns, mornings and afternoons showed higher average glucose readings, with the morning \nbeing particularly high. The evening period registered the peak glucose level of 236 mg/dL. However, there were no instances of prolonged severe hyperglycemia, indicating that \nwhile there are periods of elevated glucose levels, they do not extend for more than an hour at a time. This information is valuable for identifying specific periods of the day or \ncertain dates where glucose management may require closer attention or intervention. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nHypoglycemia was not a prevalent issue for this case. The few instances of hypoglycemia (glucose levels below 70 mg/dL) were observed on January 8th, 14th, and 20th, but \nthese occurrences were minimal and did not constitute a significant part of the day. Notably, there were no instances of severe hypoglycemia (below 54 mg/dL) throughout the \nanalysis period. In terms of daily patterns, a slight increase in hypoglycemic readings was noted during the late night and night, but these did not lead to prolonged events. \nOverall, the case's glucose levels appear to be well-managed, with no prolonged hypoglycemia episodes, indicating effective control of blood sugar levels to avoid significant low \nglucose events. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of glycemic variability showed that the case's daily coefficient of variation (CV) consistently remained below the target of 36%, indicating good overall stability in \nglucose levels. The days with the highest CV, suggesting somewhat greater variability, were January 20th (27.04%), January 14th (27.06%), and January 18th (26.14%), although \nthese values were still within acceptable limits. In terms of the interquartile range (IQR), the highest variability was observed during the evening (53.0 mg/dL) and night (47.0 \nmg/dL) times. This suggests that glucose levels fluctuate more during these periods compared to other times of the day. Identifying and addressing potential causes for these \nevening and night fluctuations could further improve the case's glycemic control. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \n \nBased on the analysis, the primary clinical concern appears to be intermittent hyperglycemia, particularly evident in the morning and afternoon periods, with the highest average \nglucose levels and occasional spikes above the hyperglycemic threshold. Although the instances of severe hyperglycemia were not prolonged or frequent, identifying and \naddressing the causes behind these higher glucose levels during specific times of the day could improve overall glycemic control. Hypoglycemia and glycemic variability do not \npresent significant concerns, as the data indicates these aspects are generally well-managed within the recommended guidelines. \n \nCase 2  \nThe analysis of the CGM data reveals: \n \nThe data covers 14 unique days, meeting the recommended period of analysis for 14 days. \nThe CGM activity time is approximately 88.81%, which is above the recommended threshold of 70%. \nOutput Summary: This CGM data is of good quality because it covers the recommended analysis period of 14 days and has a high CGM activity time of 88.81%, ensuring a \ncomprehensive and reliable dataset for assessment. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nHyperglycemia is a notable concern in this case's CGM data. Interday analysis shows a high variability in glucose levels, with an average of nearly 50% of the day spent in \nhyperglycemia and peaks reaching as high as 386 mg/dL. Intraday trends reveal specific times of the day, particularly in the evening and night, where hyperglycemia is more \npronounced. Critically, there are instances of prolonged severe hyperglycemia, with CGM readings exceeding 250 mg/dL for over an hour. For example, on January 8th, prolonged \nhyperglycemia was observed from 11:40 to 12:15 and again at 14:30 to 14:45. Similar patterns occurred on January 10th and 19th, indicating the need for targeted interventions \nduring these specific times. These findings suggest the importance of reviewing treatment strategies and lifestyle factors that may influence these patterns. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nHypoglycemia is not a predominant issue in this case's CGM data. The analysis shows that the case rarely spends time below the hypoglycemic threshold of 70 mg/dL, both on \nan interday and intraday basis. Severe hypoglycemia (below 54 mg/dL) was not observed in the data. There was only a single brief instance of prolonged hypoglycemia noted on \nJanuary 17th between 00:10 and 00:20, but it did not reach the severe hypoglycemia threshold. Overall, the case's glucose levels are well maintained above hypoglycemic levels \nthroughout the majority of the monitoring period, indicating effective management of low glucose levels. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of glycemic variability in the case's data shows overall stability, with all daily coefficients of variation (CV) below the recommended threshold of 36%. The highest CV \nwas observed on January 11th at 30.69%, while the lowest was on January 9th at 19.50%. Regarding the interquartile range (IQR), which reflects glucose fluctuations within \nspecific time windows, the highest variability was noted during the night, with an IQR of approximately 119.75. In contrast, the early morning period exhibited the least variability, \nwith an IQR around 45.00. These findings indicate that while daily glycemic variability is within acceptable limits, there are significant differences in glucose fluctuations across \ndifferent times of the day, particularly between night and early morning. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nBased on the analysis and guidelines, the primary clinical concern for this case is hyperglycemia. The data indicates significant periods of both hyperglycemia (glucose levels \nabove 180 mg/dL) and severe hyperglycemia (levels above 250 mg/dL), particularly during certain times of the day and on specific dates. Although hypoglycemia and glycemic \nvariability are not major issues, as evidenced by the minimal occurrences of hypoglycemia and the stable daily coefficients of variation, the consistent and prolonged instances of \nhyperglycemia warrant clinical attention. It suggests a need for reviewing and potentially adjusting the case's treatment regimen and lifestyle factors to better manage blood \nglucose levels. \nCase 3  \nThe analysis reveals that: \n \nThe data covers 14 unique days, meeting the recommended period of analysis. \nThe percentage of CGM activity time is approximately 86.06%, which is above the recommended threshold of 70%. \nOutput Summary: This data is of good quality because it covers the recommended period of analysis (14 days) and has a CGM activity time greater than 70% (86.06%), indicating \ncomprehensive monitoring within the period \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of the CGM data indicates that hyperglycemia, including instances of severe hyperglycemia, is a significant concern for this case. Notably, January 10th emerged as \na critical day with an average glucose level of 276.21 mg/dL, indicating extensive periods above the hyperglycemia threshold, including 83.97% of readings above 180 mg/dL and \n47.39% above 250 mg/dL. Intraday trends revealed that hyperglycemia is particularly prevalent during the afternoon and night, with severe spikes noted on January 10th in the \nafternoon and January 17th at night. Prolonged hyperglycemia events were identified on several days, including a substantial episode on January 10th spanning from morning to \nafternoon, and multiple night-time events on January 9th, 17th, and 20th, suggesting challenges in managing glucose levels during these times. These findings highlight the need \nfor targeted interventions to address periods of significant hyperglycemia, especially during identified problematic times of day. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of the CGM data for hypoglycemia shows that it is not a significant issue for this case. A minor instance of hypoglycemia was observed on January 9th, where the \nglucose level briefly fell to 65 mg/dL during the afternoon, but this did not extend to a prolonged event or reach severe hypoglycemia levels. There were no instances of glucose \nlevels falling below 54 mg/dL, and no prolonged periods of hypoglycemia exceeding 60 minutes were identified. This suggests that the case's current management strategies for \npreventing hypoglycemia are generally effective, with only a singular, brief deviation noted. Monitoring should continue, but there appears to be no immediate cause for concern \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nregarding hypoglycemia based on this data analysis. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe glycemic variability analysis revealed that several days exhibited high variation in glucose levels, notably on January 9th, 10th, 17th, and 20th, where the coefficient of \nvariation exceeded the guideline of 36%. This indicates significant fluctuations in glucose levels on these days, suggesting that factors affecting glycemic control may need \ncloser examination and management. Furthermore, the interquartile range (IQR) analysis identified the evening as the time of day with the highest glucose fluctuations, followed \nby the afternoon and night. The least variability was observed during the early morning hours. These findings highlight the need for targeted strategies to manage glucose levels \nmore effectively, particularly during times of day identified with higher variability, to improve overall glycemic control for the case. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nBased on the analysis, the primary clinical concern is the significant hyperglycemia, particularly the instances of severe hyperglycemia and high glycemic variability. Days with \nnotable hyperglycemia, such as January 10th and 17th, and times of day like the evening and afternoon, were identified as periods of high glucose levels and variability. The \noccurrence of prolonged hyperglycemia events further underscores the urgency of addressing these glycemic control issues. While hypoglycemia does not appear to be a \nsignificant problem for this case, the high levels of variability and instances of severe hyperglycemia suggest that the current diabetes management strategy may need to be \nreevaluated and adjusted to better control blood glucose levels and minimize risks associated with hyperglycemia. \n \nCase 4  \nThe CGM data analysis reveals the following: \n \nThe dataset covers 14 unique days, meeting the recommended period of analysis. \nThe CGM activity time is approximately 90.3%, which is above the recommended threshold of 70%. \nOutput Summary: This data is of good quality because it encompasses the recommended 14 days of analysis and has a CGM activity time well above the recommended \nthreshold, ensuring a comprehensive and reliable dataset for further analysis. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of the CGM data indicates that hyperglycemia is a significant issue for the case, with several days showing a high percentage of time spent above the hyperglycemia \nthreshold. Notably, on January 9, 11, 15, 16, 17, 18, and 19, the case spent a large part of the day in a hyperglycemic state, with January 15 showing an exceptionally high 98.6% of \nthe time above the threshold. Severe hyperglycemia (>250 mg/dL) was also a concern, particularly on January 12 and 18, where more than half of the day was spent at these \ndangerous levels. Prolonged hyperglycemia events were frequent, with significant episodes occurring across various days, including multiple instances on January 9, 12, 15, 18, \nand 19 in different time windows such as the afternoon, morning, and late night. These findings suggest the need for a detailed review of the case's treatment plan and lifestyle \nchoices during these identified periods to address and mitigate hyperglycemia risks effectively. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of the CGM data for hypoglycemia reveals that low blood sugar levels are not a significant concern for the case during the observed period. Only on January 10th \nwas there a minor incidence of hypoglycemia (below 70 mg/dL), with a negligible portion of the day affected and no evidence of severe hypoglycemia (below 54 mg/dL) on any \nday. Furthermore, there were no instances of prolonged hypoglycemia, indicating that the case did not experience extended periods of dangerously low glucose levels. This lack \nof significant hypoglycemia suggests that while managing high blood sugar levels is crucial for the case, maintaining a balance to avoid overly aggressive lowering that could \nresult in hypoglycemia is also being effectively achieved. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe glycemic variability analysis revealed that most days exhibited a coefficient of variation (CV) below the recommended threshold of 36%, indicating generally stable glucose \nlevels. However, specific days, such as January 10, 12, and 18, demonstrated higher CVs, with January 18 approaching the threshold, suggesting notable fluctuations in glucose \nlevels. The interquartile range (IQR) analysis highlighted January 12 and 18 as days with significantly larger fluctuations, indicative of pronounced glycemic variability. \nFurthermore, the analysis of IQR across different times of the day identified \"Late night\" and \"Afternoon\" as periods with the highest variability, pointing towards more substantial \nfluctuations during these times. This information could be crucial for tailoring case management strategies, particularly focusing on dietary and activity adjustments during times \nof heightened variability to enhance glycemic control. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe primary clinical concern identified from the analysis is the significant issue of hyperglycemia, with several days showing a high percentage of time spent above the \nhyperglycemia threshold and instances of severe hyperglycemia. This is compounded by the observation of pronounced glycemic variability on certain days and at specific times, \nsuggesting that while hypoglycemia is not a significant issue, the case's glucose management strategy may need adjustment. The frequent and prolonged periods of high \nglucose levels, especially the severe hyperglycemia events, pose a considerable risk for diabetic complications. Therefore, addressing these hyperglycemic episodes and \nmanaging glycemic variability should be a priority in the case's diabetes care plan. \nCase 5 \nThe CGM data covers 14 unique days, meeting the recommended period of analysis. Additionally, the CGM activity time is approximately 97.67%, which is well above the \nrecommended threshold of 70%. \n \nOutput Summary: The data is of good quality because it covers the recommended 14-day analysis period and has a high CGM activity time of approximately 97.67%, exceeding \nthe recommended 70%.  \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of your CGM data indicates that hyperglycemia is not a significant concern. Interday trends show that on average, only about 0.63% of your time is spent in a \nhyperglycemic state (glucose > 180 mg/dL), with the highest daily percentage being around 5.21%. Intraday trends reveal that your average glucose levels vary throughout the day \nbut do not frequently exceed the hyperglycemia threshold, with the highest recorded level being 208 mg/dL. Importantly, there were no instances of prolonged severe \nhyperglycemia (glucose levels > 250 mg/dL lasting over an hour) in the data. These findings suggest good overall glucose management, although it might be beneficial to review \nthe days with slightly higher levels to understand any specific triggers or activities associated with these variations. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of your CGM data reveals that hypoglycemia is not a significant concern. Interday trends show minimal daily occurrences of hypoglycemia, with very low \npercentages of time spent below both the mild (below 70 mg/dL) and severe (below 54 mg/dL) hypoglycemic thresholds. Intraday trends do not indicate any consistent pattern \nor specific times of day when hypoglycemia is more likely to occur. Importantly, there were no instances of prolonged hypoglycemia, either mild or severe, on any of the days in \nthe analyzed dataset. This suggests effective management of your glucose levels, with minimal risk of hypoglycemic episodes. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of glycemic variability in your CGM data reveals excellent glucose control. No days were identified with a coefficient of variation exceeding the recommended 36%, \nindicating a consistent and stable management of glucose levels on a daily basis. Furthermore, the interquartile ranges for different times of the day –  Morning, Afternoon, \nEvening, and Night –  were consistently low, suggesting minimal variability in glucose levels throughout the day. This stability in glycemic control is a positive indicator of effective \ndiabetes management strategies, and it minimizes the risk of complications associated with large glucose fluctuations. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nBased on the analysis of the CGM data and adherence to clinical guidelines, the primary clinical concern for the case appears to be minimal. The case's glucose levels are well-\nmanaged, with minimal instances of hyperglycemia or hypoglycemia. Glycemic variability is also within the recommended range, indicating stable glucose control. Therefore, the \ncase seems to be effectively managing their diabetes, and there are no significant clinical concerns identified from this data analysis. However, continued monitoring and routine \ncheck-ups are advisable to maintain this level of control. \n \nCase 6 \nDuration of Data Collection: The dataset contains CGM readings for exactly 14 unique days, meeting the recommended period of analysis for assessing diabetes management. \n \nCGM Activity Time: The dataset has a CGM activity time of approximately 92.4%, which is significantly above the recommended threshold of 70%. \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \n \nOutput Summary \nThe data is of good quality because it covers the recommended 14-day analysis period and has a high CGM activity time of over 92%, ensuring a comprehensive overview of the \ncase's glucose levels. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nHyperglycemia is a significant concern for this case, with both frequent and severe instances noted. Interday analysis revealed particularly high glucose levels on specific days, \nsuch as January 21 and 13, where over 70% of readings were above the hyperglycemia threshold. Intraday trends showed the highest glucose peaks during late night and night, \nindicating a pattern of elevated glucose levels during these periods. Prolonged hyperglycemic events, where glucose levels were above 250 mg/dL for an hour or more, were \nobserved on several days, including the afternoon and night of January 9, and the early morning and morning of January 10. These findings highlight the need for a focused \nreview of the case's diabetes management, especially during the identified times and days. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nHypoglycemia is generally not a major concern for this case, with only a few isolated instances. The most notable occurrence was on January 20, 2023, when 6.6% of the day's \nreadings were below the hypoglycemia threshold of 70 mg/dL, particularly during late night. This specific instance indicates a need for cautious nighttime glucose management. \nIntraday analysis revealed that the lowest glucose readings typically occurred during the late-night hours, though severe hypoglycemia (below 54 mg/dL) was not a prominent \nissue. There was one prolonged hypoglycemic event on January 20, highlighting the importance of monitoring and possibly adjusting treatment strategies during late-night \nperiods. Overall, while hypoglycemia is not widespread, vigilance during late-night hours is advisable. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \n\"The analysis of glycemic variability within the dataset revealed significant fluctuations in glucose levels on specific days and during certain times of the day. Notably, January 18 \nand January 9 exhibited high coefficients of variation, 44.54% and 42.41% respectively, surpassing the recommended threshold of 36%. This indicates considerable daily \nvariability in glucose levels on these days, suggesting the need for closer monitoring or adjustments in diabetes management. Regarding the interquartile range, the most \nsignificant variability in glucose readings occurred during late night (IQR of 112) and evening (IQR of 102), indicating these periods as the times with the highest fluctuations. \nThese findings underscore the importance of focusing on stabilizing glucose levels, particularly during late nights and evenings, to manage glycemic variability effectively. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nBased on the analysis and guidelines, the primary clinical concern for this case is the significant hyperglycemia, including severe hyperglycemia, with frequent high glucose levels \nand substantial daily variability. Particular attention should be given to managing elevated glucose levels during late night and evening hours, as well as on days like January 18 \nand 9, which showed high glycemic variability. Although hypoglycemia is not a widespread issue, occasional monitoring, especially during late-night hours, is advisable. The focus \nshould be on stabilizing blood glucose levels to avoid extreme highs and manage variability effectively. \nCase 7 Based on the analysis: \n \nThe CGM data covers 14 unique days, which meets the recommended period of analysis for 14 days. \nThe CGM was active approximately 95.49% of the time, well above the recommended activity time of 70%. \nOutput Summary: The data is of good quality as it covers the recommended 14 days and has a high CGM activity time of about 95.49%.  \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nHyperglycemia is a significant issue for this case, with several days showing elevated glucose levels. Notably, January 9th and 18th were particularly concerning, with extremely \nhigh percentages of the day spent in severe hyperglycemia. Intraday trends indicate that morning glucose levels are consistently high, followed by elevated levels in the afternoon \nand evening. Prolonged severe hyperglycemia events were frequent; for instance, on January 8th, these events spanned across the afternoon, evening, morning, and night. Such \npatterns suggest the need for careful review and potential adjustments in diabetes management, especially considering the severity and frequency of these hyperglycemic \nepisodes. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nHypoglycemia is generally not a significant concern for this case, as the data shows very few instances of low glucose levels. The only notable exception occurred on January \n16th during late night, where both hypoglycemia (below 70 mg/dL) and severe hypoglycemia (below 54 mg/dL) were observed for a short duration. This isolated event of \nprolonged hypoglycemia, lasting over 60 minutes for hypoglycemia and over 15 minutes for severe hypoglycemia, warrants attention to understand possible triggers or specific \nconditions on that night. Otherwise, the case's glucose levels were mostly stable and above the hypoglycemic thresholds. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nOutput Summary: The glycemic variability analysis reveals that most days exhibit stable glucose levels with a Coefficient of Variation (CV) below the recommended 36%. \nHowever, increased variability was noted on January 13th, 15th, 16th, and particularly on January 21st, where the CV exceeded the threshold, indicating more fluctuating glucose \nlevels. The Daily Interquartile Range (IQR) analysis showed that mornings and nights are periods with the highest glucose variability, with mornings having an average IQR around \n51.7 and nights around 59.1. These findings suggest that while the case's overall glycemic control is relatively stable, there are specific times, particularly mornings and nights, \nwhere glucose levels demonstrate more significant fluctuations. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nBased on the analysis, the primary clinical concern for this case is the frequent and severe hyperglycemia. Several days, notably January 9th and 18th, showed extremely high \nlevels of glucose and a significant portion of time spent in severe hyperglycemia. Additionally, the case experienced substantial glucose variability on certain days and during \nspecific times (especially mornings and nights), which could complicate diabetes management. While hypoglycemia does not appear to be a major issue, the high and variable \nhyperglycemic episodes are a significant concern and should be addressed with the case's healthcare provider to optimize their diabetes treatment plan. \n \nCase 8  \nThe data covers 14 unique days and has a CGM activity time of approximately 91.5%. \n \nOutput Summary: \nThis data is of good quality because it meets the recommended analysis period of 14 days and has a CGM activity time greater than 70%, specifically around 91.5%. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nHyperglycemia is a noticeable concern for this case, with evidence of glucose levels exceeding the hyperglycemia threshold of 180 mg/dL on several days, though no instances \nof severe hyperglycemia (over 250 mg/dL) were recorded on a daily aggregate level. The data did not show any prolonged severe hyperglycemia events, indicating that while \nglucose levels frequently rise above desired levels, they do not remain at critically high levels for extended periods. Intraday analysis revealed varying glucose levels throughout \nthe day, suggesting that certain times may be more prone to hyperglycemic episodes; however, without severe spikes reaching the threshold for prolonged concern. This \ninformation can be useful for identifying patterns in daily activities or dietary habits that may influence glucose levels. It is important for the case to be aware of these trends to \nmanage and mitigate hyperglycemic episodes more effectively. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of the CGM data for hypoglycemia indicates that this case does not experience significant issues with low blood sugar levels. No days were identified with a \nconcerning number of readings below the hypoglycemia or severe hypoglycemia thresholds, suggesting that episodes of low glucose are not dominating the case's glucose \nmanagement. Furthermore, there were no instances of prolonged hypoglycemia, where glucose levels stayed dangerously low for extended periods. This lack of prolonged \nhypoglycemic events is a positive sign, indicating effective management of glucose levels to avoid the risks associated with low blood sugar. It suggests that the case's current \ndiabetes management plan is effectively preventing severe hypoglycemia, a crucial goal in the treatment of diabetes. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of glycemic variability within the CGM data revealed no days with a coefficient of variation exceeding 36%, indicating that the case maintains relatively stable \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nglucose levels on a daily basis without significant day-to-day fluctuations. This stability suggests effective management of glycemic variability, a crucial factor in minimizing the \nrisk of diabetes-related complications. The interquartile range (IQR), which measures the spread of the middle 50% of glucose readings, varied across different times of the day, \nwith a mean IQR of approximately 26.75 mg/dL. Although there are some fluctuations in glucose levels throughout the day, these did not show extreme variability, indicating \ncontrolled glucose levels during different times. This analysis underscores the importance of ongoing monitoring and management to maintain this level of glycemic control and \nstability. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nBased on the analysis, the primary clinical concern appears to be hyperglycemia, with glucose levels frequently exceeding the recommended upper limit of 180 mg/dL, though not \nreaching severe hyperglycemia levels above 250 mg/dL for prolonged periods. While there are no significant concerns regarding hypoglycemia or excessive glycemic variability, \nmanaging and reducing episodes of hyperglycemia remains a crucial aspect of the case's diabetes management. Identifying and addressing the causes of these hyperglycemic \nepisodes, whether related to diet, physical activity, or insulin therapy adjustments, should be a focus to minimize the risk of diabetes-related complications. \n \nCase 9  The dataset contains data for 14 unique days, and the CGM was active for approximately 99.16% of the time. \n \nGiven this information, we can conclude that the data is of good quality because: \n \nIt covers the recommended period of analysis of 14 days. \nThe CGM activity time is well above the recommended threshold of 70%. \n \nOutput Summary: This CGM data is of good quality because it spans over the recommended 14 unique days and has a high activity time of approximately 99.16%, indicating \ncomprehensive monitoring. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of the CGM data reveals significant concerns regarding hyperglycemia for this case, particularly on certain days and during specific times. Notably, January 12th and \n13th stood out with exceptionally high average glucose levels and significant portions of the day spent above the hyperglycemic threshold, indicating severe hyperglycemia. \nAdditionally, there were multiple instances of prolonged severe hyperglycemia, notably during the late night and early morning of January 12th, and during the afternoon and \nevening of January 13th. These patterns suggest that the case's glucose levels tend to rise significantly during the late night to early morning and in the afternoon to evening. \nIdentifying specific behaviors or circumstances on these days and times, such as diet, exercise, or medication management, could be crucial in developing strategies to mitigate \nthese hyperglycemic events. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe hypoglycemia analysis indicates that while hypoglycemic events were not widespread across all days, January 11th emerged as a significant concern due to notable levels of \nhypoglycemia, including both below 70 mg/dL for a substantial part of the evening and severe hypoglycemia below 54 mg/dL. Additionally, prolonged hypoglycemia events were \nobserved on January 11th and 12th, particularly in the evening and night, suggesting a pattern where the risk of hypoglycemia increases during these times. These findings \nhighlight the importance of closely monitoring glucose levels and possibly adjusting treatment or behaviors around these identified times to mitigate the risk of future \nhypoglycemic episodes. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe glycemic variability analysis highlighted significant fluctuations in glucose control, particularly on January 11th, 12th, and 13th, where the coefficient of variation exceeded \nthe target of less than 36%, indicating high glycemic variability. These days, especially with CVs of 43.86%, 55.17%, and 53.41% respectively, suggest inconsistent glucose \nmanagement and potential risk areas for the case. Additionally, the evening time window exhibited the highest interquartile range (IQR) of glucose readings, pointing to a broader \nvariability in glucose levels during this period. This suggests that the case's glucose levels are more unstable in the evenings, possibly due to dinner meals, activity levels, or the \ntiming of medication. Addressing these specific times and patterns could be key to achieving more stable glucose control. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe primary clinical concern based on the analysis is the significant glycemic variability, particularly the instances of severe hyperglycemia and the days with high coefficient of \nvariation, indicating inconsistent glucose control. The days with prolonged severe hyperglycemia (glucose levels above 250 mg/dL for extended periods) and the evenings with \nhigh interquartile ranges of glucose readings highlight the need for closer monitoring and possibly adjustments in the management plan. These findings suggest that the case \nmay benefit from tailored interventions to address both hyperglycemia and glycemic variability, potentially involving changes in insulin therapy, dietary adjustments, and lifestyle \nmodifications to stabilize glucose levels and reduce the risk of complications. \n \nCase 10  \nThe CGM data covers 14 unique days with a span of 14 days, and the CGM activity time is approximately 97.37%. This means the dataset meets both recommended criteria for \nanalysis: \n \nIt has 14 unique days of data, aligning with the recommended period of analysis. \nThe CGM was active about 97.37% of the time, which is well above the recommended threshold of 70%. \nOutput Summary: The data is of good quality because it covers the recommended period of 14 days and has a high CGM activity time of approximately 97.37%, ensuring a \ncomprehensive analysis \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of the CGM data indicates that hyperglycemia is a concern for this case, particularly with several instances of severe hyperglycemia. Notably, the evenings of \nJanuary 11th and the afternoons of January 12th and January 18th exhibited significant hyperglycemia, with glucose levels peaking at 285 mg/dL, 271 mg/dL, and 332 mg/dL, \nrespectively. These findings suggest a pattern of postprandial hyperglycemia that might be linked to meal composition or timing. Prolonged periods of severe hyperglycemia, \nlasting for an hour or more, were identified on January 8th (early hours), January 11th (late afternoon and early evening), January 12th (early afternoon), and January 18th \n(midday and early afternoon), indicating critical times when the case's glucose management was inadequate. These specific instances provide actionable insights for the case \nand their healthcare provider to explore potential triggers and adjust treatment plans accordingly. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of the CGM data reveals that hypoglycemia is a notable concern for this case, particularly with occurrences of prolonged and severe hypoglycemic events. Notably, \nthe nights transitioning from January 11th to 12th and the early morning of January 16th experienced significant periods of hypoglycemia below 70 mg/dL for more than an hour, \nand instances where glucose levels dropped below 54 mg/dL for more than 15 minutes. These findings suggest a pattern of nocturnal hypoglycemia, which could be related to \ninsulin dosing, meal planning, or physical activity levels. Addressing these trends is crucial for preventing hypoglycemia and ensuring the case's safety, indicating a need for \npotential adjustments in the case's diabetes management strategy, especially in terms of nighttime insulin dosing or snack recommendations. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe analysis of glycemic variability in the CGM dataset reveals an overall stable pattern, with an average daily coefficient of variation (CV) at 24.10%, indicating good glycemic \ncontrol for most days. However, there was a day where the CV spiked to 43.08%, highlighting a day with significantly higher glycemic variability, which may warrant closer \nexamination to understand potential causes such as dietary choices, activity levels, or insulin dosing. The interquartile range (IQR) analysis shows higher variability during the \nnight, early morning, and afternoon times, with the night time window exhibiting the highest IQR at 50.00 mg/dL. These findings suggest that these periods are particularly prone \nto fluctuations in blood glucose levels, and targeted strategies may be needed to address this variability and enhance the case's glycemic stability. \n \n— --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- \n \nThe primary clinical concern based on the analysis is the presence of both significant hyperglycemia and hypoglycemia events, indicating challenges in maintaining stable \nglycemic control. Specifically, the occurrence of severe hyperglycemia, with glucose readings frequently exceeding 250 mg/dL, and instances of prolonged hypoglycemia below \n70 mg/dL, suggest risks for both acute and long-term complications. Additionally, the variability in glucose levels, especially during specific times of the day, points to the need \nfor adjustments in the case's diabetes management plan. Addressing these fluctuations through tailored interventions could help mitigate risks and improve overall glycemic \nstability. \n \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nTable S9:  Qualitative Prompts Output  \nAGP Summarization Task Prompt Code Written  \n \nCase Tasks Code Generated \nCase 1  Data Quality  # Extracting the date and time from the 'Time' column \ncgm_data['DateTime'] = pd.to_datetime(cgm_data['Time']) \n \n# Checking the date range of the dataset \ndate_range = cgm_data['DateTime'].dt.date.unique() \n \n# Counting the number of unique days in the dataset \nunique_days = len(date_range) \n \n# Checking the total possible readings and actual readings \n# Assuming readings are taken every 5 minutes, there are 288 readings per day (24*60/5) \ntotal_possible_readings = unique_days * 288 \nactual_readings = cgm_data.shape[0] \n \n# Calculating the percentage of CGM activity time \ncgm_activity_percentage = (actual_readings / total_possible_readings) * 100 \n \nunique_days, cgm_activity_percentage \n \n \n Hyperglycemia import numpy as np \n \n# Defining hyperglycemia thresholds \nhyperglycemia_threshold = 180 \nsevere_hyperglycemia_threshold = 250 \n \n# Extracting date and time information for analysis \ncgm_data['Date'] = cgm_data['DateTime'].dt.date \ncgm_data['Hour'] = cgm_data['DateTime'].dt.hour \n \n# Breaking the day into 4-hour time windows and labeling them \ntime_windows = {0: \"Late night\", 4: \"Early morning\", 8: \"Morning\", 12: \"Afternoon\", 16: \"Evening\", 20: \n\"Night\"} \ncgm_data['TimeWindow'] = pd.cut(cgm_data['Hour'], bins=list(time_windows.keys()) + [24],  \n                                labels=list(time_windows.values()), right=False, include_lowest=True) \n \n# 1. Interday trends: Identifying days with high levels of glucose or high percentage of the day above \nhyperglycemic thresholds \ndaily_hyperglycemia = cgm_data[cgm_data['CGM'] > hyperglycemia_threshold].groupby('Date').size() \ndaily_severe_hyperglycemia = cgm_data[cgm_data['CGM'] > \nsevere_hyperglycemia_threshold].groupby('Date').size() \ntotal_daily_readings = cgm_data.groupby('Date').size() \npercentage_daily_hyperglycemia = (daily_hyperglycemia / total_daily_readings) * 100 \npercentage_daily_severe_hyperglycemia = (daily_severe_hyperglycemia / total_daily_readings) * 100 \n \n# 2. Intraday trends: Maximum and average glucose in each time window \nintraday_trends = cgm_data.groupby('TimeWindow').agg(MaxGlucose=('CGM', 'max'), AvgGlucose=('CGM', 'mean')) \n \n# 3. Prolonged hyperglycemia: Identifying periods of severe hyperglycemia lasting for an hour or more \ncgm_data['SevereHyperglycemia'] = cgm_data['CGM'] > severe_hyperglycemia_threshold \nprolonged_hyperglycemia = cgm_data.groupby(['Date', 'TimeWindow'])['SevereHyperglycemia'].rolling(window=12, \nmin_periods=12).sum() \nprolonged_hyperglycemia = prolonged_hyperglycemia.reset_index().rename(columns={'SevereHyperglycemia': \n'Count'}) \nprolonged_events = prolonged_hyperglycemia[prolonged_hyperglycemia['Count'] >= 12] \n \n# Preparing results \ninterday_trends = pd.concat([percentage_daily_hyperglycemia, percentage_daily_severe_hyperglycemia], axis=1) \ninterday_trends.columns = ['% Hyperglycemia', '% Severe Hyperglycemia'] \nprolonged_events_summary = prolonged_events.groupby(['Date', 'TimeWindow']).size() \n \ninterday_trends, intraday_trends, prolonged_events_summary \n \n \n Hypoglycemia # Defining hypoglycemia thresholds \nhypoglycemia_threshold = 70 \nsevere_hypoglycemia_threshold = 54 \n \n# 1. Interday trends: Identifying days with low levels of glucose or high percentage of the day below \nhypoglycemic thresholds \ndaily_hypoglycemia = cgm_data[cgm_data['CGM'] < hypoglycemia_threshold].groupby('Date').size() \ndaily_severe_hypoglycemia = cgm_data[cgm_data['CGM'] < severe_hypoglycemia_threshold].groupby('Date').size() \npercentage_daily_hypoglycemia = (daily_hypoglycemia / total_daily_readings) * 100 \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \npercentage_daily_severe_hypoglycemia = (daily_severe_hypoglycemia / total_daily_readings) * 100 \n \n# 2. Intraday trends: Identifying if hypoglycemia occurs at certain times of the day \nintraday_hypoglycemia_trends = cgm_data[cgm_data['CGM'] < \nhypoglycemia_threshold].groupby('TimeWindow').size() \nintraday_severe_hypoglycemia_trends = cgm_data[cgm_data['CGM'] < \nsevere_hypoglycemia_threshold].groupby('TimeWindow').size() \n \n# 3. Prolonged hypoglycemia: Identifying periods of hypoglycemia lasting for 60 minutes or more, and severe \nhypoglycemia for 15 minutes or more \ncgm_data['Hypoglycemia'] = cgm_data['CGM'] < hypoglycemia_threshold \ncgm_data['SevereHypoglycemia'] = cgm_data['CGM'] < severe_hypoglycemia_threshold \nprolonged_hypoglycemia = cgm_data.groupby(['Date', 'TimeWindow'])['Hypoglycemia'].rolling(window=12, \nmin_periods=12).sum() \nprolonged_severe_hypoglycemia = cgm_data.groupby(['Date', \n'TimeWindow'])['SevereHypoglycemia'].rolling(window=3, min_periods=3).sum() \nprolonged_hypoglycemia = prolonged_hypoglycemia.reset_index().rename(columns={'Hypoglycemia': 'Count'}) \nprolonged_severe_hypoglycemia = \nprolonged_severe_hypoglycemia.reset_index().rename(columns={'SevereHypoglycemia': 'Count'}) \nprolonged_hypo_events = prolonged_hypoglycemia[prolonged_hypoglycemia['Count'] >= 12] \nprolonged_severe_hypo_events = prolonged_severe_hypoglycemia[prolonged_severe_hypoglycemia['Count'] >= 3] \n \n# Preparing results \ninterday_hypo_trends = pd.concat([percentage_daily_hypoglycemia, percentage_daily_severe_hypoglycemia], \naxis=1) \ninterday_hypo_trends.columns = ['% Hypoglycemia', '% Severe Hypoglycemia'] \nprolonged_hypo_summary = prolonged_hypo_events.groupby(['Date', 'TimeWindow']).size() \nprolonged_severe_hypo_summary = prolonged_severe_hypo_events.groupby(['Date', 'TimeWindow']).size() \n \ninterday_hypo_trends, intraday_hypoglycemia_trends, intraday_severe_hypoglycemia_trends, \nprolonged_hypo_summary, prolonged_severe_hypo_summary \n \n Glycemic \nVariability \n# Calculating the Coefficient of Variation (CV) for each day \ndaily_cgm_stats = cgm_data.groupby('Date')['CGM'].agg(['mean', 'std']) \ndaily_cgm_stats['CoefficientOfVariation'] = (daily_cgm_stats['std'] / daily_cgm_stats['mean']) * 100 \n \n# Calculating the Interquartile Range (IQR) for each time window \ntime_window_cgm_stats = cgm_data.groupby('TimeWindow')['CGM'].agg(['quantile']) \ntime_window_cgm_stats['IQR'] = time_window_cgm_stats['quantile'].apply(lambda x: x(0.75) - x(0.25)) \n \ndaily_cgm_stats, time_window_cgm_stats['IQR'] \n \n*** [ERROR] *** \n \n# Correcting the calculation of Interquartile Range (IQR) for each time window \ntime_window_cgm_stats = cgm_data.groupby('TimeWindow')['CGM'].agg(['quantile']) \ntime_window_cgm_stats['IQR'] = cgm_data.groupby('TimeWindow')['CGM'].quantile(0.75) - \ncgm_data.groupby('TimeWindow')['CGM'].quantile(0.25) \n \ndaily_cgm_stats, time_window_cgm_stats['IQR'] \n \n \n \nCase 2  Data Quality  from datetime import datetime \n \n# Convert the 'Time' column to datetime format for easier processing \ncgm_data['Time'] = pd.to_datetime(cgm_data['Time']) \n \n# Calculate the number of unique days \nunique_days = cgm_data['Time'].dt.date.nunique() \n \n# Assuming the CGM records data every 5 minutes, calculate the expected number of readings per day \nexpected_readings_per_day = 24 * 60 / 5  # 288 readings per day \n \n# Total expected readings for the unique days \ntotal_expected_readings = unique_days * expected_readings_per_day \n \n# Actual number of readings \nactual_readings = len(cgm_data) \n \n# Calculate the percentage of CGM activity time \ncgm_activity_percentage = (actual_readings / total_expected_readings) * 100 \n \nunique_days, cgm_activity_percentage \n \n Hyperglycemia # Define hyperglycemia thresholds \nhyperglycemia_threshold = 180 \nsevere_hyperglycemia_threshold = 250 \n \n# Add a column to the dataframe indicating if each reading is hyperglycemic or severely hyperglycemic \ncgm_data['Hyperglycemic'] = cgm_data['CGM'] > hyperglycemia_threshold \ncgm_data['Severely_Hyperglycemic'] = cgm_data['CGM'] > severe_hyperglycemia_threshold \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \n# Group the data by date to analyze interday trends \ninterday_analysis = cgm_data.groupby(cgm_data['Time'].dt.date).agg({ \n    'Hyperglycemic': 'mean', \n    'Severely_Hyperglycemic': 'mean', \n    'CGM': ['max', 'mean'] \n}) \n \n# Define the 4-hour time windows for intraday analysis \ntime_windows = [ \n    (\"Late night\", 0, 4), \n    (\"Early morning\", 4, 8), \n    (\"Morning\", 8, 12), \n    (\"Afternoon\", 12, 16), \n    (\"Evening\", 16, 20), \n    (\"Night\", 20, 24) \n] \n \n# Function to assign each time to a time window \ndef assign_time_window(hour): \n    for window_name, start_hour, end_hour in time_windows: \n        if start_hour <= hour < end_hour: \n            return window_name \n    return \"Unknown\" \n \n# Add a column for time window \ncgm_data['Time_Window'] = cgm_data['Time'].dt.hour.apply(assign_time_window) \n \n# Group the data by time window for intraday analysis \nintraday_analysis = cgm_data.groupby('Time_Window').agg({ \n    'CGM': ['max', 'mean'], \n    'Hyperglycemic': 'mean', \n    'Severely_Hyperglycemic': 'mean' \n}).sort_values(by=('CGM', 'mean'), ascending=False) \n \n# Prolonged hyperglycemia: check for periods where glucose readings are over 250 for an hour or more \ncgm_data['Severe_Hyperglycemia_Continuous'] = cgm_data['Severely_Hyperglycemic'].rolling(12).sum() == 12 \nprolonged_hyperglycemia = cgm_data[cgm_data['Severe_Hyperglycemia_Continuous']] \n \n# Summarize the findings \ninterday_summary = interday_analysis.describe() \nintraday_summary = intraday_analysis.describe() \nprolonged_hyperglycemia_summary = prolonged_hyperglycemia['Time'].dt.strftime('%Y-%m-%d %H:%M').unique() \n \ninterday_summary, intraday_summary, prolonged_hyperglycemia_summary \n \n \n Hypoglycemia # Define hypoglycemia thresholds \nhypoglycemia_threshold = 70 \nsevere_hypoglycemia_threshold = 54 \n \n# Add columns indicating if each reading is hypoglycemic or severely hypoglycemic \ncgm_data['Hypoglycemic'] = cgm_data['CGM'] < hypoglycemia_threshold \ncgm_data['Severely_Hypoglycemic'] = cgm_data['CGM'] < severe_hypoglycemia_threshold \n \n# Group the data by date for interday analysis \ninterday_hypo_analysis = cgm_data.groupby(cgm_data['Time'].dt.date).agg({ \n    'Hypoglycemic': 'mean', \n    'Severely_Hypoglycemic': 'mean', \n    'CGM': ['min', 'mean'] \n}) \n \n# Group the data by time window for intraday analysis \nintraday_hypo_analysis = cgm_data.groupby('Time_Window').agg({ \n    'CGM': ['min', 'mean'], \n    'Hypoglycemic': 'mean', \n    'Severely_Hypoglycemic': 'mean' \n}).sort_values(by=('CGM', 'mean')) \n \n# Prolonged hypoglycemia: check for periods where glucose readings are below 70 for more than 60 minutes, or \nbelow 54 for more than 15 minutes \ncgm_data['Prolonged_Hypoglycemia_70'] = cgm_data['Hypoglycemic'].rolling(12).sum() >= 12 \ncgm_data['Prolonged_Hypoglycemia_54'] = cgm_data['Severely_Hypoglycemic'].rolling(3).sum() >= 3 \nprolonged_hypoglycemia_70 = cgm_data[cgm_data['Prolonged_Hypoglycemia_70']] \nprolonged_hypoglycemia_54 = cgm_data[cgm_data['Prolonged_Hypoglycemia_54']] \n \n# Summarize the findings \ninterday_hypo_summary = interday_hypo_analysis.describe() \nintraday_hypo_summary = intraday_hypo_analysis.describe() \nprolonged_hypoglycemia_70_summary = prolonged_hypoglycemia_70['Time'].dt.strftime('%Y-%m-%d %H:%M').unique() \nprolonged_hypoglycemia_54_summary = prolonged_hypoglycemia_54['Time'].dt.strftime('%Y-%m-%d %H:%M').unique() \n \ninterday_hypo_summary, intraday_hypo_summary, prolonged_hypoglycemia_70_summary, \nprolonged_hypoglycemia_54_summary \n \n \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n Glycemic \nVariability \n# Calculating the coefficient of variation for each day \ncgm_data['Date'] = cgm_data['Time'].dt.date \ndaily_cv = cgm_data.groupby('Date')['CGM'].agg(['mean', 'std']) \ndaily_cv['Coefficient_of_Variation'] = (daily_cv['std'] / daily_cv['mean']) * 100 \n \n# Calculate the interquartile range (IQR) for each time window \nintraday_iqr = cgm_data.groupby('Time_Window')['CGM'].agg(['25%', '75%']) \nintraday_iqr['IQR'] = intraday_iqr['75%'] - intraday_iqr['25%'] \n \n# Summarize the findings \ndaily_cv_summary = daily_cv.describe() \nintraday_iqr_summary = intraday_iqr.describe() \n \ndaily_cv_summary, intraday_iqr_summary, daily_cv, intraday_iqr \n \n**** [ERROR] *** \n \n# Correcting the calculation of the interquartile range (IQR) for each time window \nintraday_iqr = cgm_data.groupby('Time_Window')['CGM'].agg(['quantile']).unstack().T \nintraday_iqr.columns = ['25%', '75%'] \nintraday_iqr['IQR'] = intraday_iqr['75%'] - intraday_iqr['25%'] \n \n# Recalculate the summaries \ndaily_cv_summary = daily_cv.describe() \nintraday_iqr_summary = intraday_iqr.describe() \n \ndaily_cv_summary, intraday_iqr_summary, daily_cv, intraday_iqr \n \n*** [ERROR] *** \n \n# Correcting the method to calculate the interquartile range (IQR) for each time window \nintraday_iqr = cgm_data.groupby('Time_Window')['CGM'].agg(lambda x: x.quantile(0.75) - x.quantile(0.25)) \n \n# Recalculating the summaries \ndaily_cv_summary = daily_cv.describe() \nintraday_iqr_summary = intraday_iqr.describe() \n \ndaily_cv_summary, intraday_iqr_summary, daily_cv, intraday_iqr \n \n \n \nCase 3  Data Quality  # Convert the 'Time' column to datetime format to facilitate analysis \ncgm_data['DateTime'] = pd.to_datetime(cgm_data['Time'], format='%m/%d/%y %H:%M') \n \n# Calculate the number of unique days \nunique_days = cgm_data['DateTime'].dt.date.nunique() \n \n# Calculate the total possible readings (assuming continuous data collection every 5 minutes for 14 days) \ntotal_possible_readings = 14 * 24 * 60 / 5 \n \n# Calculate the actual number of readings provided \nactual_readings = cgm_data.shape[0] \n \n# Calculate the percentage of CGM activity time \npercentage_cgm_activity_time = (actual_readings / total_possible_readings) * 100 \n \nunique_days, percentage_cgm_activity_time \n \n \n Hyperglycemia # Define hyperglycemia thresholds \nhyperglycemia_threshold = 180 \nsevere_hyperglycemia_threshold = 250 \n \n# Create a column for date without time to help with daily analysis \ncgm_data['Date'] = cgm_data['DateTime'].dt.date \n \n# Group the data by Date and calculate the percentage of readings above the hyperglycemia thresholds \ndaily_hyperglycemia = cgm_data.groupby('Date').apply( \n    lambda x: pd.Series({ \n        'Percent_above_180': (x['CGM'] > hyperglycemia_threshold).mean() * 100, \n        'Percent_above_250': (x['CGM'] > severe_hyperglycemia_threshold).mean() * 100, \n        'Max_CGM': x['CGM'].max(), \n        'Average_CGM': x['CGM'].mean() \n    }) \n).reset_index() \n \n# Find days with notable hyperglycemia \nnotable_hyperglycemia_days = daily_hyperglycemia[(daily_hyperglycemia['Percent_above_180'] > 0) | \n                                                 (daily_hyperglycemia['Percent_above_250'] > 0)] \n \nnotable_hyperglycemia_days \n \n*** [PAUSE] *** \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \n# Map the hours of the day to the specified time windows \ndef map_to_time_window(hour): \n    if 0 <= hour < 4: \n        return \"Late night\" \n    elif 4 <= hour < 8: \n        return \"Early morning\" \n    elif 8 <= hour < 12: \n        return \"Morning\" \n    elif 12 <= hour < 16: \n        return \"Afternoon\" \n    elif 16 <= hour < 20: \n        return \"Evening\" \n    else:  # 20 <= hour < 24 \n        return \"Night\" \n \n# Apply the mapping to the data \ncgm_data['TimeWindow'] = cgm_data['DateTime'].dt.hour.apply(map_to_time_window) \n \n# Calculate the average and maximum CGM for each time window across all days \nintraday_hyperglycemia = cgm_data.groupby(['Date', 'TimeWindow']).agg( \n    Average_CGM=('CGM', 'mean'), \n    Max_CGM=('CGM', 'max') \n).reset_index() \n \n# Identify time windows with hyperglycemia \nintraday_hyperglycemia_max = intraday_hyperglycemia[intraday_hyperglycemia['Max_CGM'] > \nhyperglycemia_threshold] \n \n# Find the time window with the highest average CGM \nmax_avg_cgm_per_day = intraday_hyperglycemia.groupby('Date')['Average_CGM'].idxmax() \nintraday_trends = intraday_hyperglycemia.loc[max_avg_cgm_per_day] \n \nintraday_trends.sort_values(by='Average_CGM', ascending=False).head() \n \n*** [PAUSE] *** \n \n# Filter data for severe hyperglycemia readings \nsevere_hyperglycemia_data = cgm_data[cgm_data['CGM'] > severe_hyperglycemia_threshold] \n \n# Identify consecutive readings spanning at least an hour (12 or more consecutive readings) \nsevere_hyperglycemia_data['ConsecutiveIndex'] = (severe_hyperglycemia_data['DateTime'].diff() != \npd.Timedelta(minutes=5)).cumsum() \nprolonged_events = severe_hyperglycemia_data.groupby(['Date', 'ConsecutiveIndex']).filter(lambda x: len(x) >= \n12) \n \n# Extract the start and end times of these events to identify the time of day \nprolonged_events_summary = prolonged_events.groupby(['Date', 'ConsecutiveIndex']).agg( \n    Start_Time=('DateTime', 'min'), \n    End_Time=('DateTime', 'max') \n).reset_index() \n \n# Map the start times to time windows \nprolonged_events_summary['TimeOfDay'] = \nprolonged_events_summary['Start_Time'].dt.hour.apply(map_to_time_window) \n \nprolonged_events_summary.drop(columns=['ConsecutiveIndex'], inplace=True) \n \nprolonged_events_summary \n \n \n Hypoglycemia # Define hypoglycemia thresholds \nhypoglycemia_threshold = 70 \nsevere_hypoglycemia_threshold = 54 \n \n# Group the data by Date and calculate the percentage of readings below the hypoglycemia thresholds \ndaily_hypoglycemia = cgm_data.groupby('Date').apply( \n    lambda x: pd.Series({ \n        'Percent_below_70': (x['CGM'] < hypoglycemia_threshold).mean() * 100, \n        'Percent_below_54': (x['CGM'] < severe_hypoglycemia_threshold).mean() * 100, \n        'Min_CGM': x['CGM'].min(), \n    }) \n).reset_index() \n \n# Find days with notable hypoglycemia \nnotable_hypoglycemia_days = daily_hypoglycemia[(daily_hypoglycemia['Percent_below_70'] > 0) | \n                                               (daily_hypoglycemia['Percent_below_54'] > 0)] \n \nnotable_hypoglycemia_days \n \n*** [PAUSE] *** \n \n# Calculate the average and minimum CGM for each time window across all days for hypoglycemia analysis \nintraday_hypoglycemia = cgm_data.groupby(['Date', 'TimeWindow']).agg( \n    Average_CGM=('CGM', 'mean'), \n    Min_CGM=('CGM', 'min') \n).reset_index() \n \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n# Identify time windows with hypoglycemia \nintraday_hypoglycemia_min = intraday_hypoglycemia[intraday_hypoglycemia['Min_CGM'] < hypoglycemia_threshold] \n \n# Find the time window with the lowest average CGM that still indicates hypoglycemia \nmin_avg_cgm_per_day = intraday_hypoglycemia.groupby('Date')['Average_CGM'].idxmin() \nintraday_hypoglycemia_trends = intraday_hypoglycemia.loc[min_avg_cgm_per_day] \n \nintraday_hypoglycemia_min.sort_values(by='Min_CGM', ascending=True).head() \n \n*** [PAUSE] ***  \n \n# Filter data for hypoglycemia readings \nhypoglycemia_data = cgm_data[cgm_data['CGM'] < hypoglycemia_threshold] \n \n# Identify consecutive readings indicating prolonged hypoglycemia \nhypoglycemia_data['ConsecutiveIndex'] = (hypoglycemia_data['DateTime'].diff() != \npd.Timedelta(minutes=5)).cumsum() \nprolonged_hypo_events = hypoglycemia_data.groupby(['Date', 'ConsecutiveIndex']).filter(lambda x: len(x) >= \n12) \n \n# Extract the start and end times of these hypoglycemia events to identify the time of day \nprolonged_hypo_summary = prolonged_hypo_events.groupby(['Date', 'ConsecutiveIndex']).agg( \n    Start_Time=('DateTime', 'min'), \n    End_Time=('DateTime', 'max') \n).reset_index() \n \n# Check if any prolonged events were found \nprolonged_hypo_summary.drop(columns=['ConsecutiveIndex'], inplace=True) \n \nprolonged_hypo_summary \n \n \n Glycemic \nVariability \n# Calculate the coefficient of variation (CV) for each day \ndaily_glycemic_variability = cgm_data.groupby('Date').apply( \n    lambda x: pd.Series({ \n        'Mean_CGM': x['CGM'].mean(), \n        'StdDev_CGM': x['CGM'].std(), \n        'CV': (x['CGM'].std() / x['CGM'].mean()) * 100  # CV formula \n    }) \n).reset_index() \n \n# Identify days with a high coefficient of variation (CV > 36%) \nhigh_cv_days = daily_glycemic_variability[daily_glycemic_variability['CV'] > 36] \n \nhigh_cv_days \n \n*** [PAUSE] *** \n \n# Calculate the interquartile range (IQR) for each time window across all days \nintraday_iqr = cgm_data.groupby('TimeWindow').apply( \n    lambda x: x['CGM'].quantile(0.75) - x['CGM'].quantile(0.25) \n).reset_index(name='IQR') \n \nintraday_iqr.sort_values(by='IQR', ascending=False) \n \n \n \nCase 4  Data Quality  # Convert 'Time' column to datetime format to extract unique days and calculate the period \ndata['DateTime'] = pd.to_datetime(data['Time']) \n \n# Count unique days \nunique_days = data['DateTime'].dt.date.nunique() \n \n# Calculate total number of readings \ntotal_readings = len(data) \n \n# Expected number of readings per day is 288 (since readings are every 5 minutes) \nexpected_readings_per_day = 288 \n \n# Calculate expected total readings for the observed period \nexpected_total_readings = expected_readings_per_day * unique_days \n \n# Calculate CGM activity percentage \ncgm_activity_percentage = (total_readings / expected_total_readings) * 100 \n \n# Assess quality of data \nquality_assessment = { \n    \"unique_days\": unique_days, \n    \"cgm_activity_percentage\": cgm_activity_percentage, \n    \"is_quality_good\": unique_days >= 14 and cgm_activity_percentage > 70 \n} \n \nquality_assessment \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \n \n Hyperglycemia # Define the hyperglycemia thresholds \nhyperglycemia_threshold = 180 \nsevere_hyperglycemia_threshold = 250 \n \n# Extract date and hour from the DateTime to facilitate analysis \ndata['Date'] = data['DateTime'].dt.date \ndata['Hour'] = data['DateTime'].dt.hour \n \n# Define 4-hour time windows and map them to general times of the day \ntime_window_mapping = { \n    0: \"Late night\", 4: \"Early morning\", 8: \"Morning\", \n    12: \"Afternoon\", 16: \"Evening\", 20: \"Night\" \n} \n \n# Function to map hour to time window \ndef map_hour_to_window(hour): \n    for window_start in sorted(time_window_mapping.keys()): \n        if hour < window_start: \n            return time_window_mapping[prev_window_start] \n        prev_window_start = window_start \n    return time_window_mapping[prev_window_start] \n \n# Apply mapping \ndata['TimeOfDay'] = data['Hour'].apply(map_hour_to_window) \n \n# a. Hyperglycemia Analysis \n# Interday Trends: Days with high levels or high percentage of hyperglycemia \ndaily_hyperglycemia = data[data['CGM'] > hyperglycemia_threshold].groupby('Date').size() \ndaily_severe_hyperglycemia = data[data['CGM'] > severe_hyperglycemia_threshold].groupby('Date').size() \ntotal_daily_readings = data.groupby('Date').size() \n \n# Calculate percentage of the day spent in hyperglycemia and severe hyperglycemia \ndaily_hyperglycemia_percentage = (daily_hyperglycemia / total_daily_readings) * 100 \ndaily_severe_hyperglycemia_percentage = (daily_severe_hyperglycemia / total_daily_readings) * 100 \n \n# Identify days with notable hyperglycemia \nnotable_hyperglycemia_days = daily_hyperglycemia_percentage[daily_hyperglycemia_percentage > 70] \nnotable_severe_hyperglycemia_days = \ndaily_severe_hyperglycemia_percentage[daily_severe_hyperglycemia_percentage > 0] \n \n# Intraday Trends: Max glucose in each 4-hour window \nintraday_trends = data.groupby(['Date', 'TimeOfDay'])['CGM'].max() \n \n# Prolonged Hyperglycemia: Periods over 250 for an hour or more \nprolonged_hyperglycemia = data[data['CGM'] > severe_hyperglycemia_threshold].groupby(['Date', \n'TimeOfDay']).filter(lambda x: len(x) >= 12) \n \n# Summary of findings for hyperglycemia analysis \nhyperglycemia_analysis_summary = { \n    \"notable_hyperglycemia_days\": notable_hyperglycemia_days.to_dict(), \n    \"notable_severe_hyperglycemia_days\": notable_severe_hyperglycemia_days.to_dict(), \n    \"prolonged_hyperglycemia_events\": prolonged_hyperglycemia.groupby(['Date', 'TimeOfDay']).size().to_dict() \n} \n \nhyperglycemia_analysis_summary \n \n \n Hypoglycemia # Define the hypoglycemia thresholds \nhypoglycemia_threshold = 70 \nsevere_hypoglycemia_threshold = 54 \n \n# b. Hypoglycemia Analysis \n# Interday Trends: Days with low levels or high percentage of hypoglycemia \ndaily_hypoglycemia = data[data['CGM'] < hypoglycemia_threshold].groupby('Date').size() \ndaily_severe_hypoglycemia = data[data['CGM'] < severe_hypoglycemia_threshold].groupby('Date').size() \n \n# Calculate percentage of the day spent in hypoglycemia and severe hypoglycemia \ndaily_hypoglycemia_percentage = (daily_hypoglycemia / total_daily_readings) * 100 \ndaily_severe_hypoglycemia_percentage = (daily_severe_hypoglycemia / total_daily_readings) * 100 \n \n# Identify days with notable hypoglycemia \nnotable_hypoglycemia_days = daily_hypoglycemia_percentage[daily_hypoglycemia_percentage > 0] \nnotable_severe_hypoglycemia_days = daily_severe_hypoglycemia_percentage[daily_severe_hypoglycemia_percentage \n> 0] \n \n# Intraday Trends: Times of the day when hypoglycemia occurs \nintraday_hypoglycemia_trends = data[data['CGM'] < hypoglycemia_threshold].groupby(['Date', \n'TimeOfDay']).size() \n \n# Prolonged Hypoglycemia: Periods below 70 for more than 60 minutes, or below 54 for more than 15 minutes \nprolonged_hypoglycemia_70 = data[data['CGM'] < hypoglycemia_threshold].groupby(['Date', \n'TimeOfDay']).filter(lambda x: len(x) > 12) \nprolonged_hypoglycemia_54 = data[data['CGM'] < severe_hypoglycemia_threshold].groupby(['Date', \n'TimeOfDay']).filter(lambda x: len(x) > 3) \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \n# Summary of findings for hypoglycemia analysis \nhypoglycemia_analysis_summary = { \n    \"notable_hypoglycemia_days\": notable_hypoglycemia_days.to_dict(), \n    \"notable_severe_hypoglycemia_days\": notable_severe_hypoglycemia_days.to_dict(), \n    \"prolonged_hypoglycemia_events_70\": prolonged_hypoglycemia_70.groupby(['Date', \n'TimeOfDay']).size().to_dict(), \n    \"prolonged_hypoglycemia_events_54\": prolonged_hypoglycemia_54.groupby(['Date', \n'TimeOfDay']).size().to_dict() \n} \n \nhypoglycemia_analysis_summary \n \n*** [ERROR] *** \n \n# Re-importing pandas after a reset \nimport pandas as pd \n \n# Re-load the uploaded CSV file \nfile_path = '/mnt/data/date_correctedmild_adult#006.csv' \ndata = pd.read_csv(file_path) \n \n# Convert 'Time' column to datetime format to facilitate analysis \ndata['DateTime'] = pd.to_datetime(data['Time']) \n \n# Define the hypoglycemia thresholds \nhypoglycemia_threshold = 70 \nsevere_hypoglycemia_threshold = 54 \n \n# Extract date and hour from the DateTime for analysis \ndata['Date'] = data['DateTime'].dt.date \ndata['Hour'] = data['DateTime'].dt.hour \n \n# Define 4-hour time windows and map them to general times of the day \ntime_window_mapping = { \n    0: \"Late night\", 4: \"Early morning\", 8: \"Morning\", \n    12: \"Afternoon\", 16: \"Evening\", 20: \"Night\" \n} \n \ndef map_hour_to_window(hour): \n    for window_start in sorted(time_window_mapping.keys()): \n        if hour < window_start: \n            return time_window_mapping[prev_window_start] \n        prev_window_start = window_start \n    return time_window_mapping[prev_window_start] \n \ndata['TimeOfDay'] = data['Hour'].apply(map_hour_to_window) \n \n# Proceed with hypoglycemia analysis \n \n# Interday trends \ndaily_hypoglycemia_counts = data[data['CGM'] < hypoglycemia_threshold].groupby('Date')['CGM'].count() \ndaily_severe_hypoglycemia_counts = data[data['CGM'] < \nsevere_hypoglycemia_threshold].groupby('Date')['CGM'].count() \n \n# Calculate the total number of readings per day for normalization \ntotal_readings_per_day = data.groupby('Date')['CGM'].count() \n \n# Calculate the percentage of the day spent in hypoglycemia and severe hypoglycemia \npercentage_daily_hypoglycemia = (daily_hypoglycemia_counts / total_readings_per_day) * 100 \npercentage_daily_severe_hypoglycemia = (daily_severe_hypoglycemia_counts / total_readings_per_day) * 100 \n \n# Intraday trends \nintraday_hypoglycemia = data[data['CGM'] < hypoglycemia_threshold].groupby(['TimeOfDay'])['CGM'].count() \nintraday_severe_hypoglycemia = data[data['CGM'] < \nsevere_hypoglycemia_threshold].groupby(['TimeOfDay'])['CGM'].count() \n \n# Prolonged hypoglycemia \nprolonged_hypoglycemia = data[data['CGM'] < hypoglycemia_threshold] \nprolonged_severe_hypoglycemia = data[data['CGM'] < severe_hypoglycemia_threshold] \n \n# Group by Date and TimeOfDay for aggregation \nprolonged_hypoglycemia_groups = prolonged_hypoglycemia.groupby(['Date', 'TimeOfDay'])['CGM'].count() \nprolonged_severe_hypoglycemia_groups = prolonged_severe_hypoglycemia.groupby(['Date', \n'TimeOfDay'])['CGM'].count() \n \n# Filter for periods longer than the thresholds \nprolonged_hypoglycemia_events = prolonged_hypoglycemia_groups[prolonged_hypoglycemia_groups > 12] # More than \n60 minutes \nprolonged_severe_hypoglycemia_events = \nprolonged_severe_hypoglycemia_groups[prolonged_severe_hypoglycemia_groups > 3] # More than 15 minutes \n \nhypoglycemia_analysis = { \n    \"percentage_daily_hypoglycemia\": percentage_daily_hypoglycemia.to_dict(), \n    \"percentage_daily_severe_hypoglycemia\": percentage_daily_severe_hypoglycemia.to_dict(), \n    \"prolonged_hypoglycemia_events\": prolonged_hypoglycemia_events.to_dict(), \n    \"prolonged_severe_hypoglycemia_events\": prolonged_severe_hypoglycemia_events.to_dict(), \n} \n \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nhypoglycemia_analysis \n \n \n Glycemic \nVariability \n# Calculate the coefficient of variation (CV) for each day \ndaily_cv = data.groupby('Date')['CGM'].std() / data.groupby('Date')['CGM'].mean() * 100 \n \n# Calculate the interquartile range (IQR) for each 24-hour period across the dataset \ndaily_iqr = data.groupby(['Date'])['CGM'].quantile(0.75) - data.groupby(['Date'])['CGM'].quantile(0.25) \n \n# Calculate the IQR for each time window of the day across the dataset \ntime_window_iqr = data.groupby(['TimeOfDay'])['CGM'].quantile(0.75) - \ndata.groupby(['TimeOfDay'])['CGM'].quantile(0.25) \n \nglycemic_variability_analysis = { \n    \"daily_coefficient_of_variation\": daily_cv.to_dict(), \n    \"daily_interquartile_range\": daily_iqr.to_dict(), \n    \"time_window_interquartile_range\": time_window_iqr.to_dict(), \n} \n \nglycemic_variability_analysis \n \n \n \nCase 5 Data Quality  from datetime import datetime \n \n# Convert 'day' to datetime for accurate analysis \ncgm_data['day'] = pd.to_datetime(cgm_data['day']) \n \n# Count the number of unique days in the dataset \nunique_days = cgm_data['day'].nunique() \n \n# Calculate the total possible readings in 14 days (assuming data is recorded every 5 minutes) \ntotal_possible_readings = 14 * 24 * 60 / 5 \n \n# Calculate the actual number of readings in the dataset \nactual_readings = len(cgm_data) \n \n# Calculate the percentage of CGM activity time \ncgm_activity_percentage = (actual_readings / total_possible_readings) * 100 \n \nunique_days, cgm_activity_percentage \n \n \n Hyperglycemia import numpy as np \n \n# Define the hyperglycemia thresholds \nhyperglycemia_threshold = 180 \nsevere_hyperglycemia_threshold = 250 \n \n# Add a column for datetime combining 'day' and 'Time' \ncgm_data['datetime'] = pd.to_datetime(cgm_data['day'].astype(str) + ' ' + cgm_data['Time']) \n \n# Function to classify time of day into morning, afternoon, etc. \ndef classify_time_of_day(hour): \n    if 0 <= hour < 6: \n        return 'Night' \n    elif 6 <= hour < 12: \n        return 'Morning' \n    elif 12 <= hour < 18: \n        return 'Afternoon' \n    else: \n        return 'Evening' \n \n# Add a column for time of day \ncgm_data['time_of_day'] = cgm_data['datetime'].dt.hour.apply(classify_time_of_day) \n \n# Interday Trends: Calculate percentage of day spent in hyperglycemia and severe hyperglycemia \ninterday_hyperglycemia = cgm_data.groupby('day').apply(lambda x: (x['CGM'] > hyperglycemia_threshold).mean() \n* 100) \ninterday_severe_hyperglycemia = cgm_data.groupby('day').apply(lambda x: (x['CGM'] > \nsevere_hyperglycemia_threshold).mean() * 100) \n \n# Intraday Trends: Calculate average and maximum glucose for each time window \nintraday_trends = cgm_data.groupby(['day', 'time_of_day']).agg({'CGM': ['mean', 'max']}) \n \n# Prolonged Hyperglycemia: Identify periods where glucose is above 250 for over an hour \ncgm_data['severe_hyperglycemia'] = cgm_data['CGM'] > severe_hyperglycemia_threshold \nprolonged_hyperglycemia = cgm_data.groupby(['day', 'time_of_day']).apply(lambda x: \n(x['severe_hyperglycemia'].rolling(window=12).sum() >= 12).any()) \n \n# Prepare data for summary \ninterday_summary = interday_hyperglycemia.describe() \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nintraday_summary = intraday_trends.describe() \nprolonged_hyperglycemia_summary = prolonged_hyperglycemia.describe() \n \ninterday_summary, intraday_summary, prolonged_hyperglycemia_summary \n \n*** [ERROR] *** \n \n# There seems to be an issue with the datetime conversion \n# Let's correct this by ensuring that the 'datetime' column is properly formatted \n \n# Re-examine the 'Time' and 'day' columns to identify the correct format \ncgm_data[['day', 'Time']].head() \n \n*** [PAUSE] *** \n \n# Correct the 'datetime' column by using only the 'Time' column \ncgm_data['datetime'] = pd.to_datetime(cgm_data['Time']) \n \n# Add a column for time of day \ncgm_data['time_of_day'] = cgm_data['datetime'].dt.hour.apply(classify_time_of_day) \n \n# Re-attempt the analysis with corrected datetime \n \n# Interday Trends: Calculate percentage of day spent in hyperglycemia and severe hyperglycemia \ninterday_hyperglycemia = cgm_data.groupby(cgm_data['datetime'].dt.date).apply(lambda x: (x['CGM'] > \nhyperglycemia_threshold).mean() * 100) \ninterday_severe_hyperglycemia = cgm_data.groupby(cgm_data['datetime'].dt.date).apply(lambda x: (x['CGM'] > \nsevere_hyperglycemia_threshold).mean() * 100) \n \n# Intraday Trends: Calculate average and maximum glucose for each time window \nintraday_trends = cgm_data.groupby(['datetime', 'time_of_day']).agg({'CGM': ['mean', 'max']}) \n \n# Prolonged Hyperglycemia: Identify periods where glucose is above 250 for over an hour \nprolonged_hyperglycemia = cgm_data.groupby(['datetime', 'time_of_day']).apply(lambda x: \n(x['severe_hyperglycemia'].rolling(window=12).sum() >= 12).any()) \n \n# Prepare data for summary \ninterday_summary = interday_hyperglycemia.describe() \nintraday_summary = intraday_trends.describe() \nprolonged_hyperglycemia_summary = prolonged_hyperglycemia.describe() \n \ninterday_summary, intraday_summary, prolonged_hyperglycemia_summary \n \n*** [ERROR] *** \n \n# Correcting the issue by creating the 'severe_hyperglycemia' column \ncgm_data['severe_hyperglycemia'] = cgm_data['CGM'] > severe_hyperglycemia_threshold \n \n# Re-attempt the analysis with the corrected data \n \n# Interday Trends: Calculate percentage of day spent in hyperglycemia and severe hyperglycemia \ninterday_hyperglycemia = cgm_data.groupby(cgm_data['datetime'].dt.date).apply(lambda x: (x['CGM'] > \nhyperglycemia_threshold).mean() * 100) \ninterday_severe_hyperglycemia = cgm_data.groupby(cgm_data['datetime'].dt.date).apply(lambda x: (x['CGM'] > \nsevere_hyperglycemia_threshold).mean() * 100) \n \n# Intraday Trends: Calculate average and maximum glucose for each time window \nintraday_trends = cgm_data.groupby(['datetime', 'time_of_day']).agg({'CGM': ['mean', 'max']}) \n \n# Prolonged Hyperglycemia: Identify periods where glucose is above 250 for over an hour \nprolonged_hyperglycemia = cgm_data.groupby(['datetime', 'time_of_day']).apply(lambda x: \n(x['severe_hyperglycemia'].rolling(window=12).sum() >= 12).any()) \n \n# Prepare data for summary \ninterday_summary = interday_hyperglycemia.describe() \nintraday_summary = intraday_trends.describe() \nprolonged_hyperglycemia_summary = prolonged_hyperglycemia.describe() \n \ninterday_summary, intraday_summary, prolonged_hyperglycemia_summary \n \n \n \n \n Hypoglycemia # Define the hypoglycemia thresholds \nmild_hypoglycemia_threshold = 70 \nsevere_hypoglycemia_threshold = 54 \n \n# Interday Trends: Calculate percentage of day spent in hypoglycemia (below 70 and 54 mg/dL) \ninterday_mild_hypoglycemia = cgm_data.groupby(cgm_data['datetime'].dt.date).apply(lambda x: (x['CGM'] < \nmild_hypoglycemia_threshold).mean() * 100) \ninterday_severe_hypoglycemia = cgm_data.groupby(cgm_data['datetime'].dt.date).apply(lambda x: (x['CGM'] < \nsevere_hypoglycemia_threshold).mean() * 100) \n \n# Intraday Trends: Identify if hypoglycemia tends to occur at specific times of the day \nintraday_hypoglycemia = cgm_data.groupby(['datetime', 'time_of_day']).apply(lambda x: (x['CGM'] < \nmild_hypoglycemia_threshold).any()) \n \n# Prolonged Hypoglycemia: Identify periods where glucose is below 70 for more than 60 minutes, or below 54 \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nfor more than 15 minutes \nprolonged_mild_hypoglycemia = cgm_data.groupby(['datetime', 'time_of_day']).apply(lambda x: (x['CGM'] < \nmild_hypoglycemia_threshold).rolling(window=12).sum() >= 12).any() \nprolonged_severe_hypoglycemia = cgm_data.groupby(['datetime', 'time_of_day']).apply(lambda x: (x['CGM'] < \nsevere_hypoglycemia_threshold).rolling(window=3).sum() >= 3).any() \n \n# Prepare data for summary \ninterday_mild_hypoglycemia_summary = interday_mild_hypoglycemia.describe() \ninterday_severe_hypoglycemia_summary = interday_severe_hypoglycemia.describe() \nintraday_hypoglycemia_summary = intraday_hypoglycemia.describe() \nprolonged_mild_hypoglycemia_summary = prolonged_mild_hypoglycemia.describe() \nprolonged_severe_hypoglycemia_summary = prolonged_severe_hypoglycemia.describe() \n \n(interday_mild_hypoglycemia_summary, interday_severe_hypoglycemia_summary, intraday_hypoglycemia_summary, \nprolonged_mild_hypoglycemia_summary, prolonged_severe_hypoglycemia_summary) \n \n \n*** [ERROR] *** \n \n# Correcting the analysis for prolonged hypoglycemia \n \n# Prolonged Hypoglycemia: Identify periods where glucose is below 70 for more than 60 minutes, or below 54 \nfor more than 15 minutes \nprolonged_mild_hypoglycemia = cgm_data.groupby(cgm_data['datetime'].dt.date).apply(lambda x: (x['CGM'] < \nmild_hypoglycemia_threshold).rolling(window=12).sum() >= 12).any() \nprolonged_severe_hypoglycemia = cgm_data.groupby(cgm_data['datetime'].dt.date).apply(lambda x: (x['CGM'] < \nsevere_hypoglycemia_threshold).rolling(window=3).sum() >= 3).any() \n \n# Prepare data for summary \nprolonged_mild_hypoglycemia_summary = prolonged_mild_hypoglycemia.describe() \nprolonged_severe_hypoglycemia_summary = prolonged_severe_hypoglycemia.describe() \n \n(prolonged_mild_hypoglycemia_summary, prolonged_severe_hypoglycemia_summary) \n \n*** [ERROR] *** \n \n# Refining the analysis for prolonged hypoglycemia \n \n# Identify specific days and times when glucose is below 70 for more than 60 minutes \nprolonged_mild_hypoglycemia_events = cgm_data[cgm_data['CGM'] < \nmild_hypoglycemia_threshold].groupby(cgm_data['datetime'].dt.date).rolling(window=12).sum() \nprolonged_mild_hypoglycemia_days = \nprolonged_mild_hypoglycemia_events[prolonged_mild_hypoglycemia_events['CGM'] >= \n12].index.get_level_values(0).unique() \n \n# Identify specific days and times when glucose is below 54 for more than 15 minutes \nprolonged_severe_hypoglycemia_events = cgm_data[cgm_data['CGM'] < \nsevere_hypoglycemia_threshold].groupby(cgm_data['datetime'].dt.date).rolling(window=3).sum() \nprolonged_severe_hypoglycemia_days = \nprolonged_severe_hypoglycemia_events[prolonged_severe_hypoglycemia_events['CGM'] >= \n3].index.get_level_values(0).unique() \n \nprolonged_mild_hypoglycemia_days, prolonged_severe_hypoglycemia_days \n \n \n Glycemic \nVariability \n# Calculate Coefficient of Variation (CV) for each day \ndaily_cv = cgm_data.groupby(cgm_data['datetime'].dt.date).apply(lambda x: (x['CGM'].std() / x['CGM'].mean()) \n* 100) \n \n# Identify days with high coefficient of variation \nhigh_cv_days = daily_cv[daily_cv > 36] \n \n# Calculate the Interquartile Range (IQR) for each time window of the day \ndaily_iqr = cgm_data.groupby(['datetime', 'time_of_day'])['CGM'].agg(lambda x: x.quantile(0.75) - \nx.quantile(0.25)) \n \n# Identify times of the day with higher IQR \nhigh_iqr_times = daily_iqr.groupby('time_of_day').mean() \n \nhigh_cv_days, high_iqr_times \n \n \nCase 6  Data Quality  from datetime import datetime \n \n# Converting the 'Time' column to datetime format \ncgm_data['Time'] = pd.to_datetime(cgm_data['Time'], format='%m/%d/%y %H:%M') \n \n# Checking the total number of unique days in the dataset \nunique_days = cgm_data['Time'].dt.date.nunique() \n \n# Calculating the total number of readings and the expected number of readings for 14 days \n# Assuming CGM data is collected every 5 minutes, there should be 288 readings per day (24*60/5) \ntotal_readings = len(cgm_data) \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nexpected_readings_per_day = 24 * 60 / 5 \nexpected_readings_14_days = expected_readings_per_day * 14 \n \n# Calculating the percentage of CGM activity time \nactivity_percentage = (total_readings / expected_readings_14_days) * 100 \n \nunique_days, activity_percentage \n \n \n Hyperglycemia import numpy as np \n \n# Defining the hyperglycemia thresholds \nhyperglycemia_threshold = 180 \nsevere_hyperglycemia_threshold = 250 \n \n# Adding a column for the date and the hour to facilitate analysis \ncgm_data['Date'] = cgm_data['Time'].dt.date \ncgm_data['Hour'] = cgm_data['Time'].dt.hour \n \n# Breaking the day into 4-hour time windows and mapping them to general times of the day \ndef map_time_window(hour): \n    if 0 <= hour < 4: \n        return \"Late night\" \n    elif 4 <= hour < 8: \n        return \"Early morning\" \n    elif 8 <= hour < 12: \n        return \"Morning\" \n    elif 12 <= hour < 16: \n        return \"Afternoon\" \n    elif 16 <= hour < 20: \n        return \"Evening\" \n    else: \n        return \"Night\" \n \ncgm_data['Time Window'] = cgm_data['Hour'].apply(map_time_window) \n \n# Analyzing for hyperglycemia \n# 1. Interday Trends \ninterday_hyperglycemia = cgm_data[cgm_data['CGM'] > \nhyperglycemia_threshold].groupby('Date')['CGM'].agg(['count', 'mean']) \ninterday_hyperglycemia['Percentage of Day'] = (interday_hyperglycemia['count'] / expected_readings_per_day) * \n100 \ninterday_severe_hyperglycemia = cgm_data[cgm_data['CGM'] > \nsevere_hyperglycemia_threshold].groupby('Date')['CGM'].agg(['count', 'mean']) \ninterday_severe_hyperglycemia['Percentage of Day'] = (interday_severe_hyperglycemia['count'] / \nexpected_readings_per_day) * 100 \n \n# 2. Intraday Trends \nintraday_hyperglycemia = cgm_data.groupby('Time Window')['CGM'].agg(['max', 'mean']) \n \n# 3. Prolonged Hyperglycemia \n# Checking for periods where glucose readings are over 250 for an hour or more \ncgm_data['Severe Hyperglycemia'] = cgm_data['CGM'] > severe_hyperglycemia_threshold \nprolonged_hyperglycemia = cgm_data.groupby(['Date', 'Time Window'])['Severe \nHyperglycemia'].rolling(window=12).sum() \nprolonged_hyperglycemia = prolonged_hyperglycemia.reset_index() \nprolonged_hyperglycemia = prolonged_hyperglycemia[prolonged_hyperglycemia['Severe Hyperglycemia'] >= 12] \n \n# Selecting relevant data to summarize \ninterday_hyperglycemia_summary = interday_hyperglycemia.sort_values(by='Percentage of Day', \nascending=False).head() \ninterday_severe_hyperglycemia_summary = interday_severe_hyperglycemia.sort_values(by='Percentage of Day', \nascending=False).head() \nintraday_hyperglycemia_summary = intraday_hyperglycemia.sort_values(by='max', ascending=False).head() \nprolonged_hyperglycemia_summary = prolonged_hyperglycemia.drop_duplicates(subset=['Date', 'Time Window']) \n \ninterday_hyperglycemia_summary, interday_severe_hyperglycemia_summary, intraday_hyperglycemia_summary, \nprolonged_hyperglycemia_summary.head() \n \n \n Hypoglycemia # Defining the hypoglycemia thresholds \nhypoglycemia_threshold = 70 \nsevere_hypoglycemia_threshold = 54 \n \n# Analyzing for hypoglycemia \n# 1. Interday Trends \ninterday_hypoglycemia = cgm_data[cgm_data['CGM'] < \nhypoglycemia_threshold].groupby('Date')['CGM'].agg(['count', 'mean']) \ninterday_hypoglycemia['Percentage of Day'] = (interday_hypoglycemia['count'] / expected_readings_per_day) * \n100 \ninterday_severe_hypoglycemia = cgm_data[cgm_data['CGM'] < \nsevere_hypoglycemia_threshold].groupby('Date')['CGM'].agg(['count', 'mean']) \ninterday_severe_hypoglycemia['Percentage of Day'] = (interday_severe_hypoglycemia['count'] / \nexpected_readings_per_day) * 100 \n \n# 2. Intraday Trends \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nintraday_hypoglycemia = cgm_data.groupby('Time Window')['CGM'].agg(['min', 'mean']) \n \n# 3. Prolonged Hypoglycemia \n# Checking for periods where glucose readings are below 70 for more than 60 minutes, and below 54 for more \nthan 15 minutes \ncgm_data['Hypoglycemia'] = cgm_data['CGM'] < hypoglycemia_threshold \ncgm_data['Severe Hypoglycemia'] = cgm_data['CGM'] < severe_hypoglycemia_threshold \nprolonged_hypoglycemia = cgm_data.groupby(['Date', 'Time Window'])['Hypoglycemia'].rolling(window=12).sum() \nprolonged_hypoglycemia = prolonged_hypoglycemia.reset_index() \nprolonged_hypoglycemia = prolonged_hypoglycemia[prolonged_hypoglycemia['Hypoglycemia'] >= 12] \n \nprolonged_severe_hypoglycemia = cgm_data.groupby(['Date', 'Time Window'])['Severe \nHypoglycemia'].rolling(window=3).sum() \nprolonged_severe_hypoglycemia = prolonged_severe_hypoglycemia.reset_index() \nprolonged_severe_hypoglycemia = prolonged_severe_hypoglycemia[prolonged_severe_hypoglycemia['Severe \nHypoglycemia'] >= 3] \n \n# Selecting relevant data to summarize \ninterday_hypoglycemia_summary = interday_hypoglycemia.sort_values(by='Percentage of Day', \nascending=False).head() \ninterday_severe_hypoglycemia_summary = interday_severe_hypoglycemia.sort_values(by='Percentage of Day', \nascending=False).head() \nintraday_hypoglycemia_summary = intraday_hypoglycemia.sort_values(by='min').head() \nprolonged_hypoglycemia_summary = prolonged_hypoglycemia.drop_duplicates(subset=['Date', 'Time Window']) \nprolonged_severe_hypoglycemia_summary = prolonged_severe_hypoglycemia.drop_duplicates(subset=['Date', 'Time \nWindow']) \n \ninterday_hypoglycemia_summary, interday_severe_hypoglycemia_summary, intraday_hypoglycemia_summary, \nprolonged_hypoglycemia_summary.head(), prolonged_severe_hypoglycemia_summary.head() \n \n*** [ERROR] *** \n \n# Re-importing pandas and reloading the dataset due to execution state reset \nimport pandas as pd \n \n# Reloading the dataset \nfile_path = '/mnt/data/date_correcteddinner_adult#006.csv' \ncgm_data = pd.read_csv(file_path) \n \n# Converting the 'Time' column to datetime format \ncgm_data['Time'] = pd.to_datetime(cgm_data['Time'], format='%m/%d/%y %H:%M') \n \n# Adding necessary columns for analysis \ncgm_data['Date'] = cgm_data['Time'].dt.date \ncgm_data['Hour'] = cgm_data['Time'].dt.hour \ncgm_data['Time Window'] = cgm_data['Hour'].apply(lambda hour:  \n    \"Late night\" if 0 <= hour < 4 else \n    \"Early morning\" if 4 <= hour < 8 else \n    \"Morning\" if 8 <= hour < 12 else \n    \"Afternoon\" if 12 <= hour < 16 else \n    \"Evening\" if 16 <= hour < 20 else \n    \"Night\") \n \n# Defining hypoglycemia thresholds \nhypoglycemia_threshold = 70 \nsevere_hypoglycemia_threshold = 54 \n \n# Analyzing for hypoglycemia \n# Interday and Intraday Trends \ninterday_hypoglycemia = cgm_data[cgm_data['CGM'] < \nhypoglycemia_threshold].groupby('Date')['CGM'].agg(['count', 'mean']) \ninterday_hypoglycemia['Percentage of Day'] = (interday_hypoglycemia['count'] / (24 * 60 / 5)) * 100 \ninterday_severe_hypoglycemia = cgm_data[cgm_data['CGM'] < \nsevere_hypoglycemia_threshold].groupby('Date')['CGM'].agg(['count', 'mean']) \ninterday_severe_hypoglycemia['Percentage of Day'] = (interday_severe_hypoglycemia['count'] / (24 * 60 / 5)) * \n100 \nintraday_hypoglycemia = cgm_data.groupby('Time Window')['CGM'].agg(['min', 'mean']) \n \n# Prolonged Hypoglycemia \ncgm_data['Hypoglycemia'] = cgm_data['CGM'] < hypoglycemia_threshold \ncgm_data['Severe Hypoglycemia'] = cgm_data['CGM'] < severe_hypoglycemia_threshold \nprolonged_hypoglycemia = cgm_data.groupby(['Date', 'Time \nWindow'])['Hypoglycemia'].rolling(window=12).sum().reset_index(name='Count') \nprolonged_hypoglycemia = prolonged_hypoglycemia[prolonged_hypoglycemia['Count'] >= 12] \n \nprolonged_severe_hypoglycemia = cgm_data.groupby(['Date', 'Time Window'])['Severe \nHypoglycemia'].rolling(window=3).sum().reset_index(name='Count') \nprolonged_severe_hypoglycemia = prolonged_severe_hypoglycemia[prolonged_severe_hypoglycemia['Count'] >= 3] \n \n# Selecting relevant data to summarize \ninterday_hypoglycemia_summary = interday_hypoglycemia.sort_values(by='Percentage of Day', \nascending=False).head() \ninterday_severe_hypoglycemia_summary = interday_severe_hypoglycemia.sort_values(by='Percentage of Day', \nascending=False).head() \nintraday_hypoglycemia_summary = intraday_hypoglycemia.sort_values(by='min').head() \nprolonged_hypoglycemia_summary = prolonged_hypoglycemia.drop_duplicates(subset=['Date', 'Time Window']) \nprolonged_severe_hypoglycemia_summary = prolonged_severe_hypoglycemia.drop_duplicates(subset=['Date', 'Time \nWindow']) \n \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \ninterday_hypoglycemia_summary, interday_severe_hypoglycemia_summary, intraday_hypoglycemia_summary, \nprolonged_hypoglycemia_summary.head(), prolonged_severe_hypoglycemia_summary.head() \n \n \n Glycemic \nVariability \n# Re-importing numpy and calculating the coefficient of variation and interquartile range \nimport numpy as np \n \n# Calculating Coefficient of Variation (CV) for each day \ndaily_cv = cgm_data.groupby('Date')['CGM'].agg(['mean', 'std']) \ndaily_cv['Coefficient of Variation'] = (daily_cv['std'] / daily_cv['mean']) * 100 \n \n# Calculating Interquartile Range (IQR) for each 24-hour time window \niqr_by_time_window = cgm_data.groupby('Time Window')['CGM'].agg(lambda x: np.percentile(x, 75) - \nnp.percentile(x, 25)) \n \n# Selecting relevant data to summarize \nhigh_cv_days = daily_cv[daily_cv['Coefficient of Variation'] > 36] \nhigh_cv_days_summary = high_cv_days.sort_values(by='Coefficient of Variation', ascending=False) \niqr_by_time_window_summary = iqr_by_time_window.sort_values(ascending=False) \n \nhigh_cv_days_summary, iqr_by_time_window_summary \n \n \nCase 7  Data Quality  from datetime import datetime \n \n# Convert the 'Time' column to datetime format \ncgm_data['Time'] = pd.to_datetime(cgm_data['Time'], format='%m/%d/%y %H:%M') \n \n# Check the unique days in the dataset \nunique_days = cgm_data['Time'].dt.date.nunique() \n \n# Calculate the total possible readings (assuming 5-minute intervals in 24 hours) \ntotal_readings_per_day = 24 * 60 / 5  # 288 readings per day \ntotal_possible_readings = total_readings_per_day * unique_days \n \n# Calculate the actual number of readings \nactual_readings = len(cgm_data) \n \n# Calculate the percentage of CGM activity time \npercentage_activity_time = (actual_readings / total_possible_readings) * 100 \n \nunique_days, percentage_activity_time \n \n \n Hyperglycemia import numpy as np \n \n# Define the hyperglycemia thresholds \nhyperglycemia_threshold = 180 \nsevere_hyperglycemia_threshold = 250 \n \n# Adding a column for date and a column for the 4-hour time window \ncgm_data['Date'] = cgm_data['Time'].dt.date \ncgm_data['TimeWindow'] = cgm_data['Time'].dt.hour // 4 \n \n# Map the time window to general times of the day \ntime_window_map = { \n    0: \"Late Night\", \n    1: \"Early Morning\", \n    2: \"Morning\", \n    3: \"Afternoon\", \n    4: \"Evening\", \n    5: \"Night\" \n} \ncgm_data['TimeOfDay'] = cgm_data['TimeWindow'].map(time_window_map) \n \n# Interday Trends \n# Group by date and calculate the percentage of readings above each threshold \ndaily_hyperglycemia = cgm_data.groupby('Date').apply( \n    lambda x: pd.Series({ \n        'PercentAbove180': np.mean(x['CGM'] > hyperglycemia_threshold) * 100, \n        'PercentAbove250': np.mean(x['CGM'] > severe_hyperglycemia_threshold) * 100 \n    }) \n) \n \n# Intraday Trends \n# Group by time of day and calculate average glucose level \nintraday_avg_glucose = cgm_data.groupby('TimeOfDay')['CGM'].mean() \n \n# Prolonged Hyperglycemia \n# Check for periods where glucose readings are over 250 for an hour or more \nprolonged_hyperglycemia = cgm_data[cgm_data['CGM'] > severe_hyperglycemia_threshold].groupby(['Date', \n'TimeOfDay']).size() \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nprolonged_hyperglycemia = prolonged_hyperglycemia[prolonged_hyperglycemia >= 12]  # 12 consecutive readings \n \ndaily_hyperglycemia, intraday_avg_glucose, prolonged_hyperglycemia \n \n \n Hypoglycemia # Define the hypoglycemia thresholds \nhypoglycemia_threshold = 70 \nsevere_hypoglycemia_threshold = 54 \n \n# Interday Trends \n# Group by date and calculate the percentage of readings below each threshold \ndaily_hypoglycemia = cgm_data.groupby('Date').apply( \n    lambda x: pd.Series({ \n        'PercentBelow70': np.mean(x['CGM'] < hypoglycemia_threshold) * 100, \n        'PercentBelow54': np.mean(x['CGM'] < severe_hypoglycemia_threshold) * 100 \n    }) \n) \n \n# Intraday Trends \n# Group by time of day and check for hypoglycemia \nintraday_hypoglycemia = cgm_data.groupby('TimeOfDay').apply( \n    lambda x: pd.Series({ \n        'PercentBelow70': np.mean(x['CGM'] < hypoglycemia_threshold) * 100, \n        'PercentBelow54': np.mean(x['CGM'] < severe_hypoglycemia_threshold) * 100 \n    }) \n) \n \n# Prolonged Hypoglycemia \n# Check for periods where glucose readings are below 70 for more than 60 minutes or below 54 for more than 15 \nminutes \nprolonged_hypoglycemia_70 = cgm_data[cgm_data['CGM'] < hypoglycemia_threshold].groupby(['Date', \n'TimeOfDay']).size() \nprolonged_hypoglycemia_70 = prolonged_hypoglycemia_70[prolonged_hypoglycemia_70 >= 12]  # 60 minutes \n \nprolonged_hypoglycemia_54 = cgm_data[cgm_data['CGM'] < severe_hypoglycemia_threshold].groupby(['Date', \n'TimeOfDay']).size() \nprolonged_hypoglycemia_54 = prolonged_hypoglycemia_54[prolonged_hypoglycemia_54 >= 3]  # 15 minutes \n \ndaily_hypoglycemia, intraday_hypoglycemia, prolonged_hypoglycemia_70, prolonged_hypoglycemia_54 \n \n \n Glycemic \nVariability \n# Calculate Coefficient of Variation for each day \ndaily_cv = cgm_data.groupby('Date')['CGM'].std() / cgm_data.groupby('Date')['CGM'].mean() * 100 \n \n# Calculate Interquartile Range for each 24-hour period \ndaily_iqr = cgm_data.groupby(['Date', 'TimeOfDay'])['CGM'].quantile(0.75) - cgm_data.groupby(['Date', \n'TimeOfDay'])['CGM'].quantile(0.25) \n \ndaily_cv, daily_iqr.groupby('TimeOfDay').mean() \n \n \n \nCase 8  Data Quality  from datetime import datetime \n \n# Convert 'Time' column to datetime format \ndata['datetime'] = pd.to_datetime(data['Time'], format='%m/%d/%y %H:%M') \n \n# Calculate the number of unique days in the data \nunique_days = data['datetime'].dt.date.nunique() \n \n# Calculate total number of readings and expected readings \ntotal_readings = data.shape[0] \nexpected_readings_per_day = 24 * 60 / 5  # 5-minute intervals in a day \nexpected_total_readings = expected_readings_per_day * unique_days \n \n# Calculate CGM activity time as a percentage \ncgm_activity_percentage = (total_readings / expected_total_readings) * 100 \n \nunique_days, cgm_activity_percentage \n \n \n Hyperglycemia # Define hyperglycemia thresholds \nhyperglycemia_threshold = 180 \nsevere_hyperglycemia_threshold = 250 \n \n# Add a column for the 4-hour time window \ndata['time_window'] = data['datetime'].dt.hour // 4 \n \n# Map the 4-hour time window to general times of the day \ntime_of_day_mapping = { \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n    0: \"Late night\", \n    1: \"Early morning\", \n    2: \"Morning\", \n    3: \"Afternoon\", \n    4: \"Evening\", \n    5: \"Night\" \n} \ndata['time_of_day'] = data['time_window'].map(time_of_day_mapping) \n \n# Analyze hyperglycemia \n# 1. Interday trends \ndaily_hyperglycemia = data[data['CGM'] > \nhyperglycemia_threshold].groupby(data['datetime'].dt.date).agg(['count', 'mean', 'max']) \ndaily_severe_hyperglycemia = data[data['CGM'] > \nsevere_hyperglycemia_threshold].groupby(data['datetime'].dt.date).agg(['count', 'mean', 'max']) \n \n# 2. Intraday trends \nintraday_hyperglycemia = data.groupby('time_of_day')['CGM'].agg(['mean', 'max']) \n \n# 3. Prolonged hyperglycemia \n# Identify continuous sequences of severe hyperglycemia readings lasting an hour or more \ndata['severe_hyperglycemia'] = data['CGM'] > severe_hyperglycemia_threshold \ndata['group'] = (data['severe_hyperglycemia'] != data['severe_hyperglycemia'].shift()).cumsum() \nprolonged_hyperglycemia_groups = data[data['severe_hyperglycemia']].groupby('group').agg(count=('CGM', \n'count'), start=('datetime', 'min'), end=('datetime', 'max')) \nprolonged_hyperglycemia_events = prolonged_hyperglycemia_groups[prolonged_hyperglycemia_groups['count'] >= \n12] \n \n# Since we're not displaying tables as per instructions, let's summarize the findings instead \ninterday_hyperglycemia_summary = daily_hyperglycemia.shape[0] > 0 \ninterday_severe_hyperglycemia_summary = daily_severe_hyperglycemia.shape[0] > 0 \nprolonged_hyperglycemia_summary = prolonged_hyperglycemia_events.shape[0] > 0 \n \ninterday_hyperglycemia_summary, interday_severe_hyperglycemia_summary, prolonged_hyperglycemia_summary \n \n \n Hypoglycemia # Define hypoglycemia thresholds \nhypoglycemia_threshold = 70 \nsevere_hypoglycemia_threshold = 54 \n \n# Analyze hypoglycemia \n# 1. Interday trends \ndaily_hypoglycemia = data[data['CGM'] < \nhypoglycemia_threshold].groupby(data['datetime'].dt.date).agg(['count', 'mean', 'min']) \ndaily_severe_hypoglycemia = data[data['CGM'] < \nsevere_hypoglycemia_threshold].groupby(data['datetime'].dt.date).agg(['count', 'mean', 'min']) \n \n# 2. Intraday trends \nintraday_hypoglycemia = data.groupby('time_of_day')['CGM'].agg(['mean', 'min']) \n \n# 3. Prolonged hypoglycemia \n# Below 70 for more than 60 minutes \ndata['hypoglycemia'] = data['CGM'] < hypoglycemia_threshold \ndata['severe_hypoglycemia'] = data['CGM'] < severe_hypoglycemia_threshold \ndata['hypoglycemia_group'] = (data['hypoglycemia'] != data['hypoglycemia'].shift()).cumsum() \ndata['severe_hypoglycemia_group'] = (data['severe_hypoglycemia'] != \ndata['severe_hypoglycemia'].shift()).cumsum() \n \nprolonged_hypoglycemia_groups = data[data['hypoglycemia']].groupby('hypoglycemia_group').agg(count=('CGM', \n'count'), start=('datetime', 'min'), end=('datetime', 'max')) \nprolonged_hypoglycemia_events = prolonged_hypoglycemia_groups[prolonged_hypoglycemia_groups['count'] > 12]  # \nMore than 60 minutes \n \nprolonged_severe_hypoglycemia_groups = \ndata[data['severe_hypoglycemia']].groupby('severe_hypoglycemia_group').agg(count=('CGM', 'count'), \nstart=('datetime', 'min'), end=('datetime', 'max')) \nprolonged_severe_hypoglycemia_events = \nprolonged_severe_hypoglycemia_groups[prolonged_severe_hypoglycemia_groups['count'] > 3]  # More than 15 \nminutes \n \n# Summarize findings \nprolonged_hypoglycemia_summary = prolonged_hypoglycemia_events.shape[0] > 0 \nprolonged_severe_hypoglycemia_summary = prolonged_severe_hypoglycemia_events.shape[0] > 0 \n \nprolonged_hypoglycemia_summary, prolonged_severe_hypoglycemia_summary \n \n \n Glycemic \nVariability \n# Calculate coefficient of variation for each day \ndaily_cgm = data.groupby(data['datetime'].dt.date)['CGM'] \ndaily_coefficient_of_variation = daily_cgm.std() / daily_cgm.mean() * 100 \n \n# Calculate interquartile range (IQR) for each 24-hour period \ndaily_iqr = daily_cgm.quantile(0.75) - daily_cgm.quantile(0.25) \n \n# Calculate IQR for each time of day across all days \nintraday_iqr = data.groupby('time_of_day')['CGM'].agg(lambda x: x.quantile(0.75) - x.quantile(0.25)) \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \n# Identify days with high coefficient of variation (> 36%) \nhigh_cv_days = daily_coefficient_of_variation[daily_coefficient_of_variation > 36] \n \n# Summarize findings \nhigh_cv_summary = high_cv_days.shape[0] > 0 \n \nhigh_cv_summary, intraday_iqr.describe() \n \n \n*** [ERROR] *** \n \n# Re-import pandas and reload the data due to code execution reset \nimport pandas as pd \n \n# Load the data again \nfile_path = '/mnt/data/date_correctedhealthy_adult#008.csv' \ndata = pd.read_csv(file_path) \n \n# Convert 'Time' column to datetime format and prepare data for analysis \ndata['datetime'] = pd.to_datetime(data['Time'], format='%m/%d/%y %H:%M') \ndata['time_window'] = data['datetime'].dt.hour // 4 \n \n# Map the 4-hour time window to general times of the day \ntime_of_day_mapping = { \n    0: \"Late night\", \n    1: \"Early morning\", \n    2: \"Morning\", \n    3: \"Afternoon\", \n    4: \"Evening\", \n    5: \"Night\" \n} \ndata['time_of_day'] = data['time_window'].map(time_of_day_mapping) \n \n# Calculate coefficient of variation for each day \ndaily_cgm = data.groupby(data['datetime'].dt.date)['CGM'] \ndaily_coefficient_of_variation = daily_cgm.std() / daily_cgm.mean() * 100 \n \n# Calculate interquartile range (IQR) for each 24-hour period \ndaily_iqr = daily_cgm.quantile(0.75) - daily_cgm.quantile(0.25) \n \n# Calculate IQR for each time of day across all days \nintraday_iqr = data.groupby('time_of_day')['CGM'].agg(lambda x: x.quantile(0.75) - x.quantile(0.25)) \n \n# Identify days with high coefficient of variation (> 36%) \nhigh_cv_days = daily_coefficient_of_variation[daily_coefficient_of_variation > 36] \n \n# Summarize findings \nhigh_cv_summary = high_cv_days.shape[0] > 0 \n \nhigh_cv_summary, intraday_iqr.describe() \n \n \n \nCase 9  Data Quality  # Convert 'Time' column to datetime format and extract date \ndata['DateTime'] = pd.to_datetime(data['Time']) \ndata['Date'] = data['DateTime'].dt.date \n \n# Count unique days \nunique_days = data['Date'].nunique() \n \n# Calculate CGM activity time \n# Assuming each record is spaced 5 minutes apart, we can calculate total minutes and then convert to \npercentage of the period \ntotal_records = data.shape[0] \ntotal_minutes = total_records * 5 \ntotal_days_covered = total_minutes / (24 * 60) \npercentage_cgm_activity_time = (total_days_covered / unique_days) * 100 if unique_days else 0 \n \nunique_days, percentage_cgm_activity_time \n \n Hyperglycemia # Define 4-hour time windows and label them \ndef assign_time_window(hour): \n    if 0 <= hour < 4: \n        return \"Late night\" \n    elif 4 <= hour < 8: \n        return \"Early morning\" \n    elif 8 <= hour < 12: \n        return \"Morning\" \n    elif 12 <= hour < 16: \n        return \"Afternoon\" \n    elif 16 <= hour < 20: \n        return \"Evening\" \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n    else:  # 20 <= hour < 24 \n        return \"Night\" \n \n# Extract hour from DateTime and assign time window \ndata['Hour'] = data['DateTime'].dt.hour \ndata['TimeWindow'] = data['Hour'].apply(assign_time_window) \n \n# Analyze interday trends for hyperglycemia \n# Calculate the percentage of readings above 180 and 250 mg/dL per day \nhyperglycemia_threshold = 180 \nsevere_hyperglycemia_threshold = 250 \n \n# Calculate daily averages and percentages above thresholds \ndaily_analysis = data.groupby('Date').agg( \n    AvgGlucose=('CGM', 'mean'), \n    MaxGlucose=('CGM', 'max'), \n    PercentAbove180=('CGM', lambda x: (x > hyperglycemia_threshold).mean() * 100), \n    PercentAbove250=('CGM', lambda x: (x > severe_hyperglycemia_threshold).mean() * 100) \n).reset_index() \n \n# Identify days with prolonged hyperglycemia (more than 12 consecutive readings above 250) \ndata['SevereHyperFlag'] = data['CGM'] > severe_hyperglycemia_threshold \nprolonged_hyper_events = data[data['SevereHyperFlag']].groupby(['Date', 'TimeWindow']).filter(lambda x: \nlen(x) >= 12) \n \n# Extract information about prolonged hyperglycemia events \nprolonged_hyper_days_times = prolonged_hyper_events.groupby(['Date', \n'TimeWindow']).size().reset_index(name='Count') \n \ndaily_analysis, prolonged_hyper_days_times \n \n \n Hypoglycemia # Define hypoglycemia thresholds \nhypoglycemia_threshold = 70 \nsevere_hypoglycemia_threshold = 54 \n \n# Calculate daily percentages below thresholds and identify prolonged hypoglycemia events \ndaily_hypoglycemia_analysis = data.groupby('Date').agg( \n    AvgGlucose=('CGM', 'mean'), \n    MinGlucose=('CGM', 'min'), \n    PercentBelow70=('CGM', lambda x: (x < hypoglycemia_threshold).mean() * 100), \n    PercentBelow54=('CGM', lambda x: (x < severe_hypoglycemia_threshold).mean() * 100) \n).reset_index() \n \n# Identify periods of prolonged hypoglycemia (below 70 for more than 60 minutes, below 54 for more than 15 \nminutes) \ndata['HypoFlag70'] = data['CGM'] < hypoglycemia_threshold \ndata['HypoFlag54'] = data['CGM'] < severe_hypoglycemia_threshold \n \n# For prolonged hypoglycemia, identify consecutive readings fulfilling the criteria \nprolonged_hypo_70 = data[data['HypoFlag70']].groupby(['Date', 'TimeWindow']).filter(lambda x: len(x) > 12) # \nMore than 60 minutes \nprolonged_hypo_54 = data[data['HypoFlag54']].groupby(['Date', 'TimeWindow']).filter(lambda x: len(x) > 3)  # \nMore than 15 minutes \n \n# Extract information about prolonged hypoglycemia events \nprolonged_hypo_70_days_times = prolonged_hypo_70.groupby(['Date', \n'TimeWindow']).size().reset_index(name='CountBelow70') \nprolonged_hypo_54_days_times = prolonged_hypo_54.groupby(['Date', \n'TimeWindow']).size().reset_index(name='CountBelow54') \n \ndaily_hypoglycemia_analysis, prolonged_hypo_70_days_times, prolonged_hypo_54_days_times \n \n \n Glycemic \nVariability \n# Calculate Coefficient of Variation (CV) for each day \ndaily_cv = data.groupby('Date').agg( \n    MeanGlucose=('CGM', 'mean'), \n    StdDevGlucose=('CGM', 'std') \n) \ndaily_cv['CoefficientOfVariation'] = (daily_cv['StdDevGlucose'] / daily_cv['MeanGlucose']) * 100 \n \n# Calculate the interquartile range (IQR) for each time window across all days \ntime_window_iqr = data.groupby('TimeWindow').agg( \n    Q1=('CGM', lambda x: x.quantile(0.25)), \n    Q3=('CGM', lambda x: x.quantile(0.75)) \n) \ntime_window_iqr['IQR'] = time_window_iqr['Q3'] - time_window_iqr['Q1'] \n \ndaily_cv, time_window_iqr \n \n \n \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \nCase 10  Data Quality  # Convert the 'Time' column to datetime format \ndata['Time'] = pd.to_datetime(data['Time'], format='%m/%d/%y %H:%M') \n \n# Extract date from the datetime for counting unique days \ndata['Date'] = data['Time'].dt.date \n \n# Count unique days \nunique_days = data['Date'].nunique() \n \n# Calculate the span of days covered by the dataset \nmin_date = data['Time'].min().date() \nmax_date = data['Time'].max().date() \nspan_days = (max_date - min_date).days + 1  # Including both start and end date \n \n# Assuming readings are taken every 5 minutes, calculate total possible readings in the span \ntotal_possible_readings = span_days * 24 * 60 / 5  # 24 hours, 60 minutes, every 5 minutes \n \n# Calculate the percentage of CGM activity time \nactual_readings = len(data) \npercentage_activity_time = (actual_readings / total_possible_readings) * 100 \n \n# Output summary for quality assessment \nunique_days, span_days, percentage_activity_time \n \n \n Hyperglycemia # Define hyperglycemia thresholds \nhyper_threshold = 180 \nsevere_hyper_threshold = 250 \n \n# Group data by date and calculate percentages of readings above thresholds \ndaily_hyper_counts = data.groupby('Date')['CGM'].apply(lambda x: (x > hyper_threshold).mean()) \ndaily_severe_hyper_counts = data.groupby('Date')['CGM'].apply(lambda x: (x > severe_hyper_threshold).mean()) \n \n# Intraday trends: Break the day into 4-hour time windows \n# Define time windows in hours \ntime_windows = [(0, 4), (4, 8), (8, 12), (12, 16), (16, 20), (20, 24)] \ntime_window_labels = [\"Late night\", \"Early morning\", \"Morning\", \"Afternoon\", \"Evening\", \"Night\"] \n \n# Function to assign time windows \ndef assign_time_window(hour): \n    for i, (start, end) in enumerate(time_windows): \n        if start <= hour < end: \n            return time_window_labels[i] \n    return \"Unknown\" \n \n# Assign time window to each reading \ndata['Time Window'] = data['Time'].dt.hour.apply(assign_time_window) \n \n# Calculate average and maximum glucose in each time window for each day \nintraday_avg_glucose = data.groupby(['Date', 'Time Window'])['CGM'].mean().reset_index() \nintraday_max_glucose = data.groupby(['Date', 'Time Window'])['CGM'].max().reset_index() \n \n# Merge the average and maximum glucose dataframes for easier analysis \nintraday_trends = pd.merge(intraday_avg_glucose, intraday_max_glucose, on=['Date', 'Time Window'], \nsuffixes=('_Avg', '_Max')) \n \n# Identify days and time windows with severe hyperglycemia (max glucose > 250) \nsevere_hyper_events = intraday_trends[intraday_trends['CGM_Max'] > severe_hyper_threshold] \n \n# Prolonged hyperglycemia: Find periods of 12 consecutive readings (1 hour) over 250 \ndata_sorted = data.sort_values(by=['Date', 'Time']) \ndata_sorted['Severe_Hyper_Flag'] = data_sorted['CGM'] > severe_hyper_threshold \ndata_sorted['Consecutive_Flag'] = data_sorted['Severe_Hyper_Flag'].groupby((data_sorted['Severe_Hyper_Flag'] \n!= data_sorted['Severe_Hyper_Flag'].shift()).cumsum()).cumcount() + 1 \n \n# Find start of periods where there are at least 12 consecutive readings above 250 \nprolonged_periods = data_sorted[data_sorted['Consecutive_Flag'] == 12] \n \ndaily_hyper_counts.describe(), daily_severe_hyper_counts.describe(), severe_hyper_events, \nprolonged_periods[['Date', 'Time', 'Consecutive_Flag']].drop_duplicates() \n \n \n Hypoglycemia # Define hypoglycemia thresholds \nhypoglycemia_threshold = 70 \nsevere_hypoglycemia_threshold = 54 \n \n# Group data by date and calculate percentages of readings below thresholds \ndaily_hypo_counts = data.groupby('Date')['CGM'].apply(lambda x: (x < hypoglycemia_threshold).mean()) \ndaily_severe_hypo_counts = data.groupby('Date')['CGM'].apply(lambda x: (x < \nsevere_hypoglycemia_threshold).mean()) \n \n# Intraday trends: Analyze hypoglycemia occurrence within the defined time windows \nintraday_hypo_trends = data[data['CGM'] < hypoglycemia_threshold].groupby(['Date', 'Time \nWindow']).size().reset_index(name='Counts') \nintraday_severe_hypo_trends = data[data['CGM'] < severe_hypoglycemia_threshold].groupby(['Date', 'Time \nWindow']).size().reset_index(name='Counts') \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint \n \n# Prolonged hypoglycemia: Identify periods below thresholds \n# For hypoglycemia below 70 mg/dL for more than 60 minutes \ndata_sorted['Hypo_Flag'] = data_sorted['CGM'] < hypoglycemia_threshold \ndata_sorted['Consecutive_Hypo_Flag'] = data_sorted['Hypo_Flag'].groupby((data_sorted['Hypo_Flag'] != \ndata_sorted['Hypo_Flag'].shift()).cumsum()).cumcount() + 1 \n \nprolonged_hypo_periods_70 = data_sorted[(data_sorted['Hypo_Flag'] == True) & \n(data_sorted['Consecutive_Hypo_Flag'] >= 12)] \n \n# For severe hypoglycemia below 54 mg/dL for more than 15 minutes \ndata_sorted['Severe_Hypo_Flag'] = data_sorted['CGM'] < severe_hypoglycemia_threshold \ndata_sorted['Consecutive_Severe_Hypo_Flag'] = \ndata_sorted['Severe_Hypo_Flag'].groupby((data_sorted['Severe_Hypo_Flag'] != \ndata_sorted['Severe_Hypo_Flag'].shift()).cumsum()).cumcount() + 1 \n \nprolonged_severe_hypo_periods_54 = data_sorted[(data_sorted['Severe_Hypo_Flag'] == True) & \n(data_sorted['Consecutive_Severe_Hypo_Flag'] >= 3)] \n \ndaily_hypo_counts.describe(), daily_severe_hypo_counts.describe(), intraday_hypo_trends, \nintraday_severe_hypo_trends, prolonged_hypo_periods_70[['Date', 'Time', \n'Consecutive_Hypo_Flag']].drop_duplicates(), prolonged_severe_hypo_periods_54[['Date', 'Time', \n'Consecutive_Severe_Hypo_Flag']].drop_duplicates() \n \n \n Glycemic \nVariability \n# Calculate daily coefficient of variation \ndaily_cv = data.groupby('Date')['CGM'].apply(lambda x: (x.std() / x.mean()) * 100) \n \n# Calculate interquartile range for each time window \ntime_window_iqr = data.groupby('Time Window')['CGM'].apply(lambda x: x.quantile(0.75) - x.quantile(0.25)) \n \ndaily_cv.describe(), time_window_iqr \n \n \nTable S10: Qualitative Prompts Code written by GPT -4  \n*** [ERROR] *** Indicates time when GPT -4 code generation produced error. Subsequent code was then produced.  \n*** [PAUSE] *** Indicates a time when GPT -4 paused code generation and provides an intermediary text output before proceeding with further code \nproduction  \n \n \n \n \n \n \n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted April 8, 2024. ; https://doi.org/10.1101/2024.04.06.24305022doi: medRxiv preprint ",
  "topic": "Computer science",
  "concepts": [
    {
      "name": "Computer science",
      "score": 0.5600731372833252
    },
    {
      "name": "Continuous glucose monitoring",
      "score": 0.539492666721344
    },
    {
      "name": "Data science",
      "score": 0.330860435962677
    },
    {
      "name": "Medicine",
      "score": 0.08393961191177368
    },
    {
      "name": "Internal medicine",
      "score": 0.0695531964302063
    },
    {
      "name": "Insulin",
      "score": 0.06571581959724426
    },
    {
      "name": "Glycemic",
      "score": 0.0
    }
  ],
  "institutions": [
    {
      "id": "https://openalex.org/I136199984",
      "name": "Harvard University",
      "country": "US"
    },
    {
      "id": "https://openalex.org/I4210087915",
      "name": "Massachusetts General Hospital",
      "country": "US"
    },
    {
      "id": "https://openalex.org/I1288882113",
      "name": "Boston Children's Hospital",
      "country": "US"
    },
    {
      "id": "https://openalex.org/I4210150980",
      "name": "Boston Children's Museum",
      "country": "US"
    }
  ]
}
{
    "title": "Intelligent Operation Monitoring of an Ultra-Precision CNC Machine Tool Using Energy Data",
    "url": "https://openalex.org/W4281925108",
    "year": 2022,
    "authors": [
        {
            "id": "https://openalex.org/A3037206359",
            "name": "Vignesh Selvaraj",
            "affiliations": [
                "University of Wisconsin–Madison"
            ]
        },
        {
            "id": "https://openalex.org/A2099854029",
            "name": "Zhicheng Xu",
            "affiliations": [
                "Wuhan University of Technology",
                "University of Wisconsin–Madison",
                "Hubei University of Automotive Technology"
            ]
        },
        {
            "id": "https://openalex.org/A2101292260",
            "name": "Sang-Kee Min",
            "affiliations": [
                "University of Wisconsin–Madison"
            ]
        },
        {
            "id": "https://openalex.org/A3037206359",
            "name": "Vignesh Selvaraj",
            "affiliations": [
                "University of Wisconsin System"
            ]
        },
        {
            "id": "https://openalex.org/A2099854029",
            "name": "Zhicheng Xu",
            "affiliations": [
                "Hubei University of Automotive Technology",
                "Wuhan University of Technology",
                "University of Wisconsin System"
            ]
        },
        {
            "id": "https://openalex.org/A2101292260",
            "name": "Sang-Kee Min",
            "affiliations": [
                "University of Wisconsin System"
            ]
        }
    ],
    "references": [
        "https://openalex.org/W2098677060",
        "https://openalex.org/W2806243377",
        "https://openalex.org/W2921701341",
        "https://openalex.org/W1825517787",
        "https://openalex.org/W2893898383",
        "https://openalex.org/W2953724613",
        "https://openalex.org/W3112984208",
        "https://openalex.org/W3003381082",
        "https://openalex.org/W3134315133",
        "https://openalex.org/W3036353854",
        "https://openalex.org/W2032290392",
        "https://openalex.org/W2561121756"
    ],
    "abstract": "Abstract Ultra-precision CNC machine tools play a significant role in the machining of precision dies and molds, optics, consumer electronics, etc., Due to the nature of ultra-precision machining, a subtle change in process condition, machine anomalies, etc. may significantly influence the machining outcome. Hence, continuous monitoring of the equipment’s operation is required to better understand the variations associated with the process and the machine. The conventional monitoring platform requires comprehensive data analysis using multiple sensors, and controller data to detect, diagnose, and prognose machine and process conditions. This increases the cost and complexity of installing a monitoring platform. The energy consumption data contains valuable information that could be potentially used to identify machine and process variations. The information can also be used to develop potential energy-saving strategies in an effort towards Green Manufacturing. This paper proposes an intelligent energy monitoring method using a 1-dimensional convolutional neural network (1D-CNN) to effortlessly and accurately obtain the working status information of the machine with minimal retrofitting. The 1D-CNN uses the energy consumption data to determine the equipment’s operation status by identifying the working components and the feed rate of the moving axis. The hyper-parameters of the developed model were optimized to improve the prediction accuracy. The paper also compares different Deep Learning and Machine Learning algorithms to gauge their effective performance in this application. Finally, the model with the highest accuracy was validated on a 5-axis ultra-precision CNC machine tool. Results show that 1D-CNN performs better than multi-layer neural networks and machine learning algorithms in processing time-series datasets. The classification accuracy of 1D-CNN on the detection of operation status and feed rate of each axis can reach 95.7 and 91.4%, respectively. Further studies are currently in progress to improve prediction accuracy of the model, and to detect subtle changes in energy consumption which would enable identification of the machine and process anomalies.",
    "full_text": "Vol.:(0123456789)\nInternational Journal of Precision Engineering and Manufacturing-Green Technology (2023) 10:59–69 \nhttps://doi.org/10.1007/s40684-022-00449-5\n1 3\nREGULAR PAPER\nIntelligent Operation Monitoring of an Ultra‑Precision CNC Machine \nTool Using Energy Data\nVignesh Selvaraj1 · Zhicheng Xu1,2 · Sangkee Min1 \nReceived: 15 July 2021 / Revised: 9 March 2022 / Accepted: 5 May 2022 / Published online: 1 June 2022 \n© The Author(s) 2022\nAbstract\nUltra-precision CNC machine tools play a significant role in the machining of precision dies and molds, optics, consumer \nelectronics, etc., Due to the nature of ultra-precision machining, a subtle change in process condition, machine anomalies, etc. \nmay significantly influence the machining outcome. Hence, continuous monitoring of the equipment’s operation is required \nto better understand the variations associated with the process and the machine. The conventional monitoring platform \nrequires comprehensive data analysis using multiple sensors, and controller data to detect, diagnose, and prognose machine \nand process conditions. This increases the cost and complexity of installing a monitoring platform. The energy consumption \ndata contains valuable information that could be potentially used to identify machine and process variations. The information \ncan also be used to develop potential energy-saving strategies in an effort towards Green Manufacturing. This paper proposes \nan intelligent energy monitoring method using a 1-dimensional convolutional neural network (1D-CNN) to effortlessly and \naccurately obtain the working status information of the machine with minimal retrofitting. The 1D-CNN uses the energy \nconsumption data to determine the equipment’s operation status by identifying the working components and the feed rate \nof the moving axis. The hyper-parameters of the developed model were optimized to improve the prediction accuracy. The \npaper also compares different Deep Learning and Machine Learning algorithms to gauge their effective performance in this \napplication. Finally, the model with the highest accuracy was validated on a 5-axis ultra-precision CNC machine tool. Results \nshow that 1D-CNN performs better than multi-layer neural networks and machine learning algorithms in processing time-\nseries datasets. The classification accuracy of 1D-CNN on the detection of operation status and feed rate of each axis can \nreach 95.7 and 91.4%, respectively. Further studies are currently in progress to improve prediction accuracy of the model, \nand to detect subtle changes in energy consumption which would enable identification of the machine and process anomalies.\nKeywords Intelligent operation monitoring · Artificial intelligence · Convolutional neural network · Energy consumption \nmonitoring\nAbbreviations\nAI  Artificial intelligence\nCNC  Computer numerical control\n1D-CNN  1-Dimensional convolutional neural network\nATCs  Automatic tool changers\nK-NN  K-nearest neighbor\nPCA  Principal component analysis\n1 Introduction\nThe artificial intelligence (AI) technologies like Machine \nlearning and Deep learning have enabled a rapid transition \nto a new industrial era called Industry 4.0. The idea behind \napplying these technologies to enable industries to become \nself-aware and self-reliant is called Smart Manufactur -\ning. Smart Manufacturing is a broad term that is used to \ndescribe the convergence of Information Technology and \nOperation Technology. Several terminologies like Indus-\ntry 4.0, Industrial Internet of Things, and Factories of the \nFuture are used to depict Smart Manufacturing. Currently, \nOnline ISSN 2198-0810\nPrint ISSN 2288-6206\n * Sangkee Min \n sangkee.min@wisc.edu\n1 Manufacturing Innovation Network Laboratory, Department \nof Mechanical Engineering, University of Wisconsin-\nMadison, Madison, WI 53706, USA\n2 Hubei Key Laboratory of Advanced Technology \nof Automotive Components, School of Automotive \nEngineering, Wuhan University of Technology, \nWuhan 430070, China\n60 International Journal of Precision Engineering and Manufacturing-Green Technology (2023) 10:59–69\n1 3\nwith the advancement in sensors and AI technologies, Smart \nManufacturing has entered a phase of rapid growth and \ndevelopment.\nComputer numerical control (CNC) machine tools is \nwidely prevalent in many manufacturing industries because \nof their ability to automate the control of machine tools using \na computer. Thanks to their ubiquitous presence, energy \nconsumption monitoring of these tools has become a topic \nof interest. Several studies have been carried out to track \nand monitor the energy consumption of these machine tools \nand to develop energy saving strategies [1 –6]. Energy con-\nsumption monitoring can lead to the development of energy \nsaving strategies. They can also be used as an approach to \ndetect equipment anomalies, or at the very least complement \nanomaly detection on machines. Studies have been carried \nout to monitor the equipment’s condition using the signals \nfrom the sensors that were retrofitted to the machines [7–9]. \nThese studies, even though they can predict equipment’s \ncondition with remarkable performance, cannot determine \nthe working status of the equipment. The working status of \nan equipment include but not limited to the operating status \nof the equipment’s auxiliary components and equipment’s \noperating parameters like feed rate, spindle speed, etc. A \nhuge portion of the working status information can be found \nblended in the equipment’s energy consumption. By iden-\ntifying the related patterns in the energy consumption data, \nwe would be able to identify the equipment states, predict \nenergy consumption, and can also augment the signals used \nin anomaly detection.\nTo obtain information in real-time from the CNC \nmachines there are two different approaches that can be \nfollowed based on the versatility of the machine. The first \napproach is to directly interface with the machine through \nits controllers. He et al. [10] used OPC UA (Open Platform \nCommunications Unified Architecture) client to interact \nwith the machine and obtain data on feed rate, spindle \nspeed, instantaneous axis loads, and depth of cut to build \na deep learning model to predict the energy consumption. \nThis method performed well, as the model was able to per -\nform with good accuracy, but the main drawback behind \nthis approach is that the universal applicability of the mod-\nels. The developed models require the data to be presented \nto them in the exact same manner as they were developed, \nmeaning that it is required to have access to the equipment’s \ncontroller to procure the data. This limits the model’s appli-\ncation. The second approach is to retrofit the machine with \nsensors that could procure data at the required sampling rate \nand have the ability to transfer it to IWSNs (Industrial Wire-\nless Sensor Networks) for remote monitoring. This approach \nis not specific to a machine type and can be generalized. \nFurthermore, due to the flexible nature of the retrofitting, \nthe developed AI models can be made robust and modular \nenabling universal applicability.\nRetrofitting a legacy machine is not a novel concept, various \nstudies have been conducted in the past that explore its pros-\npects. Eoi et al. applied k-nearest neighbor (K-NN) algorithms \nto the energy data to identify different operating status of the \nmachine such as idle mode, run mode, production mode, etc. \n[11]. Han et al. retrofitted the machine with additional sen-\nsors to predict the cutting power [12]. The sensors used were \naccelerometer, dynamometer, and servo encoders. The above \nstudies performed well in terms of achieving reliable results, \nbut the main drawbacks were lower prediction accuracy, in \nthe former one, and increase in the system complexity, in the \nlatter one. In addition to the previously mentioned drawbacks, \nthe model developed in both studies lack the ability to be gen-\neralized. Johannes et al. proposed a sensor reduced machine \nlearning approach where the number of sensors used to predict \nequipment’s energy consumption is reduced, and the model \ndeveloped provided good results [ 13]. Prediction of equip -\nment states with a smaller number of sensors is preferred, as \nit brings down the cost of AI implementation. In the work \npresented in this paper we aim to develop models that could \nachieve reasonable prediction accuracy with limited number \nof sensors retrofitted to the machine.\nThe energy input to the machine contains a lot of valuable \ninformation whose underlying patterns can be explored to \nobtain information on axis feed rate, spindle rotation speed, \nand cutting force. Manual feature extraction is difficult and \ncannot fully exploit all the patterns associated with the sig-\nnal. Hence, deep learning techniques are adopted to automat-\nically exploit the features of interest. This paper proposes an \nintelligent energy consumption and equipment states moni-\ntoring system using 1D-CNN. The model uses the equip -\nment’s energy consumption data, which is obtained using \nretrofitted sensors and external power analyzers to extract \nthe patterns corresponding to different equipment operating \nstates. These are then used to identify the different operating \nstates of the machine and will be used to detect anomalies \nassociated within the equipment’s operation down the line. \nThe paper has the following structure: In Sect. 2, the energy \ncharacteristic of the machine tool is introduced. In Sect.  3, \nthe methodology used to identify the different working states \nof the machine is presented. This is followed by the develop-\nment of 1D-CNN model and hyper-parameter optimization \nin Sect. 4. In Sect. 5, case of the 1D-CNN model is presented \nalong with the comparison of the model performance with \ndifferent machine learning algorithms. Finally, in Sect.  6, \nconclusion and future work are presented.\n2  Energy Characteristic of Machine Tool\nIn a machine tool, the fundamental elements of energy con-\nsumption comprise of the motors that control the axes, main \nspindle, controller, and finally the accessories like cutting \n61International Journal of Precision Engineering and Manufacturing-Green Technology (2023) 10:59–69 \n1 3\nfluid pump, mist collector, etc. The power consumed by the \nmachine can be broadly classified into three segments based \non their dependence on the cutting process. The first one \nis the power consumed by the accessories and machine’s \ncontroller. The second one is the power consumed by the \ndrives controlling the axes, spindle, etc., which are generally \ndependent on the operation process parameters. The third \none is cutting energy consumption that is mainly affected \nby the cutting parameters and the material types. The three \nsegments of energy consumption on a typical CNC machine \nare shown in Fig. 1.\nThe different components within a CNC machine, in \nterms of their power consumption, can be broadly classi-\nfied as shown in the Fig.  2. In the case of ultra-precision \nmachines, the power consumption depends on the position \nof each axis with respect to the datum. Since these machines \nare highly sensitive to minute variations, the position of each \naxis will have an impact on the power consumption.\nBoth active and reactive power are considered in our \nanalysis. Active power, also called the real power, is the net \npower transferred in one direction. The power consumed \nwhile cutting the material is a part of the active power. The \nenergy input to the machine can take different forms such \nas pneumatic, electrical, mechanical, hydraulic etc. Each \ncomponent that does the conversion can be thought of as a \nresistance load in series with the energy input. By determin-\ning the instantaneous energy input and the instantaneous \nenergy output, the energy consumed by the equipment can \nbe computed. Since the equipment can take different states, \nit is imperative to identify the states to determine the power \nconsumed by the machine.\n3  Methodology\nThe first step in the AI model development process involves \nestablishing the operational baseline of the machine under \nstudy. To achieve that, power consumption profile was deter-\nmined for different equipment operating states. These states \ninclude the operation of each of the 5-axes of the machine \nX, Y, Z, B, and C, and operation of equipment accessories \nlike cutting fluid pump and mist collector. Once the baseline \nwas established, the combination of equipment operations \nwas explored to augment the model development process. \nFrom the analysis, as mentioned earlier, the power con-\nsumed by the accessories was assumed to be constant for our \nstudy, even though changes in parameters like temperature, \netc., can affect them. Whereas, the power consumed by the \naxes was dependent on the equipment’s feed rate. Hence \nadditional experiments were conducted where the power \nconsumption of the machine was determined for different \nfeed rates. The increment in feed rate for each experimen-\ntal run depends on the range of feed rates offered by the \nCNC machine and the data generated was used to train the \nAI model. The model would enable us to understand the \nFig. 1  CNC sub-components \nand their associated energy \nconsumption\n\n62 International Journal of Precision Engineering and Manufacturing-Green Technology (2023) 10:59–69\n1 3\nrelationship between the power consumed and the equip-\nment’s working condition.\nAs shown in Fig.  3, the input to the AI model is the \npower consumption data sampled at 10–20 Hz. The model \nis trained such that it can predict the different working com-\nponents of the machine as well as the feed rate at which a \nparticular axis was moving. The time series power consump-\ntion data corresponding to the axis motion was segmented \nusing a sliding window. The segmented data was then sent \nto the 1D-CNN model such that each input node in the input \nlayer of the 1D-CNN corresponds to a single instance of the \ndata point.\nFig. 2  Energy flow of a typical \nCNC machine tool\nFig. 3  Model development pro-\ncess for equipment’s working \nstatus identification\n\n63International Journal of Precision Engineering and Manufacturing-Green Technology (2023) 10:59–69 \n1 3\nThe 1D-CNN model was trained such that it could predict \nthe working component. The time series data along with the \nmodel prediction result was then used to determine the time \na particular component was on. The power consumption data \nalong with the time was later used to determine the energy \nconsumed by the working component.\n3.1  Model Development Process\nThe model development process can be split into three seg-\nments: (1) data preprocessing, (2) model creation, and (3) \nmodel selection. The process is illustrated in Fig.  4.\nData preprocessing: The voltage and current signals at \neach input phase of the machine was sampled at 3 MS/s \n(Mega samples per second). The sampled signal was then \npassed through an anti-aliasing filter. The power consump-\ntion of the machine was then determined followed by aver -\naging the data for every 50 or 100 ms interval. The data \nwere then passed through a median filter to remove the burst \nnoise caused by the electric grid. The computational require-\nment of the median filter was low thereby enabling real time \ndata filtering. The data were then segmented every 5 s, and \nthis constitutes a single input instance to machine learning/\ndeep learning models. The segmentation time of 5 s was an \nhyperparameter and was determined considering the speed \nat which the predictions are required from system. In the \ncase of machine learning model development, the segmented \ndata was further processed to extract time domain features \nfollowed by applying Principal Component Analysis (PCA) \nto reduce the dimension of the data and identify the fea-\ntures of importance that preserves the variance in the data-\nset. In the case of deep learning model, the segmented data \nwas concatenated with different power components of the \nmachine before using it in the training process. For all the \nmodels developed in this study, the data was categorized \ninto training, validation, and testing. The results shown in \nthe upcoming sections were from applying the models on the \ntesting data sets, which was not seen by the model during \nthe training period.\nModel creation: The prime reason behind using deep \nlearning was to enable the model to extract the features of \ninterest on its own. The segmented 1D signal was sent to the \nmodel which applies convolution on the time dimension. The \nconvolved signal passes through the layers of the 1D-CNN \nuntil it is classified among the several working states of the \nmachine at the softmax layer. The softmax layer is typically \nused in a multi-class model, and the operation behind this \nlayer is the softmax function. The softmax function takes in \na vector of N real values from the previous fully connected \nlayer and converts it to N real values between 0 and 1, so that \nthey can be interpreted as probabilities. The several hyper-\nparameters involved in the model development process like \nlayer count, learning rate, batch size, kernel size, etc., are \noptimized using an iterative process and a Bayesian Opti -\nmization technique. This was done to ensure that the model \nis not stuck at a local minimum and explores the gradient \nspace better. The structure of the proposed 1D-CNN model \nis shown in Fig. 5.\nModel selection: Several different model architectures \nwere developed and tested to identify the model that per -\nforms the best for our scenario. In addition to the 1D-CNN, \nthe other model that performed well in our case is a 2D-CNN \nmodel. The data input to the 2D-CNN is the segmented time \nseries plot as an image with the time on the x-axis and power \nvalue on the y-axis. The performance of the 2D-CNN model \nwas comparable with the 1D-CNN, but the 1D-CNN models \nwas computationally efficient. In addition to the deep learn-\ning model, several other machine learning models were also \ndeveloped. For the machine learning model development, \nfeature extraction is particularly important as they have a \nhuge impact on the model’s prediction accuracy. Hence in \nthis case domain expertise was used to identify the important \nfeatures, the selected features were extracted from active \npower, reactive power, apparent power, and three phase cur-\nrent input. A feature importance study was conducted by \nusing feature permutation, a method where individual input \nfeatures to the model were randomly shuffled to determine \ntheir impact on the model’s performance. This study enabled \nFig. 4  Process flow for the model development\n64 International Journal of Precision Engineering and Manufacturing-Green Technology (2023) 10:59–69\n1 3\nus to identify the feature that had the most impact, and it \nwas identified to be active power and the three-phase input \ncurrent. The ML models that were developed for this study \nare listed in Table 5. As the final stage of the model develop-\nment process, the best performing model in terms of their \ntesting data prediction accuracy and loss was selected.\n4  Experiment Setups and Design\nThe 5-axis ultra-precision CNC machine tool whose power \nconsumption data was used is shown in Fig.  6. The 5-axes, \nX, Y, Z, B, and C are driven by servo motors. The linear \naxes, X, Y, and Z can achieve a resolution of 1 nm, whereas \nthe rotation axes, B and C, have a resolution of 1 micro \ndegree. The specification of the machine can be seen in \nthe Table  1. The experiments conducted involve attach-\ning power analyzers to the power input of the machine. To \nensure model robustness, two power analyzers of different \nmodels (WT5000 and WT333E from Yokogawa) having \ndifferent resolutions were used to measure the input power \nto the machine. The averaging intervals of the power ana-\nlyzers were set such that former one outputs data at 20 Hz \nand latter one outputs at 10 Hz. Also, the resolution of the \nformer one was higher than the latter. The detailed infor -\nmation on both power analyzers can be found in Table  2. \nThe input power measurement process for the machine was \n3P3W (Three Phase and Three Wire) method and connection \nlayout is shown in Fig.  7. The data was acquired through \nserial communication for both units.   \nIn the case of an ultra-precision machining, cutting power \naccounts for only a small part of the total power consumed. \nThis is primarily because of the material removal rate \n(MRR) being small in the case of ultra-precision machining. \nThe working components of a 5-axes FANUC ROBONANO \nα-0iB comprises of the controller, five axes—X, Y, Z, B, and \nC, mist collector, and pump. These components chosen were \nFig. 5  Structure of the proposed \n1D-CNN model\nFig. 6  5-axis ultra-precision CNC machine used in the experiment.\nTable 1  Specification of FANUC ROBONANO α-0iB\nAxis types Feed rate (mm/min \nor °/min)\nRange Resolution\nX-axis 0–1000 280 mm 1 nm\nY-axis 0–50 40 mm 1 nm\nZ-axis 0–500 150 mm 1 nm\nB-axis 0–1800 1000° 10–6°\nC-axis 0–1800 1000° 10–6°\nTable 2  Specification of power analyzers\nItems YOKOGAWA \nWT5000\nYOKOGAWA \nWT333E\nSampling rate 1 M Hz 0.1 M Hz\nCurrent resolution 1 mA 5 mA\nVoltage resolution 1 mV 2.5 mV\nActive power resolution 1mW 10mW\nMeasurement accuracy 0.2% 0.2%\nData update rate 20 Hz 10 Hz\n65International Journal of Precision Engineering and Manufacturing-Green Technology (2023) 10:59–69 \n1 3\ncrucial to the machine’s operation and are primarily used in \na cutting operation by the machine. Based on the preliminary \nwork conducted, the above-mentioned components consume \na major portion of energy involved in the equipment’s opera-\ntion. In this work, the power consumption by the controller, \nthe cutting fluid pump and the mist collector was assumed \nto be constant over a cutting cycle, whereas the power con-\nsumed by the five axes was variable and was dependent on \nthe travel feed rate. Two different sets of experiments were \nconducted to establish the power consumption baseline for \nthe equipment. The first set of experiments were conducted \nto determine the power consumed by the working compo-\nnents of the machine without considering their dependency \non the feed rate, whereas the second set of experiments con-\nsiders the impact of feed rate. Information on the two sets \nof experiments conducted can be seen in Tables  3 and 4 . \nThe data collection process for the experiments was auto-\nmated. An application was developed as a part of this work \nthat interprets the machine g-codes and the serial data from \nthe power analyzers simultaneously, thereby synchronizing \nthem. This enabled us to associate the different segments of \nthe power consumption data, sampled by the power analyz-\ners, with the machine states. The synchronized data was then \nfurther categorized into training, validation, and testing for \nthe model training process. \n5  Results and Discussion\nSince the experiments were conducted in a controlled envi-\nronment and the noise was minimized, the data set was split \ninto 70, 20, and 10% for training, validation, and testing, \nrespectively. The data used for model development was time \nseries power and current consumption for all three phases \nof the machine. Depending on the type of algorithm used, \neither feature extraction or feature learning was implemented \nfor the model development process. The model was trained \nusing the training data, and at the end of every epoch the \nmodel’s performance was tested using the validation data. \nAn early-stopping technique was adopted during the train-\ning process, meaning that the training was stopped when the \nmodel’s performance on the validation data started decreas-\ning. This prevented the model from over-fitting. The model \nwas developed to predict the operation status of the axis, \nand the feed rates from the energy consumption data. Once \nthe training process was completed the model’s prediction \nperformance was tested on the testing data, and the results \nare listed in Table 5. As can be seen from the same table, the \nmodel’s prediction performance was also compared across \ntwo difference power analyzers, WT5000 and WT333E \nfrom Yokogawa. The comparison was made to determine \nthe impact different types of data acquisition devices have \non the model’s performance.\nThe classification accuracy of the best performing \nmachine learning model was around 56.0%. On the other \nhand, the classification accuracy of the 1D-CNN was close \nto 95.7% (see Table 5) and its confusion matrix is shown in \nFig. 8. The difference in performance between the machine \nlearning and deep learning models can be attributed to the \nfundamental nature of these models. In the case of machine \nlearning models, the features used in the model development \nprocess were handcrafted time domain features, whereas, \nFig. 7  3P3W interface with the \nCNC machine.\nTable 3  Identified working components\nTime duration Working components Power analyzer\n15 min Mist collector WT333E and WT5000\nCoolant ump\nX-axis\nY-axis\nZ axis\nB-axis\nC-axis\nTable 4  Experiments conditions\nAxis Speed (mm/min or °/min) Duration Power analyzers\nX 20/40/80/160/320/640/900 15 min WT333E and WT5000\nY 5/10/15/20/25/30/35\nZ 5/10/15/20/25/30/35\nB 20/40/80/160/320/640/900\nC 20/40/80/160/320/640\n66 International Journal of Precision Engineering and Manufacturing-Green Technology (2023) 10:59–69\n1 3\nin the case of the deep learning models the feature learn-\ning is done by the model. Hence the deep learning models \nare better able to identify and fit the patterns in the dataset. \nIn addition to the inherent advantage in the process of fea-\nture learning compared to feature extraction, the 1D-CNN \nmodel, due to its architectural design, tends to process the \ntime series signal more effectively compared to other deep \nlearning models. This can be attributed to the fact that the \ntemporal resolution is being maintained due to the 1D con-\nvolution operation carried out in a 1D-CNN. Hence, the time \ndependence of the input data is better preserved as it passes \nthrough different layers of the model. Since the input data \nin our case has a strong dependence on time, we believe \n1D-CNN would be the better architecture for this problem \ndomain.\nThe results presented so far were used to identify the \nworking status of the machine. This work will enable us to \ndetermine the components that are operational at any point \nin time from the input energy data of the machine. The later \nanalysis presented in this work was used to validate the \nability of the models to identify the different feed rates for \neach axis from the energy data. The training and validation \nloss of the developed model are shown in Figs.  9 and 10, \nrespectively. The training loss tends to decrease with the \nepochs, whereas the validation loss remains approximately \nconstant after 300 epochs. The same can be said about the \nvalidation accuracy, as above 300 epochs it remains con-\nstant. This indicates that training the model over 300 will \nlead to overfitting and eventually a decline in the perfor -\nmance. The loss and the accuracy plots were used to obtain \ninsights into the model’s training process, thereby helping \nus in tuning the hyper-parameters for model development. \nThe confusion matrix in Fig.  11 shows the classification \nresults of each class listed in Table  4. Since the feed rate \nTable 5  Model performance\nAlgorithms WT5000 WT333E\nMachine learning\nRandom forests 56.0% 45.5%\nBayesian 39.3% 36.2%\nDecision-making tree 54.3% 45.1%\nK-NN 41.2% 37.2%\nDeep learning\nNeural network 70.1% 56.3%\n1D-CNN 95.7% 86.3%\nFig. 8  Confusion matrix for working components identification\nFig. 9  Training and validation loss of 1D-CNN\nFig. 10  Training and validation accuracy of 1D-CNN\n67International Journal of Precision Engineering and Manufacturing-Green Technology (2023) 10:59–69 \n1 3\nidentification study was a precursor to the development of \nenergy prediction models, it was currently considered to be \na classification problem. The entire range of feed rates for \neach axis of a CNC machine was divided into 7 bins. The \ndata were collected for each of the bins and were used in the \ndevelopment of the classification model, for a total of 34 \nclasses. In Fig. 11, the horizontal axis is the prediction label \nthat comes from the trained 1D-CNN model and the vertical \naxis is the true label for the input data instance. The diagonal \nof the confusion matrix is prediction accuracy for each class. \nFrom the confusion matrix in Fig. 11, it can be inferred that \nthe model can extract and identify the patterns correspond-\ning to different feed rates along with identifying the axis in \noperation. This provides further evidence that the energy \nconsumption data has valuable information that could be \nexploited to better understand the machine condition any \ntime during its operation. The 1D-CNN model was trained \nfor a total of 600 epochs and the hyper-parameters used for \nthe model development were optimized using a Bayesian \nOptimization technique.\nFrom the results, the 1D-CNN model performs better \ncompared to other types of models, both machine learning \nand deep learning, studied. The patterns from the power \nconsumption data can be used to identify the working status \nof the machine as well as the feed rate of each axis.\nEven though this study focuses on ultra-precision machin-\ning, the methods developed could be potentially applied to \nConventional CNC machining. The requirement of this \nmethod is the ability to procure and interpret the g-codes to \nsynchronize machine states with the input energy data. It is \nparticularly valuable for ultra-precision machining because \nof the ability to identify and characterize imperceptible pat-\nterns within the energy data that can easily be overlooked.\n6  Conclusions\nThe work presented in this paper primarily focuses on iden-\ntifying the working status of the machine. In this study we \ndeveloped a novel 1D-CNN architecture that can identify \nand classify the working components of the machine with an \naccuracy of 95.7%. The conclusions drawn from this study \nis given below:\n1. In the case of energy monitoring of ultra-precision \nmachines, machine learning and deep learning technolo-\nFig. 11  Confusion matrix for \nworking component’s feed rates \nclassification\n\n68 International Journal of Precision Engineering and Manufacturing-Green Technology (2023) 10:59–69\n1 3\ngies are increasingly beneficial to identify and extract \nthe patterns of interest to identify the equipment states.\n2. In the processing of time series data, 1D-CNN per -\nformed better compared to the traditional machine learn-\ning approach. The 1D-CNN performed with a classifi-\ncation accuracy of 95.7%, whereas the best performing \nmachine learning model achieved a classification accu-\nracy of 56%. The 1D-CNN model also performed bet -\nter than other model deep learning model architectures. \nThe difference in the performance can be attributed to \nthe difference between the feature extraction and fea-\nture learning process and the method of data processing \ninvolved in a 1D-CNN.\n3. The 1D-CNN model developed as a part of this study \nwas not only able to identify the different working com-\nponents of the machine but was also able to identify and \nclassify the variations in power consumption associated \nwith equipment’s axis feed rates.\nIn the ability to detect the machine states the current \nstudy was limited to identifying a single state at any point \nin time. In general, any CNC machine could exist in a com-\nbination of states, being able to segregate and identify dif-\nferent machine states from the energy data is challenging. \nOne potential solution is to generate data for different com-\nbination of states and use them in the model development \nprocess, but it is not a practical solution. Further work needs \nto be conducted to overcome this limitation.\nThe work conducted so far has set the stage for real-time \nequipment condition monitoring. The future work of this \nproject will involve development of regression-based mod-\nels to predict the feed rate from the energy consumed by \nthe machine. This will be followed by the development of \na real-time working status identification platform that can \npredict the working status of the machine in real-time and \ncan interpret the g-code to predict the energy consumed by \nthe machine. The final stage of this project will be anomaly \ndetection, where an unsupervised model trained on data cor-\nresponding to the normal operation state of the machine will \nbe used to detect the equipment operation anomalies.\nAcknowledgements Authors gratefully acknowledge the financial \nsupport and the donation of the ROBONANO α-0i B to University of \nWisconsin Madison by FANUC Corporation (Grant no. MSN240845), \nJapan. Both the first and second authors have equal contributions \ntowards this research work.\nOpen Access This article is licensed under a Creative Commons Attri-\nbution 4.0 International License, which permits use, sharing, adapta-\ntion, distribution and reproduction in any medium or format, as long \nas you give appropriate credit to the original author(s) and the source, \nprovide a link to the Creative Commons licence, and indicate if changes \nwere made. The images or other third party material in this article are \nincluded in the article's Creative Commons licence, unless indicated \notherwise in a credit line to the material. If material is not included in \nthe article's Creative Commons licence and your intended use is not \npermitted by statutory regulation or exceeds the permitted use, you will \nneed to obtain permission directly from the copyright holder. To view a \ncopy of this licence, visit http:// creat iveco mmons. org/ licen ses/ by/4. 0/.\nReferences\n 1. Aramcharoen, A., & Mativenga, P. T. (2014). Critical factors in \nenergy demand modelling for CNC milling and impact of toolpath \nstrategy. Journal of Cleaner Production, 78, 63–74.\n 2. Yoon, H., Singh, E., & Min, S. (2018). Empirical power con-\nsumption model for rotational axes in machine tools. Journal of \nCleaner Production, 196, 370–381.\n 3. Yoon, H., Lee, J., Kim, M., Kim, E., Shin, Y., Kim, S., Min, S., & \nAhn, S. (2020). Power consumption assessment of machine tool \nfeed drive units. International Journal of Precision Engineering \nand Manufacturing-Green Technology, 7, 455–464.\n 4. Lee, J., Shin, Y., Kim, M., Kim, E., Yoon, H., Kim, S., Yoon, Y., \nAhn, S., & Min, S. (2015). A simplified machine-tool power-con-\nsumption measurement procedure and methodology for estimating \ntotal energy consumption. Journal of Manufacturing Science and \nEngineering, Transactions of the ASME, 138(5), 051004. 1–9.\n 5. Fayaz, M., & Kim, D. (2018). A prediction methodology of energy \nconsumption based on deep extreme learning machine and com-\nparative analysis in residential buildings. Electronics, 7(10), 222.\n 6. Sossenheimer, J., Walther, J., Fleddermann, J., & Abele, E. \n(2019). A sensor reduced machine learning approach for condi -\ntion-based energy monitoring for machine tools. Procedia CIRP, \n81, 570–575.\n 7. Wang, Y., Zheng, L., & Wang, Y. (2021). Event-driven tool con-\ndition monitoring methodology considering tool life prediction \nbased on industrial internet. Journal of Manufacturing Systems,  \n58, 205–222.\n 8. Liu, R., Kothuru, A., & Zhang, S. (2020). Calibration-based tool \ncondition monitoring for repetitive machining operations. Journal \nof Manufacturing Systems, 54, 285–293.\n 9. Glaeser, A., Selvaraj, V., Lee, S., Hwang, Y., Lee, K., Lee, N., Lee, \nS., & Min, S. (2021). Application of deep learning for fault detec-\ntion in industrial cold forging. International Journal of Production \nResearch, 59(16), 4826–4835. https:// doi. org/ 10. 1080/ 00207 543. \n2021. 18913 18\n 10. He, Y., Wu, P., Lia, Y., Wang, Y., Tao, F., & Wang, Y. (2020). \nA generic energy prediction model of machine tools using deep \nlearning algorithms. Applied Energy, 275, 1–10.\n 11. Eoi, O., Kevin, K., & Garret, E. (2015). Intelligent energy based \nstatus identification as a platform for improvement of machine tool \nefficiency and effectiveness. Journal of Cleaner Production, 105, \n184–195.\n 12. Han, Z., Jin, H., Han, D., & Fu, H. (2017). Esprit- and HMM-\nbased real-time monitoring and suppression of machining chat-\nter in smart CNC milling system. The International Journal of \nAdvanced technology, 89, 2731–2746.\n 13. Johannes, S., Jessica, W., Jan, F., & Eberhard, A. (2019). A sensor \nreduced machine learning approach for condition-based energy \nmonitoring for machine tools. Procedia CIRP, 81, 5701–6575.\nPublisher's Note Springer Nature remains neutral with regard to \njurisdictional claims in published maps and institutional affiliations.\n69International Journal of Precision Engineering and Manufacturing-Green Technology (2023) 10:59–69 \n1 3\nVignesh Selvaraj is a graduate \nstudent at the University of Wis-\nconsin Madison pursuing his \nPh.D. at the time of this work. \nHe obtained his Master of Sci-\nence degree from the same Uni-\nversity. His research interests are \nin Smart Manufacturing, and \nIndustrial Internet of Things, \nparticularly focusing on the \ndevelopment of robust and reli -\nable AI models for manufactur -\ning industries.\nZhicheng Xu just received his \nPh.D. from Wuhan University of \ntechnology and studied as visit-\ning scholar at the University of \nWisconsin-Madison from 2019 \nto 2021. His Ph.D. work focused \non smart and green manufactur -\ning, and fluid power system \nenergy saving.\nSangkee Min is associate profes-\nsor at Department of Mechanical \nEngineering, University of Wis-\nconsin-Madison. He is currently \nworking on three major research \ntopics: UPM (Ultra-Precision \nMachining), SSM (Smart Sus-\ntainable Manufacturing), and \nMFD (Manufacturing for \nDesign)."
}
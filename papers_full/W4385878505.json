{
  "title": "Performance of a large language model (ChatGPT-3.5) for Pooled Cohort Equation estimation of atherosclerotic cardiovascular disease risk",
  "url": "https://openalex.org/W4385878505",
  "year": 2023,
  "authors": [
    {
      "id": "https://openalex.org/A2097605799",
      "name": "Ben J Marafino",
      "affiliations": [
        "Kaiser Permanente"
      ]
    },
    {
      "id": "https://openalex.org/A2557323971",
      "name": "Vincent X. Liu",
      "affiliations": [
        "Kaiser Permanente"
      ]
    },
    {
      "id": "https://openalex.org/A2097605799",
      "name": "Ben J Marafino",
      "affiliations": [
        "Kaiser Permanente"
      ]
    },
    {
      "id": "https://openalex.org/A2557323971",
      "name": "Vincent X. Liu",
      "affiliations": [
        "Kaiser Permanente"
      ]
    }
  ],
  "references": [
    "https://openalex.org/W4377009978",
    "https://openalex.org/W3001764054",
    "https://openalex.org/W4210347219",
    "https://openalex.org/W2910707576",
    "https://openalex.org/W2110171129",
    "https://openalex.org/W4221143046"
  ],
  "abstract": "Abstract Despite demonstrated facility for arithmetic and other quantitative tasks, the performance of ChatGPT and other large language models for clinical risk calculation have yet to be assessed. Using synthetic patient data, this preliminary study aimed to assess the calibration, reproducibility, and potential for sociodemographic bias of ChatGPT-derived Pooled Cohort Equation (PCE) scores of atherosclerotic cardiovascular disease risk as compared to true scores. We found that ChatGPT-derived PCE scores, despite being moderately associated with the true PCE scores, displayed poor calibration with respect to true PCE scores, and exhibited instability between repeated rounds of prompting, suggesting lack of reproducibility. Moreover, ChatGPT-derived PCE scores also appeared inappropriately sensitive to contextual indicators of the sociodemographic status of the synthetic patients in this study. Further work is needed to confirm these results, and to assess performance on a wider variety of prompts as well as in other settings beyond cardiovascular disease prevention where accurate risk calculation is also vital to appropriate clinical decision-making. Abstract Figure Figure. Underestimation of true PCE risk estimates ( x -axis) by ChatGPT ( y -axis) on synthetic patient data.",
  "full_text": "Performance of a large language model (ChatGPT-3.5) for Pooled\nCohort Equation estimation of atherosclerotic cardiovascular disease\nrisk\nBenJ.Marafino,Ph.D.andVincentX.Liu,M.D.,M.S.\nKaiser PermanenteDivisionofResearch,2000 Broadway,Oakland,CA94612\nFigure. Underestimation of true PCE risk estimates (x-axis) by ChatGPT (y-axis) on\nsynthetic patient data.\nCorresponding author:\nBenJ.Marafino,PhD\nKaiser PermanenteDivisionofResearch\n2000Broadway,Oakland,CA94612\nben.j.marafino@kp.org\n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted August 16, 2023. ; https://doi.org/10.1101/2023.08.11.23293957doi: medRxiv preprint \nNOTE: This preprint reports new research that has not been certified by peer review and should not be used to guide clinical practice.\nAbstract\nDespitedemonstratedfacilityfor arithmeticand other quantitativetasks,theperformanceof\nChatGPTandother largelanguagemodelsfor clinical riskcalculationhave yettobeassessed.\nUsingsyntheticpatientdata,thispreliminarystudyaimedtoassessthecalibration,\nreproducibility,andpotential for sociodemographicbiasofChatGPT-derivedPooled Cohort\nEquation(PCE) scoresofatheroscleroticcardiovascular diseaseriskascomparedtotrue\nscores.WefoundthatChatGPT-derivedPCEscores,despitebeingmoderatelyassociatedwith\nthetruePCEscores,displayed poor calibrationwithrespecttotruePCEscores,andexhibited\ninstabilitybetweenrepeatedroundsofprompting,suggestinglackofreproducibility.Moreover,\nChatGPT-derivedPCEscoresalsoappearedinappropriatelysensitivetocontextual indicatorsof\nthesociodemographicstatusofthesyntheticpatientsinthisstudy.Further workisneededto\nconfirmtheseresults,andtoassessperformanceonawider varietyofpromptsaswell asin\nother settingsbeyondcardiovascular diseaseprevention whereaccurateriskcalculationisalso\nvital toappropriateclinical decision-making.\n1\n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted August 16, 2023. ; https://doi.org/10.1101/2023.08.11.23293957doi: medRxiv preprint \nIntroduction\nLargelanguage models(LLMs),includinggeneral-purpose systemssuchasChatGPT\naswell asmorespecializedmodelssuch asMed-PaLM, 1 haveshownremarkablefacilityfor\nqualitativetasksinmedicinesuch asquestion-answeringandgeneral clinical reasoning.\nDespitethepopular conceptionofChatGPTandrelatedpublicly-availableLLMsasmere\nchatbots,LLMsareinfactcapable oftasksbeyondquestion-answering,includingarithmeticand\nmathematical reasoning,albeitwithmixedresults. 2 However,theperformancecharacteristicsof\nLLMsfor quantitativeclinical tasks,includingclinical riskprediction,haveyettobeassessed.In\nthispreliminaryreport,weaimtocharacterizethecalibration,reproducibility,and potential\nsociodemographicbiasofChatGPT-derivedPooledCohortEquation 3 (PCE) riskestimatesof\natheroscleroticcardiovascular disease(ASCVD) ascomparedtoactual PCEriskestimates.\nMethods\nSyntheticindividual-level datacomprisingacompletesetofPCEpredictor variables\nwererandomlygeneratedinR.Thesesyntheticdatawereusedinpromptstogeneratebulk\nChatGPTestimatesofPCEriskscores(ChatGPT-PCEscores) toassessthe3 domainsof\nperformancelistedabove:\n1. Calibration:WepromptedChatGPTtogeneratePCEscoresfor n=500 unique\nsyntheticpatients(PromptC) andcompared theseChatGPT-PCEscoresto\nactual PCEscoresgeneratedusingthe Rpackage“PooledCohort”.\n2. Reproducibility:wegeneratedanewsetof n=100syntheticpatients,and\nproduced5 setsofChatGPT-PCEscoresfor thesame 100patientsbyrepeating\nPromptC5times.\n3. Bias:toassessthepotential for biasamongsociodemographiclines,we\npresentedChatGPTwithPromptCtogenerate ChatGPT-PCEscoresfor n=50\npatients,followedbytwoprompts(PromptsB.1andB.2) requestingthatthese50\nChatGPT-PCEestimatesbeupdated,basedontheassumed sociodemographic\ncharacteristicsofthesepatients.Overall,thisprocessproduced3distinctsetsof\n50ChatGPT-PCEscores,witheachsetcorrespondingtoanassumed\nsociodemographiccontext.\nChatGPT-3.5(9May2023version) wasusedfor all experiments.Calibrationwas\nassessedgraphicallyandvia the Pearsoncorrelationcoefficient,whileanalysisofvariance\n(ANOVA) wasappliedacrossrepeatedroundsofpromptingtotestfor changesinscoresacross\nroundsinthereproducibilityandbiasexperiments.ThetextofPromptsCandB.1/B.2,together\nwithrepresentativeRcode,areprovided intheAppendix.\nResults\nComparedtotheactual PCEestimatesfor the500syntheticpatients(Figure 1),\ncalibrationoftheChatGPT-PCEscoresappeared poor.TheChatGPT-PCEscoreconsistently\nunder-predictedactual PCEscores,althoughthe two setsofscoresexhibitedmodest\ncorrelation(Pearsoncorrelationcoefficient0.46, p<0.001).Moreover,individual ChatGPT-PCE\n2\n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted August 16, 2023. ; https://doi.org/10.1101/2023.08.11.23293957doi: medRxiv preprint \nscores,whenre-generated5timeswithidentical syntheticdata,didnotappear reproducible,\nbeingsignificantlydifferentacross5attemptsfor eachindividual syntheticpatient(one-way\nANOVAp=0.010) (Figure 2).Finally,whenpromptedtoupdate asetofriskestimatesbased\nonwhether thedatawere assumedto derivefroma safety-netclinic(PromptB.1) or froma\nclinicinanaffluentsuburb (PromptB.2),ChatGPT-PCEriskestimateswererevisedsignificantly\nupwards,thendownwards,respectively(one-wayANOVA p<0.001) (Figure 3).\nDiscussion\nThisstudyfoundthatChatGPTproducedpoorlycalibrated,andindividuallyhighly\nvariable,estimatesofASCVDriskcomparedtothoseobtainedviathetrue PooledCohort\nEquations.However,despitethedemonstratedpropensityofLLMsto“hallucinate” (fabricate)\noutput,theChatGPT-PCEestimatesdid exhibitsignificantcorrelationwiththetrue PCEscores.\nMoreover,ChatGPT-PCEscores,upon re-prompting,appearedsensitive,and arguably\nunnecessarilyso,tocontextual indicatorsofpatientsociodemographicstatus.Higher\nChatGPT-PCEscoresweregeneratedfor patientsassumedtobetreated atasafety-netclinic,\nwhilethesame setofpatients,thistimeassumedtobetreatedina clinicin anaffluentsuburb,\nreceivedfar lower scores.These adjustmentsappearedtobeperformedinanidiosyncratic\nmanner withnoapparentjustification(e.g.an adjustmentfactor,equation,or re-calibrated\nmodel) behindwhyindividual scoreswereadjusted asobserved.\nOur studydesignpresentedChatGPTwithsyntheticpatientdataexamplestogenerate\ntheChatGPT-PCEriskestimates.Here,our approachrelyingonsyntheticdataforeclosesthe\npossibility,however improbable,thatChatGPThadsimplymemorizedtheseparticular data.\nNevertheless,itisnotimmediatelyclear whytheChatGPT-PCEscoresappeared tocarryat\nleastsomeinformationabouttruePCEriskscores,giventhemoderate level ofcorrelation\nobservedbetweenthese twosetsofscores.Further workremainstoprobeChatGPTandother\nLLMstounderstandtheoriginsofthisobservation.\nOur study,whilepreliminary,hasseveral limitations,whichalso presentavenuesfor\nfurther work.First,itremainstobeseenwhether our resultscanbe replicatedbyother LLMs,\nincludingChatGPT-4,Anthropic’sClaude2,andGoogle’sBard,among others.Second,our\npromptmaynotnecessarilyreflecthowaLLMwouldbeusedtogenerateriskestimatesin\npractice.Indeed,itmaynotbeimmediatelyclear whyaLLMwouldbeneededtogeneraterisk\nestimatesatall,given thatriskcalculatorsalreadyexistandarereadilyavailable.\nHowever,insofar asPCEriskestimatesremainintegral to decision-makingfor primary\npreventionofASCVD, 4 their accuratecalculationisessential for systemsinterfacingwith,and\nreasoningbasedon,patientdatafromencountersfor ASCVDprevention.Manyother settings\nbeyondASCVDpreventionalsodependonaccurateriskestimation for appropriate clinical\ndecision-making,aswell.FutureworkcouldassessLLMperformancebasedonpatient\nvignettesor promptsmorereflectiveofactual practice.Ultimately,LLMsmayrelyontheability\ntohookintoanexternal source,such asa“codeinterpreter”, 5 tointerfacewiththeappropriate\nriskcalculator anddirectlycomputethedesiredestimates.However,nosuchinterfacesfor\nclinical riskcalculatorsyetexist,andsosuchabilitiesremain untested.\nGivencurrenteffortstowardsLLM-electronichealthrecordintegration,our preliminary\nfindingsmayhavebroadimplications.Inparticular,our findingthatChatGPT-PCEestimates\ncarriedatleastsomeinformationregardingtrueestimated risksissurprising.Fromasafety\n3\n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted August 16, 2023. ; https://doi.org/10.1101/2023.08.11.23293957doi: medRxiv preprint \nperspective,thisfindingmayalsobeconcerninginsofar asitdemonstratesthepotential for\nautomationbias6 engenderedbyinappropriately-calibratedtrustinquantitativeoutputthat\nostensiblyappearscorrect. 7 Altogether,further workremains—notonlyto build onour\npreliminaryresults,butalsotocharacterizetheperformanceofLLMson awider varietyof\nclinical riskcalculatorsandtoinvestigatemethodswithpotential toimprove their performance\nontheseand relatedtasks,includingchain-of-thoughtprompting 8 andother approachesto\nprompting.\nReferences\n1. Singhal K,TuT,GottweisJ,etal.TowardsExpert-Level Medical QuestionAnswering with\nLargeLanguageModels.Publishedonline May16,2023.Accessed May24,2023.\nhttp://arxiv.org/abs/2305.09617\n2. Frieder S,Pinchetti L,Chevalier A,etal.Mathematical CapabilitiesofChatGPT. arXiv\n[csLG].Publishedonline January31,2023.http://arxiv.org/abs/2301.13867\n3. GoffDCJr,Lloyd-JonesDM,BennettG,etal.2013ACC/AHAguidelineontheassessment\nofcardiovascular risk:areportoftheAmericanCollegeofCardiology/AmericanHeart\nAssociationTaskForce onPracticeGuidelines. Circulation.2014;129(25Suppl 2):S49-S73.\n4. ArnettDK,Blumenthal RS,AlbertMA,etal.2019ACC/AHAGuidelineonthePrimary\nPreventionofCardiovascular Disease:AReportoftheAmericanCollegeof\nCardiology/AmericanHeartAssociationTaskForce onClinical PracticeGuidelines.\nCirculation.2019;140(11):e596-e646.\n5. LuY.Whatto KnowAboutChatGPT’sNewCodeInterpreter Feature. The NewYorkTimes.\nhttps://www.nytimes.com/2023/07/11/technology/what-to-know-chatgpt-code-interpreter.htm\nl.PublishedJuly11,2023.AccessedAugust10,2023.\n6. Challen R,DennyJ,PittM,GompelsL,EdwardsT,Tsaneva-Atanasova K.Artificial\nintelligence,biasandclinical safety. BMJQual Saf.2019;28(3):231-237.\n7. LeeJD,SeeKA.Trustinautomation:designing for appropriatereliance. HumFactors.\n2004;46(1).doi:10.1518/hfes.46.1.50_30392\n8. Wei J,WangX,SchuurmansD,etal.Chain-of-ThoughtPromptingElicitsReasoning in\nLargeLanguageModels.Publishedonline January28,2022.AccessedMay24,2023.\nhttp://arxiv.org/abs/2201.11903\n4\n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted August 16, 2023. ; https://doi.org/10.1101/2023.08.11.23293957doi: medRxiv preprint \nFigure 1\nCaption: ComparisonofPooledCohortEquation(PCE) scoresgenerated byChatGPT\n(ChatGPT-PCEscores) totruePCEscoresonindividual syntheticpatients.Theblueline\ndepictsthebest-fitline,andthestatisticsintheupper leftcorner arethoseassociated withthat\nline.Thedashedlinedepictsthe45-degreeline associatedwithperfectcalibration.\n5\n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted August 16, 2023. ; https://doi.org/10.1101/2023.08.11.23293957doi: medRxiv preprint \nFigure 2\nReproducibilityofChatGPT-PCEestimatesfor a subset(20shown) ofthe n=50synthetic\npatients.Eachpanel correspondsto one syntheticpatient,andwith pointsdenotingtheir\nChatGPT-PCEscoresgeneratedacross5 roundsofprompting.Thedashedlinedenotesthe\ntruePCEriskestimatefor thatpatient,whiletheredline denotesthe7.5%PCEthreshold.Both\nsubstantial variabilityinChatGPTscoresand frequentreclassificationwithrespecttothe7.5%\nthresholdareobserved.\n6\n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted August 16, 2023. ; https://doi.org/10.1101/2023.08.11.23293957doi: medRxiv preprint \nFigure 3\nCaption: SensitivityofChatGPT-PCEscorestoadditional contextpotentiallyindicativeof\nsociodemographicstatusofsyntheticpatients(x-axis).EachpointdepictstheChatGPT-PCE\nriskestimatefor thatpatientunder threedifferentsetsofcontext.Thedatawereinitially\ngeneratedwith nosuchcontext(“None”),thenwereupdatedunder theassumptionthatthe\npatientsweretreatedinasafety-netclinic(“SafetyNet”;PromptB.1) thenagainupdatedunder\ntheassumption theyderived fromacliniclocated inanaffluentsuburbofaMidwestern city\n(“Suburb”;PromptB.2).\n7\n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted August 16, 2023. ; https://doi.org/10.1101/2023.08.11.23293957doi: medRxiv preprint \nAppendix to: Performance of a large language model (ChatGPT-3.5)\nfor Pooled Cohort Equation estimation of atherosclerotic\ncardiovascular disease risk\nBenJ.Marafino,Ph.D.andVincentX.Liu,M.D.,M.S.\nKaiser PermanenteDivisionofResearch,2000 Broadway,Oakland,CA94612\n8\n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted August 16, 2023. ; https://doi.org/10.1101/2023.08.11.23293957doi: medRxiv preprint \nExample Prompts\nPrompt C\nPrompt B.1\n9\n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted August 16, 2023. ; https://doi.org/10.1101/2023.08.11.23293957doi: medRxiv preprint \nPrompt B.2\n10\n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted August 16, 2023. ; https://doi.org/10.1101/2023.08.11.23293957doi: medRxiv preprint \nExample R code\nlibrary(PooledCohort)\nlibrary(tidyverse)\nlibrary(ggplot)\nlibrary(ggpmisc)\ngenerate_pce_data = function(n) {\ntibble(\nage_years = rnorm(n, 60, 5),\nrace = sample(c('black', 'white'), n, replace=TRUE),\nsex = sample(c('female', 'male'), n, replace=TRUE),\nsmoke_current = sample(c('yes', 'no'), n, replace=TRUE),\nchol_total_mgdl = rnorm(n, 180, 15),\nchol_hdl_mgdl = rnorm(n, 55, 5),\nbp_sys_mmhg = rnorm(n, 145, 10),\nbp_meds = sample(c('yes', 'no'), n, replace=TRUE),\ndiabetes = sample(c('yes', 'no'), n, replace=TRUE)\n) %>% mutate(across(where(is.numeric), round, 0))\n}\npred_ascvd_wrapper = function(data, equation_version = 'Goff_2013') {\nwith(data, predict_10yr_ascvd_risk(age_years = age_years,\nrace = race,\nsex = sex,\nsmoke_current = smoke_current,\nchol_total_mgdl = chol_total_mgdl,\nchol_hdl_mgdl = chol_hdl_mgdl,\nbp_sys_mmhg = bp_sys_mmhg,\nbp_meds = bp_meds,\ndiabetes = diabetes,\nequation_version = equation_version))\n}\n# example synthetic data generation\nsynthetic_pce_ex = generate_pce_data(100)\n### Figure 1\nchatgpt_bulk = read.csv('cgPCE_bulk_data_500.csv')\nchatgpt_bulk$actual_pce = pred_ascvd_wrapper(chatgpt_bulk)*100\n11\n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted August 16, 2023. ; https://doi.org/10.1101/2023.08.11.23293957doi: medRxiv preprint \nggplot(chatgpt_bulk, aes(actual_pce, chatgpt_pce)) +\ngeom_point() +\ngeom_abline(intercept = 0, slope = 1, linetype='dashed') +\nstat_poly_line(se=FALSE) +\nstat_poly_eq(use_label(c('eq', 'R2', 'p'))) +\nxlab(\"Actual PCE Score (%)\") +\nylab(\"ChatGPT-PCE Score (%)\") +\ntheme(axis.text = element_text(size=12),\naxis.title = element_text(size=16))\ncor.test(chatgpt_bulk$chatgpt_pce, chatgpt_bulk$actual_pce)\n12\n . CC-BY-NC-ND 4.0 International licenseIt is made available under a \n is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)\nThe copyright holder for this preprint this version posted August 16, 2023. ; https://doi.org/10.1101/2023.08.11.23293957doi: medRxiv preprint ",
  "topic": "Cohort",
  "concepts": [
    {
      "name": "Cohort",
      "score": 0.6895016431808472
    },
    {
      "name": "Disease",
      "score": 0.6065055131912231
    },
    {
      "name": "Framingham Risk Score",
      "score": 0.562237024307251
    },
    {
      "name": "Calibration",
      "score": 0.5430246591567993
    },
    {
      "name": "Medicine",
      "score": 0.5150041580200195
    },
    {
      "name": "Atherosclerotic cardiovascular disease",
      "score": 0.49470898509025574
    },
    {
      "name": "Reproducibility",
      "score": 0.49250802397727966
    },
    {
      "name": "Estimation",
      "score": 0.4729613661766052
    },
    {
      "name": "Cohort study",
      "score": 0.45637476444244385
    },
    {
      "name": "Clinical trial",
      "score": 0.4338221848011017
    },
    {
      "name": "Statistics",
      "score": 0.38743454217910767
    },
    {
      "name": "Econometrics",
      "score": 0.35335978865623474
    },
    {
      "name": "Internal medicine",
      "score": 0.22763916850090027
    },
    {
      "name": "Mathematics",
      "score": 0.22147759795188904
    },
    {
      "name": "Economics",
      "score": 0.0
    },
    {
      "name": "Management",
      "score": 0.0
    }
  ],
  "institutions": [
    {
      "id": "https://openalex.org/I1343052199",
      "name": "Kaiser Permanente",
      "country": "US"
    }
  ]
}
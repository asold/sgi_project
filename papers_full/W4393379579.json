{
  "title": "State of Charge Prediction of Lithium-Ion Batteries for Electric Aircraft with Swin Transformer",
  "url": "https://openalex.org/W4393379579",
  "year": 2024,
  "authors": [
    {
      "id": "https://openalex.org/A1506313323",
      "name": "Wei Zhang",
      "affiliations": [
        "Shenyang Aerospace University"
      ]
    },
    {
      "id": "https://openalex.org/A5069165920",
      "name": "Hongshen Hao",
      "affiliations": [
        "Shenyang Aerospace University"
      ]
    },
    {
      "id": "https://openalex.org/A2101528554",
      "name": "Yewei Zhang",
      "affiliations": [
        "Shenyang Aerospace University"
      ]
    }
  ],
  "references": [
    "https://openalex.org/W3135514141",
    "https://openalex.org/W3110175444",
    "https://openalex.org/W3033088344",
    "https://openalex.org/W4377235373",
    "https://openalex.org/W4385547955",
    "https://openalex.org/W4313598762",
    "https://openalex.org/W4304186985",
    "https://openalex.org/W4361801129",
    "https://openalex.org/W3180515657",
    "https://openalex.org/W4378635572",
    "https://openalex.org/W4378982245",
    "https://openalex.org/W4200520486"
  ],
  "abstract": "Dear Editor, As an important energy storage device, lithium-ion battery plays a vital role in electric aircrafts, which are new and promising equipment of transportation in the future with low carbon emissions. Accurate prediction of the state of charge (SOC) of lithium-ion batteries is of great importance in reducing the probability of abnormal accidents and ensuring flight safety. This paper proposes a novel Swin Transformer-based method for predicting the SOC of lithium-ion batteries. Firstly, the data are reconstructed and the features are extracted by using interpolation fitting to overcome noise generated by the battery during the data acquisition process in the practical industrial scenarios. Then, the learned features are processed by the Swin Transformer network to achieve accurate SOC prediction of lithium-ion batteries. This letter conducts experiments and verification based on the actual flight data of new energy electric aircrafts. The experimental results show that the proposed method has low prediction error and promising accuracy.",
  "full_text": " \nLetter\nState of Charge Prediction of Lithium-Ion Batteries for\nElectric Aircraft With Swin Transformer\nWei Zhang , Hongshen Hao , and Yewei Zhang \n Dear Editor,\nAs an important energy storage device, lithium-ion battery plays a\nvital  role  in  electric  aircrafts,  which  are  new  and  promising  equip-\nment of transportation in the future with low carbon emissions. Accu-\nrate prediction of the state of charge (SOC) of lithium-ion batteries is\nof  great  importance  in  reducing  the  probability  of  abnormal  acci-\ndents  and  ensuring  flight  safety.  This  paper  proposes  a  novel  Swin\nTransformer-based method for predicting the SOC of lithium-ion bat-\nteries.  Firstly,  the  data  are  reconstructed  and  the  features  are\nextracted by using interpolation fitting to overcome noise generated\nby  the  battery  during  the  data  acquisition  process  in  the  practical\nindustrial scenarios. Then, the learned features are processed by the\nSwin  Transformer  network  to  achieve  accurate  SOC  prediction  of\nlithium-ion  batteries.  This  letter  conducts  experiments  and  verifica-\ntion based on the actual flight data of new energy electric aircrafts.\nThe experimental results show that the proposed method has low pre-\ndiction error and promising accuracy.\nRelated  work: Lithium-ion  batteries  are  widely  used  in  energy\nstorage  and  power  field.  benefiting  from  the  high  energy  density,\nlong service life, and low self-discharge rate. Therefore, it has high\napplication value in the field of electric aircraft [1]. State of health is\nan important reference for health management during its entire ser-\nvice life [2]−[4], and the state of charge mainly displays various indi-\ncators of the battery’s operation. SOC is the level of charge of elec-\ntric  battery  related  to  its  capacity  indicating  the  amount  of  energy\navailable  in  the  battery,  so  the  SOC  prediction  of  Li-ion  battery  is\nnecessary during the flight of electric aircraft to ensure flight safety.\nBoth model-based and data-driven methods are used in SOC predic-\ntion.  The  model-based  method  is  to  derive  an  approximate  model\nbased on the mathematical model or equivalent circuit model of the\nlithium-ion battery to obtain the state parameters of the battery [5],\n[6]. Traditional model methods often require complex sensors, accu-\nracy  of  model  parameters,  and  high  computational  costs.  For  data-\ndriven method, the future battery SOC is predicted from the battery’s\nhistorical operating data through machine learning methods to avoid\ncomplex modeling process, such as support vector machine [7]. Deep\nlearning  methods  have  been  successful  in  several  fields,  especially\nfault diagnosis [8]−[10], where their data-driven nature enables them\nto learn complex patterns of battery SOC from large amounts of data.\nFeedforward  neural  network  (FNN) [11] and  recursive  neural  net-\nwork (RNN) are the most common neural networks used in SOC pre-\ndiction.  Among  the  RNNs,  long  short-term  memory  (LSTM)  is  the\nmost powerful to predict SOC of battery based on long distance time\nseries [12].\nHowever, the Li-ion battery data used for neural network training\nis collected under laboratory environment, and the battery discharg-\ning status is different from that under actual operating status. Based\non the actual flight battery data of new energy electric aircraft, this\npaper  proposes  a  lithium-ion  battery  SOC  prediction  method  using\nSwin Transformer neural network based on the actual flight battery\ndata  of  electric  aircraft.  The  SOC  of  battery  is  an  important  using\nSwin Transformer neural network based on the actual flight battery\ndata of electric aircraft. The SOC of battery is an important indicator\nto  predict  how  long  the  aircraft  can  fly  and  when  to  return  and  get\ncharged.  Considering  the  battery  discharge  characteristics  and  SOC\nestimation scheme in the actual flight state of the aircraft, the current\nand voltage of the battery during operation are used as the input, and\nthe  real  SOC  is  used  as  the  label.  The  prediction  results  obtained\nthrough the Swin Transformer network are compared with the actual\nresults to verify the validity of the simulation results. The proposed\nmethod achieves good performance on different types of electric air-\ncrafts.\nBattery dataset：This article uses the actual flight battery data of\nelectric aircraft. Electric aircrafts are divided into two seats and four\nseats.\n407\nThe  open-circuit  voltage  of  the  lithium-ion  battery  carried  by  the\ntwo-seater electric aircraft is 391 V, and the voltage of the battery is\nmaintained between 348 V−388 V during flight. The four-seat elec-\ntric  aircraft  is  equipped  with  two  lithium-ion  batteries  of  the  same\ntype,  each  of  which  has  an  open  circuit  voltage  of  V,  and  the\nvoltage  of  the  battery  is  maintained  between  327  V−404  V  during\nflight.\nBattery SOC: SOC of a battery is usually defined as\n \nz(t) = z(t0) \u0000\nr t\nt0\n\u0011iiL(\u001c)d\u001c\nCmax\n(1)\n \nz(t)\nz(t0)\nt\nt0\n\u0011i\niL(\u001c)\n\u001c\nCmax\nwhere ,  are  the  estimated  value  of  SOC  at  time  and \nrespectively,  is the charging and discharging coulombic efficiency\nof the power battery. Usually, the charging efficiency of lithium-ion\nbatteries is usually 0.98~1, and the discharging efficiency is 1.  is\nthe charging and discharging current at time ,  is the maximum\navailable capacity of the current battery. One finds that SOC is not a\ndominant state quantity, so a special method is needed to obtain it.\nSwin  Transformer  neural  network: This  letter  proposes  a\nmethod based on the Swin Transformer neural network to predict the\nbattery SOC in the future by inputting the battery current and volt-\nage  information  in  the  past.  Transformer  is  a  network  that  uses  the\nattention mechanism to improve the speed of model training. Its abil-\nity to handle long sequence data is quite good, It is effective to solve\ngradient  explosion  problems  benefiting  from  the  ability  in  handling\nlong sequence data.\nThe  Transformer  network  embeds  the  position  information  of  the\ninput  vector  through  position  encoding.  Afterwards,  the  similarity\nbetween each input vector and all input vectors is calculated through\nmulti-head self-attention, and then a weighted sum is used to obtain a\nnew representation of each input vector. Then, the self-attention pro-\ncessed  vectors  are  nonlinearly  transformed  through  a  feedforward\nnetwork. Finally, the linear layer performs feature mapping to obtain\nthe predicted sequence results.\nSwin-Transformer uses a mechanism called “Shifted Window” to\ndivide  the  input  into  multiple  parts  and  exchange  information\nbetween  these  chunks,  thus  avoiding  the  computational  burden  of\nprocessing the entire input data at once. Another important improve-\nment is the Self-Attention mechanism. Specifically, the Shifted Win-\ndow Self-Attention mechanism uses a learnable translation matrix to\ntranslate  the  elements  in  each  small  block  so  that  the  relative  posi-\ntion of each element and surrounding elements within a certain range\nremains  unchanged.  Then,  these  elements  are  sent  into  the  Self-\nAttention module respectively, the similarity between them is calcu-\nlated,  and  the  weighted  summary  representation  of  each  element  is\ncalculated  according  to  the  similarity.  Finally,  the  weighted  sum-\nmary representations of the elements in each small block are spliced\ntogether as the representation of the entire sequence, which can avoid\ncalculating  too  much  similarity,  thereby  improving  computational\n \nCorresponding author: Yewei Zhang.\nCitation: W. Zhang, H. Hao, and Y. Zhang, “State of charge prediction of\nlithium-ion batteries for electric aircraft with swin transformer,” IEEE/CAA J.\nAutom. Sinica, 2024, DOI: 10.1109/JAS.2023.124020\nThe  authors  are  with  the  School  of  Aerospace  Engineering,  Shenyang\nAerospace University, Shenyang 110136, China (e-mail: 1012201003@tju.edu.\ncn; haohong@stu.sau.edu.cn; zhangyw@sau.edu.cn).\nColor  versions  of  one  or  more  of  the  figures  in  this  paper  are  available\nonline at http://ieeexplore.ieee.org.\nDigital Object Identifier 10.1109/JAS.2023.124020\nThis article has been accepted for publication in a future issue of this journal, but has not been fully edited. Content may change prior to final publication.\nIEEE/CAA JOURNAL OF AUTOMATICA SINICA 1 \nefficiency.\nIn the initial stage of the network, we need to process the input data\nso that the data can be used for self-attention calculation later. This\narticle  uses  convolutional  neural  network  (CNN)  for  this  step.  This\nmodule extracts features from the input data, extending the model’s\nperceptual field for spatial data. Convolutional embedding makes full\nuse of CNN’s ability to extract features, replacing the ordinary fully\nconnected  layer  in  Swin  Transformer  for  embedding  operations,  so\nthat data connections and features are more fully preserved.\nThe  window  mechanism  and  multi-head  attention  mechanism  in\nthe Swin-Transformer network have unique advantages in extracting\nbattery current and voltage information features. The data processing\nis more efficient and the key parts of the data can be captured more\nquickly. Therefore, using Swin-Transformer as a network subject to\npredict  battery  SOC  can  fully  explore  the  potential  information  in\nbattery data and make the prediction more accurate.\nForecasting  process: Fig.  1 shows  the  overall  frame  of  the  pro-\nposed network. In this part, the overall prediction process of the net-\nwork will be described.\nRaw  data  time-stretched  scaling: According  to  the  characteris-\ntics of the battery data, the original data is organized into current and\nvoltage corresponding to fixed time intervals and the SOC of the bat-\ntery using the interpolation fitting method.\nConvolutional layer embedding: Taking the advantages of CNN\nin  extracting  low-level  features  and  maintaining  structural  informa-\ntion, a CNN with residual connections is designed as a shared layer.\nReferring  to  the  typical  patch  segmentation  process,  the  output  of\nCNN is divided by a patch split module with a fixed size of 32. So\nfar,  the  data  has  completed  feature  extraction  through  the  convolu-\ntional layer.\nSwin Transformer network training and prediction: After pass-\ning  through  the  convolutional  layer,  samples  officially  enter  the\nSwin-Transformer network. Due to the periodicity of the battery data\nset, the input samples are the values of the current and voltage dur-\ning the first 1000 s, the label is set to the value of SOC in the next\n600  s,  and  the  time  interval  between  two  SOC  predictions  is  20  s.\nReferring  to  the  data  structure  of  sample  and  the  characteristics  of\nprediction  work,  the  Swin  Transformer  block  parameter  is  set  as  6,\nthe window size is set as 6 and the num heads is set as 2, and the loss\nfunction MSE (mean square error). After repeated experiments, it is\nconcluded  that  the  training  frequency  is  maintained  at  about  100\ntimes to obtain the best performance. Afterwards, the test data set can\nbe input into the network to verify the network training effect.\nExperimental  results: In  terms  of  experimental  verification,\nCNN,  LSTM,  FNN  and  Swin  Transformer  neural  network  are  cho-\nsen  for  comparison. Fig.  2.  shows  the  comparison  results  and  error\ncomparison of the two-seat electric aircraft test sets of each network.\nIn the case of the same input samples, one finds that the relative error\nof  the  Swin  Transformer  neural  network  test  results  is  about  1.5%,\nand the effect is obviously better than other networks.\n \nElectric aircraft flight real-time\ncurrent and voltage data\nTime-stretched\nscaling\nSample preparation\nSwin Transformer neural network\nSwin Transformer block × 6\nPatch\nConv2d\n1 × 32 Normalization\nlayer\nMulti-head\nattention\nNormalization\nlayer\nTest data Trained\nmodel\n…\n Multi-layer\nperception\nFlatten\nFully connected layer\n100 × 30\nPredicted value\nof battery SOC\nin the future\n \n \nFig. 1. Swin Transformer neural network overall prediction process.\n \n92.5\n0\n90.0\n100\n87.5\n200\n85.0\n300\n82.5\n400\n80.0\n500\n77.5\n600\n75.0\n72.5 SOC (%)\nTime (s)\nSOC true value\nCNN\nLSTM\nFNN\nSwin Tansformer\n3.0\n2.5\n2.0\n1.5\n1.0\n0.5\n0\n100 200 300 400 500 600\nTime (s)\nAverage relative error per 100 seconds (%)\nCNN\nLSTM\nFNN\nSwin Transformer\n(a) The testing results of each network of two-seat aircraft data\n(b) The average relative error per 100\nseconds of the two-seat aircraft test data\n \n \nFig. 2. Two-seat electric aircraft data test results.\nThis article has been accepted for publication in a future issue of this journal, but has not been fully edited. Content may change prior to final publication.\n 2 IEEE/CAA JOURNAL OF AUTOMATICA SINICA\nFig. 3. shows the prediction results and specific errors of each net-\nwork of the four-seat electric aircraft battery SOC. In the case of the\nsame  input  samples,  the  test  result  error  of  the  Swin  Transformer\nneural  network  is  not  higher  than  3%,  and  the  performance  is  the\nbest.\n  \n92\n90\n88\n86\n84\n82\n80 SOC (%)\n0 100 200 300 400 500 600\nTime (s)\nSOC true value\nCNN\nLSTM\nFNN\nSwin Tansformer\n3.5\n3.0\n2.5\n2.0\n1.5\n1.0\n0.5\n0.0\n100 200 300 400 500 600\nTime (s)\nAverage relative error per 100 seconds (%)\nCNN\nLSTM\nFNN\nSwin Transformer\n(b) The average relative error per 100 seconds\nof the four-seat aircraft test data\n(a) The testing results of each network of four-seat aircraft data\n \n \nFig. 3. Four-seat electric aircraft data test results.\n \nConclusion: In  this  letter,  a  data-driven  estimation  model  is  pro-\nposed  for  SOC  of  lithium-ion  batteries  of  electric  aircraft  based  on\nSwin Transformer neural network. Judging from the results, the net-\nwork  designed  this  time  can  accurately  predict  battery  SOC.  Com-\npared with other neural networks, the network designed this time has\nhigher precision, is more versatile for different types of electric air-\ncraft batteries, and can better meet work needs.\nThe network designed this time may also have some shortcomings.\nFor example, in the case of drastic changes in working conditions, or\nwhen  the  aircraft  encounters  a  fault,  the  prediction  of  SOC  may  be\nbiased.\nAcknowledgments: This work was supported in part by the Chun-\nhui Project of the Ministry of Education of China (HZKY20220429),\nthe  Department  of  Science  &  Technology  of  Liaoning  Province\n(2022-MS-300),  the  Educational  Department  of  Liaoning  Province\n(LJKMZ20220561).\nReferences \n Z. Fei, F. Yang, K.-L. Tsui, L. Li, and Z. Zhang, “Early prediction of\nbattery lifetime via a machine learning based framework,” Energy, vol.\n225, p. 120205, Jun. 2021.\n[1]\n K.  S.  R.  Mawonou,  A.  Eddahech,  D.  Dumur,  D.  Beauvois,  and  E.\nGodoy, “State-of-health estimators coupled to a random forest approach\nfor lithium-ion battery aging factor ranking,” J Power Sources, vol. 484,\np. 229154, Feb. 2021.\n[2]\n W. Zhang, X. Li, and X. Li, “Deep learning-based prognostic approach\nfor lithium-ion batteries with adaptive time-series prediction and on-line\nvalidation,” Measurement, vol. 164, p. 108052, Nov. 2020.\n[3]\n Y.  Zhu,  X.  Li,  Y.  Zhang,  and  W.  Zhang, “Cross-domain  prognostic\nmethod  of  lithium-ion  battery  in  new  energy  electric  aircraft  with\ndomain adaptation,” IEEE Sensors J., vol.  23, no. 13, pp. 14487–14498,\nJul. 2023.\n[4]\n M.  Peter,  H.  A.  Ghali,  S.  Memon,  and  F.  Duan, “Electric  vehicles\nlithium-polymer ion battery dynamic behaviour charging identification\nand  modelling  scheme,” J.  Dynamics,  vol. 2,  no. 3,  pp. 170–176,  Aug.\n2023.\n[5]\n K. Liu, Q. Peng, R. Teodorescu, and A. M. Foley, “Knowledge-guided\ndata-driven  model  with  transfer  concept  for  battery  calendar  ageing\ntrajectory  prediction,” IEEE/CAA  J.  Autom.  Sinica,  vol. 10,  no. 1,\npp. 272–274, Jan. 2023.\n[6]\n B. Liu, H. Wang, M.-L. Tseng, and Z. Li, “State of charge estimation\nfor lithium-ion batteries based on improved barnacle mating optimizer\nand  support  vector  machine,” J.  Energy  Storage,  vol.  55,  p.  105830,\n2022.\n[7]\n X. Li, S. Yu, Y. Lei, N. Li, and B. Yang, “Intelligent machinery fault\ndiagnosis  with  event-based  camera,” IEEE  Trans.  Ind.  Informatics,\nvol. 20, no. 1, pp. 380–389, 2024.\n[8]\n W.  Zhang,  and  X.  Li, “Data  privacy  preserving  federated  transfer\nlearning  in  machinery  fault  diagnostics  using  prior  distributions,”\nStructural Health Monitoring, vol. 21, no. 4, pp. 1329–1344, Jul. 2023.\n[9]\n X. Li, C. Zhang, X. Li, and W, Zhang, “Federated transfer learning in\nfault  diagnosis  under  data  privacy  with  target  self-adaptation,” J.\nManufacturing Systems, vol. 68, pp. 523–535, Jun. 2023.\n[10]\n B. Peter Adedeji, and G. Kabir, “A feedforward deep neural network for\npredicting  the  state-of-charge  of  lithium-ion  battery  in  electric\nvehicles,” Decision Analytics J., vol. 8, p. 100255, Sept. 2023.\n[11]\n C.  Vidal,  P.  Malysz,  M.  Naguib,  A.  Emadi,  and  P.  J.  Kollmeyer,\n“Estimating  battery  state  of  charge  using  recurrent  and  non-recurrent\nneural networks,” J. Energy Storage, vol. 47, p. 103660, Mar. 2022.\n[12]\nThis article has been accepted for publication in a future issue of this journal, but has not been fully edited. Content may change prior to final publication.\nZHANG et al.: SOC PREDICTION OF LITHIUM-ION BATTERIES FOR ELECTRIC AIRCRAFT WITH SWIN TRANSFORMER 3 ",
  "topic": "Transformer",
  "concepts": [
    {
      "name": "Transformer",
      "score": 0.6521265506744385
    },
    {
      "name": "State of charge",
      "score": 0.5892321467399597
    },
    {
      "name": "Ion",
      "score": 0.5744231939315796
    },
    {
      "name": "Lithium (medication)",
      "score": 0.4597615599632263
    },
    {
      "name": "Materials science",
      "score": 0.3867543935775757
    },
    {
      "name": "Electrical engineering",
      "score": 0.3544465899467468
    },
    {
      "name": "Aerospace engineering",
      "score": 0.3446347117424011
    },
    {
      "name": "Automotive engineering",
      "score": 0.33120083808898926
    },
    {
      "name": "Nuclear engineering",
      "score": 0.3203190565109253
    },
    {
      "name": "Engineering",
      "score": 0.26930081844329834
    },
    {
      "name": "Physics",
      "score": 0.2667223811149597
    },
    {
      "name": "Voltage",
      "score": 0.21589818596839905
    },
    {
      "name": "Thermodynamics",
      "score": 0.09625005722045898
    },
    {
      "name": "Psychology",
      "score": 0.09024718403816223
    },
    {
      "name": "Battery (electricity)",
      "score": 0.07460600137710571
    },
    {
      "name": "Quantum mechanics",
      "score": 0.04709509015083313
    },
    {
      "name": "Psychiatry",
      "score": 0.0
    },
    {
      "name": "Power (physics)",
      "score": 0.0
    }
  ]
}